<!doctype html>
<html data-n-head-ssr lang="zh" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22zh%22%7D%7D">
  <head >
    <title>vue+Minio实现多文件进度上传 - 掘金</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover"><meta data-n-head="ssr" name="apple-itunes-app" content="app-id=987739104"><meta data-n-head="ssr" name="theme-color" content="#ffffff"><meta data-n-head="ssr" name="msapplication-TileColor" content="#da532c"><meta data-n-head="ssr" vmid="description" name="description" content="背景 最近突然接到了一个产品的需求，有点特别，在这里给大家分享一下，需求如下 提交表单，同时要上传模型资源 模型文件是大文件，要显示上传进度，同时可以删除 模型文件要上传到服务器，表单数据同步到数据库"><meta data-n-head="ssr" vmid="keywords" name="keywords" content="Vue.js,JavaScript,前端"><link data-n-head="ssr" rel="preconnect" href="//unpkg.byted-static.com/" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="//lf3-cdn-tos.bytescm.com" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="//mcs.snssdk.com" crossorigin="anonymous"><link data-n-head="ssr" rel="preconnect" href="//i.snssdk.com" crossorigin="anonymous"><link data-n-head="ssr" rel="dns-prefetch" href="//lf3-short.ibytedapm.com"><link data-n-head="ssr" rel="dns-prefetch" href="//lf3-cdn-tos.bytescm.com"><link data-n-head="ssr" rel="dns-prefetch" href="//api.juejin.cn"><link data-n-head="ssr" rel="dns-prefetch" href="//lf-cdn-tos.bytescm.com"><link data-n-head="ssr" rel="dns-prefetch" href="//unpkg.byted-static.com"><link data-n-head="ssr" rel="dns-prefetch" href="//p1-juejin.byteimg.com"><link data-n-head="ssr" rel="dns-prefetch" href="//p3-juejin.byteimg.com"><link data-n-head="ssr" rel="dns-prefetch" href="//p6-juejin.byteimg.com"><link data-n-head="ssr" rel="dns-prefetch" href="//p9-juejin.byteimg.com"><link data-n-head="ssr" rel="dns-prefetch" href="//p1-jj.byteimg.com"><link data-n-head="ssr" rel="dns-prefetch" href="//p2-jj.byteimg.com"><link data-n-head="ssr" rel="dns-prefetch" href="//p6-jj.byteimg.com"><link data-n-head="ssr" rel="dns-prefetch" href="//p9-jj.byteimg.com"><link data-n-head="ssr" rel="dns-prefetch" href="//mcs.snssdk.com"><link data-n-head="ssr" rel="dns-prefetch" href="//i.snssdk.com"><link data-n-head="ssr" rel="apple-touch-icon" sizes="180x180" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/apple-touch-icon.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="32x32" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/favicon-32x32.png"><link data-n-head="ssr" rel="icon" type="image/png" sizes="16x16" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/favicon-16x16.png"><link data-n-head="ssr" rel="mask-icon" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/safari-pinned-tab.svg" color="#1E80FF"><link data-n-head="ssr" rel="manifest" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/favicons/site.webmanifest"><link data-n-head="ssr" rel="search" title="掘金" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/search.xml" type="application/opensearchdescription+xml"><link data-n-head="ssr" rel="stylesheet" href="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/bytedesign.min.css"><link data-n-head="ssr" rel="canonical" href="https://juejin.cn/post/7075616880571973646"><script data-n-head="ssr" type="text/javascript" data-sdk-glue-default="load" src="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/rc-client-security-web-glue/1.0.0.19/sdk-glue.js"></script><script data-n-head="ssr" type="text/javascript" data-sdk-glue-default="init">
        (function (){
          var options = {
            bdms: {
              aid: 2608,
              paths: [
                '/growth_api/v1/publish_benefit_history',
                '/growth_api/v1/check_in',
                '/growth_api/v1/lottery/draw',
                '/growth_api/v1/lottery/ten_draw',
                '/web_shorten',
                '/user_api/v1/user/get',
                '/interact_api/v1/digg/save',
                '/interact_api/v1/digg/query_page',
                '/interact_api/v1/comment/list',
                '/interact_api/v1/comment/hots',
                '/content_api/v1/article/detail',
              ]
            },
            verifyCenter: {
              interceptPathList: [
                '/user_api/v1/user/get',
                '/interact_api/v1/digg/save',
                '/interact_api/v1/digg/query_page',
                '/interact_api/v1/comment/list',
                '/interact_api/v1/comment/hots',
                '/content_api/v1/article/detail',
              ],
              commonOptions: {
                aid: 2608,
              },
              captchaOptions: {
                showMode: 'mask',
              },
            }
          }
          window._SdkGlueInit(options)
        })();
        </script><script data-n-head="ssr" vmid="slardar" type="text/javascript" crossorigin="anonymous">;(function (w, d, u, b, n, pc, ga, ae, po, s, p, e, t, pp) {pc = 'precollect';ga = 'getAttribute';ae = 'addEventListener';po = 'PerformanceObserver';s = function (m) {p = [].slice.call(arguments);p.push(Date.now(), location.href);(m == pc ? s.p.a : s.q).push(p)};s.q = [];s.p = { a: [] };w[n] = s;e = document.createElement('script');e.src = u + '?bid=' + b + '&globalName=' + n;e.crossOrigin = u.indexOf('sdk-web') > 0 ? 'anonymous' : 'use-credentials';d.getElementsByTagName('head')[0].appendChild(e);if (ae in w) {s.pcErr = function (e) {e = e || w.event;t = e.target || e.srcElement;if (t instanceof Element || t instanceof HTMLElement) {if (t[ga]('integrity')) {w[n](pc, 'sri', t[ga]('href') || t[ga]('src'))} else {w[n](pc, 'st', { tagName: t.tagName, url: t[ga]('href') || t[ga]('src') })}} else {w[n](pc, 'err', e.error || e.message)}};s.pcRej = function (e) {e = e || w.event;w[n](pc, 'err', e.reason || (e.detail && e.detail.reason))};w[ae]('error', s.pcErr, true);w[ae]('unhandledrejection', s.pcRej, true);};if('PerformanceLongTaskTiming' in w) {pp = s.pp = { entries: [] };pp.observer = new PerformanceObserver(function (l) {pp.entries = pp.entries.concat(l.getEntries())});pp.observer.observe({ entryTypes: ['longtask', 'largest-contentful-paint','layout-shift'] })}})(window,document,'https://lf3-short.ibytedapm.com/slardar/fe/sdk-web/browser.cn.js','2608','SlardarWeb')</script><script data-n-head="ssr" type="text/javascript" src="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/slardar-plugin/imageReport.js"></script><script data-n-head="ssr" type="text/javascript" src="https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web//static/cdn-retry/bundle-669b12.js" id="cdn-retry" defer></script><script data-n-head="ssr" type="application/ld+json">[{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://juejin.cn/post/7075616880571973646"},"headline":"vue+Minio实现多文件进度上传","description":"背景 最近突然接到了一个产品的需求，有点特别，在这里给大家分享一下，需求如下 提交表单，同时要上传模型资源 模型文件是大文件，要显示上传进度，同时可以删除 模型文件要上传到服务器，表单数据同步到数据库","image":["https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45c61471d63d4e35a0e901679cbae3ee~tplv-k3u1fbpfcp-watermark.image?"],"author":{"@type":"Organization","name":"清风夜半"},"publisher":{"@type":"Organization","name":"掘金","logo":{"@type":"ImageObject","url":"//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/e08da34488b114bd4c665ba2fa520a31.svg"}},"datePublished":"2022-03-16T16:48:24+08:00","dateModified":"2022-03-16T17:42:19+08:00"},{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","name":"稀土掘金","position":1,"item":"https://juejin.cn"},{"@type":"ListItem","name":"前端","position":2,"item":"https://juejin.cn/frontend"},{"@type":"ListItem","name":"文章","position":3}]}]</script><link rel="preload" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/0f796d8.js" as="script"><link rel="preload" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/7840f18.js" as="script"><link rel="preload" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/2417727.js" as="script"><link rel="preload" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/app.5fa843b.css" as="style"><link rel="preload" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/5c2fd5e.js" as="script"><link rel="preload" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/layouts/default.c06839e.css" as="style"><link rel="preload" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/a51a2c3.js" as="script"><link rel="preload" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/55.c8f1186.css" as="style"><link rel="preload" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/cb5b63a.js" as="script"><link rel="preload" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/99.8a39ffb.css" as="style"><link rel="preload" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/298b73f.js" as="script"><link rel="stylesheet" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/app.5fa843b.css"><link rel="stylesheet" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/layouts/default.c06839e.css"><link rel="stylesheet" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/55.c8f1186.css"><link rel="stylesheet" href="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/99.8a39ffb.css">
  </head>
  <body >
    <script data-n-head="ssr" type="text/javascript" data-pbody="true">(function () {
    const pages = [
        /^\/$/,
        /^\/following$/,
        /^\/recommended$/,
        '^/pins.*',
        '^/pin.*',
        /^\/course(?!\/payment\/)/,
        /^\/post\/.*/,
        '^/hot.*',
        /^\/book\/\d+/,
        /^\/video\/\d+/,
        /^\/user\/settings.*/,
        /^\/spost\/\d+/,
        /^\/notification(?!\/im)/,
        '^/backend',
        '^/frontend',
        '^/android',
        '^/ios',
        '^/ai',
        '^/freebie',
        '^/career',
        '^/article',
    ];
    function isInJuejinApp() {
        const userAgent = typeof navigator !== 'undefined' ? navigator.userAgent : '';
        return /juejin/i.test(userAgent);
    }
    if (typeof window !== 'undefined' && !isInJuejinApp()) {
        try {
            const path = window.location.pathname;
            const isAvailable = pages.some((page) => {
                const reg = new RegExp(page);
                return reg.test(path);
            });
            if (isAvailable) {
                const localValue = localStorage.getItem('juejin_2608_theme') || '{}';
                let { theme = 'light', isFollowSystem = false } = JSON.parse(localValue);
                if (isFollowSystem) {
                    const themeMedia = window.matchMedia('(prefers-color-scheme: light)');
                    theme = themeMedia.matches ? 'light' : 'dark';
                    localStorage.setItem('juejin_2608_theme', JSON.stringify({ theme, isFollowSystem }));
                }
                document.body.setAttribute('data-theme', theme);
            }
            else {
                document.body.setAttribute('data-theme', 'light');
            }
        }
        catch (e) {
            console.error('浏览器不支持localStorage');
        }
    }
})()</script><div data-server-rendered="true" id="__nuxt"><div id="__layout"><div id="juejin"><div class="view-container" data-v-f8753450 data-v-ad8c40d2><div class="main-header-box" data-v-f8753450><header data-fetch-key="0" class="main-header main-header unauthorized visible" data-v-e6586602 data-v-f8753450><div class="container" data-v-e6586602><a href="/" class="logo" data-v-e6586602><img src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/e08da34488b114bd4c665ba2fa520a31.svg" alt="稀土掘金" class="logo-img" data-v-e6586602> <img src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/6c61ae65d1c41ae8221a670fa32d05aa.svg" alt="稀土掘金" class="mobile" data-v-e6586602></a> <!----> <nav role="navigation" class="main-nav" data-v-e6586602><ul class="nav-list" data-v-e6586602><!----> <li class="main-nav-list" data-v-e6586602><div class="phone-show-menu" data-v-e6586602><span data-v-e6586602>首页</span> <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="unfold16-icon" data-v-e6586602 data-v-e6586602><path d="M2.45025 4.82431C2.17422 4.49957 2.40501 4.00049 2.83122 4.00049H9.16878C9.59498 4.00049 9.82578 4.49957 9.54975 4.82431L6.38097 8.55229C6.1813 8.78719 5.8187 8.78719 5.61903 8.55229L2.45025 4.82431Z" data-v-e6586602 data-v-e6586602></path></svg></div> <ul class="phone-hide" data-v-e6586602><li class="nav-item link-item" data-v-e6586602><a href="/" data-v-e6586602>首页</a></li> <li class="nav-item link-item activities" data-v-e6586602><a href="/pins" data-v-e6586602>
                沸点
                <span class="text" data-v-e6586602><!----></span></a></li> <li class="nav-item link-item book" data-v-e6586602><a href="/course" data-v-e6586602>
                课程
                <!----></a></li> <li class="nav-item link-item" data-v-e6586602><a href="/live" data-v-e6586602>
                直播
              </a></li> <li class="nav-item link-item" data-v-e6586602><a href="/events/all" data-v-e6586602>活动</a></li> <li class="nav-item link-item" data-v-e6586602><a href="/challenge" data-v-e6586602>
                竞赛
                <!----></a></li> <nav class="nav-item link-item" data-v-e6586602><a href="https://detail.youzan.com/show/goods/newest?kdt_id=104340304" target="_blank" rel="nofollow noopener noreferrer" class="nav-item link-item no-border" data-v-e6586602><span data-v-e6586602>商城</span></a> <!----></nav> <nav class="nav-item link-item download-icon" data-v-e6586602><a href="/app?utm_source=jj_nav" target="_blank" class="download-app no-border" data-v-e6586602>
                APP
              </a></nav> <nav class="nav-item link-item extension-icon" data-v-e6586602><a href="https://juejin.cn/extension?utm_source=jj_nav" target="_blank" rel="nofollow noopener noreferrer" class="broswer-extension no-border" data-v-e6586602><span data-v-e6586602>插件</span></a></nav> <!----></ul></li> <ul class="right-side-nav" data-v-e6586602><li class="search-add" data-v-e6586602><ul class="search-add-ul" data-v-e6586602><li class="nav-item search" data-v-e6586602><form role="search" class="search-form" data-v-e6586602><input type="search" maxlength="64" placeholder="" value="" class="search-input" data-v-e6586602> <div class="seach-icon-container" data-v-e6586602><svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="search-icon" data-v-e6586602 data-v-e6586602><path d="M12.4008 12.4008C14.744 10.0577 14.744 6.25871 12.4008 3.91556C10.0577 1.57242 6.25871 1.57242 3.91556 3.91556C1.57242 6.25871 1.57242 10.0577 3.91556 12.4008C6.25871 14.744 10.0577 14.744 12.4008 12.4008ZM12.4008 12.4008L15.5828 15.5828" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-e6586602 data-v-e6586602></path></svg></div> <div class="typehead" style="display:none;" data-v-e6586602><!----> <div class="title" data-v-e6586602><span data-v-e6586602>搜索历史</span> <span class="clear" data-v-e6586602>
                        清空
                      </span></div> <div class="list" data-v-e6586602></div></div></form></li> <li class="nav-item add creator-item" data-v-e6586602><div class="add-group" data-v-be6602bc data-v-e6586602><!----> <button class="add-btn" data-v-be6602bc>
    创作者中心
  </button> <div class="more" data-v-be6602bc><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="unfold12-icon" data-v-be6602bc data-v-be6602bc><path d="M2.45025 4.82383C2.17422 4.49908 2.40501 4 2.83122 4H9.16878C9.59499 4 9.82578 4.49908 9.54975 4.82382L6.38097 8.5518C6.1813 8.7867 5.8187 8.7867 5.61903 8.5518L2.45025 4.82383Z" fill="white" data-v-be6602bc data-v-be6602bc></path></svg> <div class="more-mask" data-v-be6602bc></div> <div class="more-list" data-v-be6602bc><ul class="menu" data-v-be6602bc><li class="item" data-v-be6602bc><div class="icon write-article" data-v-be6602bc></div> <div class="title" data-v-be6602bc>写文章</div></li><li class="item" data-v-be6602bc><div class="icon issue-points" data-v-be6602bc></div> <div class="title" data-v-be6602bc>发沸点</div></li><li class="item" data-v-be6602bc><div class="icon write-note" data-v-be6602bc></div> <div class="title" data-v-be6602bc>写笔记</div></li><li class="item" data-v-be6602bc><div class="icon create-jcode" data-v-be6602bc></div> <div class="title" data-v-be6602bc>写代码</div></li><li class="item" data-v-be6602bc><div class="icon drafts" data-v-be6602bc></div> <div class="title" data-v-be6602bc>草稿箱</div></li></ul> <div class="divider" data-v-be6602bc></div> <div class="inspiration" data-v-be6602bc><div class="info" data-v-be6602bc><span class="title" data-v-be6602bc>创作灵感</span> <span class="more-info" data-v-be6602bc>
            查看更多
            <i class="icon byte-icon byte-icon--right" data-v-be6602bc><svg t="1561636167146" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="404349" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M630.4 512L283.52 165.12a21.12 21.12 0 0 1 0-30.08l30.08-30.08a21.12 21.12 0 0 1 30.08 0l377.6 376.96a42.24 42.24 0 0 1 0 60.16l-377.6 376.96a21.12 21.12 0 0 1-30.08 0l-30.08-30.08a21.12 21.12 0 0 1 0-30.08z" p-id="404350"></path></svg></i></span></div> <div class="list" data-v-be6602bc>  <div class="item" data-v-090682e2 data-v-be6602bc><div class="xitu-skeleton xitu-skeleton-animated" data-v-090682e2><div class="xitu-skeleton-item" data-v-090682e2><!----> <div class="xitu-skeleton-content" data-v-090682e2><div class="xitu-skeleton-line" data-v-090682e2></div><div class="xitu-skeleton-line" data-v-090682e2></div><div class="xitu-skeleton-line" data-v-090682e2></div></div></div></div></div></div></div></div></div> <!----></div></li></ul></li> <li class="nav-item vip-entry" data-v-e6586602><div class="vip-title" data-v-e6586602><div class="vip-entry-img" data-v-e6586602><img src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/24127194d5b158d7eaf8f09a256c5d01.svg" alt="vip" class="vip-img" data-v-e6586602> <!----></div> <div class="vip-words" data-v-e6586602>会员</div></div></li> <!----> <!----> <!----> <li class="nav-item auth hidden" data-v-e6586602><div class="login-button-wrap" data-v-e6586602><button class="login-button" data-v-e6586602>
                登录
                <div class="login-button-inner" data-v-e6586602><div class="login-button-line" data-v-e6586602></div>
                  注册
                </div></button> <!----></div></li></ul></ul></nav></div></header></div>  <main class="container main-container" style="max-width:1140px;" data-v-f8753450><div class="view column-view" data-v-f8753450 data-v-ad8c40d2><!----> <div class="main-area article-area" data-v-f8753450 data-v-ad8c40d2><article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7075616880571973646" data-draft-id="7075603136836009991" data-original-type="0" class="article" data-v-ad8c40d2><!----> <meta itemprop="headline" content="vue+Minio实现多文件进度上传"> <meta itemprop="keywords" content="Vue.js,JavaScript,前端"> <meta itemprop="datePublished" content="2022-03-16T08:48:24.000Z"> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="清风夜半"> <meta itemprop="url" content="https://juejin.cn/user/1398234520238839"></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="掘金"> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"> <meta itemprop="width" content="180"> <meta itemprop="height" content="180"></div></div> <h1 class="article-title" data-v-ad8c40d2>
            vue+Minio实现多文件进度上传
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-ad8c40d2><div class="author-info-box" data-v-ad8c40d2><div class="author-name" data-v-ad8c40d2><a href="/user/1398234520238839/posts" target="_blank" rel="" class="username username ellipsis" data-v-2265c9df data-v-ad8c40d2><span class="name" style="max-width:256px;" data-v-2265c9df>
    清风夜半
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50 data-v-2265c9df><span class="tooltip" data-v-cd7d0a50><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 融会贯通
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.4 融会贯通" title="VIP.4 融会贯通" class="lazy" style="aspect-ratio:NaN;" data-v-55b483d2 data-v-cd7d0a50></span></span></div> </a> <!----></div> <div class="meta-box" data-v-ad8c40d2><time datetime="2022-03-16T08:48:24.000Z" title="Wed Mar 16 2022 16:48:24 GMT+0800 (China Standard Time)" class="time" data-v-ad8c40d2>
                    2022-03-16 16:48
                  </time> <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-ad8c40d2><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-ad8c40d2></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-ad8c40d2></circle></svg> <span class="views-count" data-v-ad8c40d2>
                    6413
                  </span> <!----></div></div> <!----></div> <!----> <!----> <!----> <div itemprop="articleBody" class="article-content markdown-viewer" data-v-ad8c40d2><div class="markdown-body cache"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre>code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote>p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre>code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h1 data-id="heading-0">背景</h1>
<p>最近突然接到了一个产品的需求，有点特别，在这里给大家分享一下，需求如下</p>
<ol>
<li>提交表单，同时要上传模型资源</li>
<li>模型文件是大文件，要显示上传进度，同时可以删除</li>
<li>模型文件要上传到服务器，表单数据同步到数据库</li>
<li>同时要同步上传后的模型地址到数据库</li>
<li>后端使用Minio做文件管理</li>
</ol>
<p>设计图如下</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a92063a729f247df869a3ff23e547bb0~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="pic1.png" loading="lazy"></p>
<p>一开始以为是一个简单的表单上传，发现并不是，这是大文件上传啊，但很快又发现，不单单是上传大文件，还有将文件信息关联到表单。</p>
<p>基于这个奇葩的情况，我和后端兄弟商量了一下，决定使用如下方案</p>
<h1 data-id="heading-1">实现方案</h1>
<p>分2步走</p>
<ol>
<li>点击上传时，先提交表单信息到数据库，接着后端返回一个表单的id给我</li>
<li>当所有文件上传完成后，再调用另外一个服务，将上传完成后的地址和表单id发送给后端</li>
</ol>
<p>如此，便完成了上面的需求</p>
<h3 data-id="heading-2">了解一下Mino</h3>
<p>这里大家先了解一下Minio的js <a href="https://link.juejin.cn?target=http%3A%2F%2Fdocs.minio.org.cn%2Fdocs%2Fmaster%2Fjavascript-client-api-reference" target="_blank" title="http://docs.minio.org.cn/docs/master/javascript-client-api-reference" ref="nofollow noopener noreferrer">SDK文档</a></p>
<p>里面有2个很重要的接口，今天要用到</p>











<table><thead><tr><th><strong>一个是给文件生成用于put方法上传的地址</strong></th></tr></thead><tbody><tr><td><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2702520f452349c596daf281e5da60ee~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="image.png" loading="lazy"></td></tr></tbody></table>






<table><thead><tr><th><strong>一个是获取已经上传完成后的文件的get下载地址</strong></th></tr></thead></table>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f8e867e38b964ad2b6e0c3011af89b30~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?" alt="image.png" loading="lazy"></p>
<h3 data-id="heading-3">实现步骤</h3>
<p>这里是使用原生的 ajax请求进行上传的，至于为什么，后面会有说到</p>
<h5 data-id="heading-4">1.创建存储桶</h5>
<p>创建一个Minio上传实例</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">var</span> <span class="hljs-title class_">Minio</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'minio'</span>)

<span class="hljs-variable language_">this</span>.<span class="hljs-property">minioClient</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Minio</span>.<span class="hljs-title class_">Client</span>({
    <span class="hljs-attr">endPoint</span>: <span class="hljs-string">'192.168.172.162'</span>, <span class="hljs-comment">//后端提供</span>
    <span class="hljs-attr">port</span>: <span class="hljs-number">9000</span>, <span class="hljs-comment">//端口号默认9000</span>
    <span class="hljs-attr">useSSL</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">accessKey</span>: <span class="hljs-string">'Q3AM3UQ867SPQQA43P2F'</span>, <span class="hljs-comment">//后端提供</span>
    <span class="hljs-attr">secretKey</span>: <span class="hljs-string">'zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG'</span>
});

<span class="hljs-variable language_">this</span>.<span class="hljs-property">userBucket</span> = <span class="hljs-string">'yourBucketName'</span> <span class="hljs-comment">//这里后端需要提供给你，一个存储桶名字</span>
<span class="copy-code-btn">复制代码</span></code></pre>
<h5 data-id="heading-5">2.选择文件</h5>
<p>这里使用input标签选择文件,点击选择文件的时候，调用一下input的click方法，就可以打开本地文件夹</p>
<pre><code class="hljs language-html copyable" lang="html"><span class="hljs-tag">&#x3C;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"资源文件"</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">el-button</span>
    <span class="hljs-attr">style</span>=<span class="hljs-string">"marginRight:10px;"</span>
    @<span class="hljs-attr">click</span>=<span class="hljs-string">"selectFile()"</span>
    <span class="hljs-attr">size</span>=<span class="hljs-string">"mini"</span>
  ></span>选择文件<span class="hljs-tag">&#x3C;/<span class="hljs-name">el-button</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">input</span>
    <span class="hljs-attr">:accept</span>=<span class="hljs-string">"acceptFileType"</span>
    <span class="hljs-attr">multiple</span>=<span class="hljs-string">"multiple"</span>
    <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span>
    <span class="hljs-attr">id</span>=<span class="hljs-string">"uploadInput"</span>
    <span class="hljs-attr">ref</span>=<span class="hljs-string">"uploadInput"</span>
    <span class="hljs-attr">v-show</span>=<span class="hljs-string">"false"</span>
    @<span class="hljs-attr">change</span>=<span class="hljs-string">"getAndFormatFile()"</span>
  ></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tip"</span>></span>仅支持.gbl、.gltf、.fbx、.obj、.mtl、.hdr、.png、.jpg格式的文件<span class="hljs-tag">&#x3C;/<span class="hljs-name">i</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tip"</span>></span>单个文件的大小限制为128MB<span class="hljs-tag">&#x3C;/<span class="hljs-name">i</span>></span>
<span class="hljs-tag">&#x3C;/<span class="hljs-name">el-form-item</span>></span>

<span class="copy-code-btn">复制代码</span></code></pre>
<pre><code class="hljs language-js copyable" lang="js">
<span class="hljs-title function_">selectFile</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">let</span> inputDOM = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">uploadInput</span>
    inputDOM.<span class="hljs-title function_">click</span>();
},

<span class="copy-code-btn">复制代码</span></code></pre>
<p>接着就是对文件进行格式化</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">//格式化文件并创建上传队列</span>
  <span class="hljs-title function_">getAndFormatFile</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">let</span> files = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">uploadInput</span>.<span class="hljs-property">files</span>
    <span class="hljs-keyword">const</span> userBucket = <span class="hljs-variable language_">this</span>.<span class="hljs-property">userBucket</span>
    <span class="hljs-keyword">if</span>(files.<span class="hljs-property">length</span> > <span class="hljs-number">6</span>) {
      <span class="hljs-variable language_">this</span>.$message({
        <span class="hljs-attr">message</span>: <span class="hljs-string">`最大只能上传6个文件`</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>
      })
      <span class="hljs-keyword">return</span>
    }
    files.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">file, index</span>) =></span> {
      <span class="hljs-keyword">if</span> ((file.<span class="hljs-property">size</span> / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) > <span class="hljs-number">128</span>) { <span class="hljs-comment">//单个文件限制大小为128MB</span>
        <span class="hljs-variable language_">this</span>.$message({
          <span class="hljs-attr">message</span>: <span class="hljs-string">`文件大小不能超过128MB`</span>,
          <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>
        })
        <span class="hljs-keyword">return</span>
      }
      <span class="hljs-comment">//创建文件的put方法的url</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">minioClient</span>.<span class="hljs-title function_">presignedPutObject</span>(userBucket, file.<span class="hljs-property">name</span>, <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span>, <span class="hljs-function">(<span class="hljs-params">err, presignedUrl</span>) =></span> {
        <span class="hljs-keyword">if</span> (err) {
          <span class="hljs-variable language_">this</span>.$message({
            <span class="hljs-attr">message</span>: <span class="hljs-string">`服务器连接超时`</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>
          })
          <span class="hljs-keyword">return</span> err
        }
        <span class="hljs-keyword">let</span> fileIcon = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getFileIcon</span>(file)
        <span class="hljs-keyword">let</span> fileUploadProgress = <span class="hljs-string">'0%'</span> <span class="hljs-comment">//文件上传进度</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>.<span class="hljs-title function_">push</span>({
          file, <span class="hljs-comment">//文件</span>
          fileIcon, <span class="hljs-comment">//文件对应的图标 className</span>
          fileUploadProgress, <span class="hljs-comment">//文件上传进度</span>
          <span class="hljs-attr">filePutUrl</span>: presignedUrl, <span class="hljs-comment">//文件上传put方法的url</span>
          <span class="hljs-attr">fileGetUrl</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">//文件下载的url</span>
        })
      })
    })
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileList</span> = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>]
  },
<span class="copy-code-btn">复制代码</span></code></pre>
<h5 data-id="heading-6">3.创建上传队列</h5>
<p>这里定义了一个创建文件上传请求的方法，使用原生的<code>XMLHttpRequest</code>，它接受以下参数</p>
<ul>
<li><code>file</code>:要上传的文件</li>
<li><code>filePutUrl</code>:文件上传的put方法地址</li>
<li><code>customHeader</code>: 自定义的头信息</li>
<li><code>onUploadProgress</code>:文件上传的进度监听函数</li>
<li><code>onUploaded</code>:文件上传完成的监听函数</li>
<li><code>onError</code>:文件上传出错的监听函数</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"> <span class="hljs-comment">//创建上传文件的http</span>
  <span class="hljs-title function_">createUploadHttp</span>(<span class="hljs-params">config</span>){
    <span class="hljs-keyword">const</span> {file, filePutUrl, customHeader, onUploadProgress, onUploaded, onError} = config
    <span class="hljs-keyword">let</span> fileName = file.<span class="hljs-property">name</span>
    <span class="hljs-keyword">let</span> http = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
    http.<span class="hljs-property">upload</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"progress"</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =></span> { <span class="hljs-comment">//监听http的进度。并执行进度监听函数</span>
      <span class="hljs-title function_">onUploadProgress</span>({
        <span class="hljs-attr">progressEvent</span>: e,
        <span class="hljs-attr">uploadingFile</span>: file
      })
    }, <span class="hljs-literal">false</span>)

    http.<span class="hljs-property">onload</span> = <span class="hljs-function">() =></span> {
      <span class="hljs-keyword">if</span> (http.<span class="hljs-property">status</span> === <span class="hljs-number">200</span> &#x26;&#x26; http.<span class="hljs-property">status</span> &#x3C; <span class="hljs-number">300</span> || http.<span class="hljs-property">status</span> === <span class="hljs-number">304</span>) {
        <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">//监听http的完成事件，并执行上传完成的监听函数</span>
          <span class="hljs-keyword">const</span> result = http.<span class="hljs-property">responseURL</span>
          <span class="hljs-title function_">onUploaded</span>({ result, <span class="hljs-attr">uploadedFile</span>: file})
        } <span class="hljs-keyword">catch</span>(error) {
        <span class="hljs-comment">//监听错误</span>
          <span class="hljs-title function_">onError</span>({ error, <span class="hljs-attr">errorFile</span>: file})
        }
      }
    }
 
    http.<span class="hljs-title function_">open</span>(<span class="hljs-string">"PUT"</span>, filePutUrl, <span class="hljs-literal">true</span>);
    <span class="hljs-comment">//加入头信息</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(customHeader).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key, index</span>) =></span>{
      http.<span class="hljs-title function_">setRequestHeader</span>(key, customHeader[key])
    })
    http.<span class="hljs-title function_">send</span>(file);
    <span class="hljs-keyword">return</span> http <span class="hljs-comment">//返回该http实例</span>
  }

<span class="copy-code-btn">复制代码</span></code></pre>
<h5 data-id="heading-7">4.开始上传</h5>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">//上传文件到存储桶</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">handleUplaod</span>(<span class="hljs-params"></span>){
    <span class="hljs-keyword">let</span> _this = <span class="hljs-variable language_">this</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>.<span class="hljs-property">length</span> &#x3C; <span class="hljs-number">1</span>) {
      <span class="hljs-variable language_">this</span>.$message({
        <span class="hljs-attr">message</span>: <span class="hljs-string">`请先选择文件`</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>
      })
      <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">//先上传文件的基本表单信息，获取表单信息的id</span>
    <span class="hljs-keyword">try</span>{
      <span class="hljs-keyword">const</span> {remark, alias} = _this.<span class="hljs-property">uploadFormData</span>
      <span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">uploadModelSourceInfo</span>({remark, <span class="hljs-attr">serviceName</span>: alias})
      _this.<span class="hljs-property">modelSourceInfoId</span> = res.<span class="hljs-property">message</span>
    }<span class="hljs-keyword">catch</span>(error){
      <span class="hljs-keyword">if</span>(error) {
        _this.$message({
          <span class="hljs-attr">message</span>: <span class="hljs-string">`上传失败，请检查服务`</span>,
          <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>
        })
        <span class="hljs-keyword">return</span>
      }
    }

    <span class="hljs-comment">//开始将模型资源上传到远程的存储桶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =></span> {
      <span class="hljs-keyword">const</span> {file, filePutUrl} = item
      <span class="hljs-keyword">let</span> config = {
        file,
        filePutUrl,
        <span class="hljs-attr">customHeader</span>:{
          <span class="hljs-string">"X-FILENAME"</span>: <span class="hljs-built_in">encodeURIComponent</span>(file.<span class="hljs-property">name</span>),
          <span class="hljs-string">"X-Access-Token"</span>: <span class="hljs-title function_">getToken</span>()
        },
        <span class="hljs-attr">onUploadProgress</span>: <span class="hljs-function">(<span class="hljs-params">{progressEvent, uploadingFile}</span>) =></span> {
          <span class="hljs-keyword">let</span> progress = (progressEvent.<span class="hljs-property">loaded</span> / progressEvent.<span class="hljs-property">total</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateFileUploadProgress</span>(uploadingFile, progress)
        },
        <span class="hljs-attr">onUploaded</span>: <span class="hljs-function">(<span class="hljs-params">{result, uploadedFile}</span>) =></span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateFileDownloadUrl</span>(uploadedFile)
        },
        <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">{error, errorFile}</span>) =></span> {

        }
      }

      <span class="hljs-keyword">let</span> httpInstance = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createUploadHttp</span>(config) <span class="hljs-comment">//创建http请求实例</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>.<span class="hljs-title function_">push</span>(httpInstance) <span class="hljs-comment">//将http请求保存到队列中</span>
    })
  },


<span class="hljs-comment">//更新对应文件的上传进度</span>
<span class="hljs-title function_">updateFileUploadProgress</span>(<span class="hljs-params">uploadingFile, progress</span>) {
<span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =></span> {
  <span class="hljs-keyword">if</span>(item.<span class="hljs-property">file</span>.<span class="hljs-property">name</span> === uploadingFile.<span class="hljs-property">name</span>){
    item.<span class="hljs-property">fileUploadProgress</span> = (<span class="hljs-title class_">Number</span>(progress)*<span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) + <span class="hljs-string">'%'</span>
  }
})
},

<span class="hljs-comment">//更新上传完成文件的下载地址</span>
<span class="hljs-title function_">updateFileDownloadUrl</span>(<span class="hljs-params">uploadedFile</span>){
<span class="hljs-keyword">const</span> userBucket = <span class="hljs-variable language_">this</span>.<span class="hljs-property">userBucket</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =></span> {
  <span class="hljs-keyword">if</span>(item.<span class="hljs-property">file</span>.<span class="hljs-property">name</span> === uploadedFile.<span class="hljs-property">name</span>){
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">minioClient</span>.<span class="hljs-title function_">presignedGetObject</span>(userBucket, uploadedFile.<span class="hljs-property">name</span>, <span class="hljs-number">24</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>, <span class="hljs-function">(<span class="hljs-params">err, presignedUrl</span>) =></span> {
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)
      item.<span class="hljs-property">fileGetUrl</span> = presignedUrl
    })
  }
})
},


<span class="copy-code-btn">复制代码</span></code></pre>
<h5 data-id="heading-8">5 上传完成后，同步文件地址给后端</h5>
<p>在watch里监听文件列表，当所有的文件进度都是100%时，表示上传完成，接着就可以同步文件信息</p>
<pre><code class="hljs language-js copyable" lang="js">
<span class="hljs-attr">watch</span>:{
  <span class="hljs-attr">fileInfoList</span>: {
    <span class="hljs-title function_">handler</span>(<span class="hljs-params">val</span>){
      <span class="hljs-comment">//1.3所有文件都上传到存储桶后，将上传完成后的文件地址、文件名字同步后端</span>
      <span class="hljs-keyword">if</span>(val.<span class="hljs-property">length</span> &#x3C; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>
      <span class="hljs-keyword">let</span> allFileHasUpload = val.<span class="hljs-title function_">every</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =></span> {
        <span class="hljs-keyword">return</span> item.<span class="hljs-property">fileGetUrl</span>.<span class="hljs-property">length</span> > <span class="hljs-number">1</span>
      })
     <span class="hljs-keyword">if</span>(allFileHasUpload) {
       <span class="hljs-variable language_">this</span>.<span class="hljs-property">allFileHasUpload</span> = allFileHasUpload
       <span class="hljs-keyword">const</span> {modelSourceInfoId} = <span class="hljs-variable language_">this</span>
       <span class="hljs-keyword">if</span>(modelSourceInfoId.<span class="hljs-property">length</span> &#x3C; <span class="hljs-number">1</span>) {
         <span class="hljs-keyword">return</span>
       }
       <span class="hljs-keyword">const</span> url = process.<span class="hljs-property">env</span>.<span class="hljs-property">VUE_APP_BASE_API</span> + <span class="hljs-string">"/vector-map/threeDimensionalModelService/invokeMapService"</span>
       <span class="hljs-keyword">const</span> files = val.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">ite, idx</span>) =></span> {
         <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">fileName</span>: ite.<span class="hljs-property">file</span>.<span class="hljs-property">name</span>,
            <span class="hljs-attr">fileUrl</span>: ite.<span class="hljs-property">fileGetUrl</span>
         }
       })
       <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">syncAllUploadedFile</span>(url, files, modelSourceInfoId)
     }

    },
    <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>
  }
},



<span class="hljs-comment">//同步已上传的文件到后端</span>
<span class="hljs-title function_">syncAllUploadedFile</span>(<span class="hljs-params">url, files, modelSourceInfoId</span>){
    <span class="hljs-keyword">let</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>()
    xhr.<span class="hljs-property">onload</span> = <span class="hljs-function">() =></span> {
      <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> === <span class="hljs-number">200</span> &#x26;&#x26; xhr.<span class="hljs-property">status</span> &#x3C; <span class="hljs-number">300</span> || xhr.<span class="hljs-property">status</span> === <span class="hljs-number">304</span>) {
        <span class="hljs-keyword">try</span> {
         <span class="hljs-keyword">const</span> res = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>)
         <span class="hljs-keyword">if</span>(res &#x26;&#x26; res.<span class="hljs-property">code</span> === <span class="hljs-number">200</span>){
           <span class="hljs-variable language_">this</span>.$message({
             <span class="hljs-attr">message</span>: <span class="hljs-string">'上传完成'</span>,
             <span class="hljs-attr">type</span>: <span class="hljs-string">'success'</span>
           })
             <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'close'</span>)
             <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span> = []
             <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileList</span> = []
             <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span> = []
         }
        } <span class="hljs-keyword">catch</span>(error) {
         <span class="hljs-variable language_">this</span>.$message({
           <span class="hljs-attr">message</span>: <span class="hljs-string">'上传失败，请检查服务'</span>,
           <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>
         })
        }
      }
    }
    xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">"post"</span>, url, <span class="hljs-literal">true</span>)
    xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'application/json'</span>)
    xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">'X-Access-Token'</span>, <span class="hljs-title function_">getToken</span>())
    <span class="hljs-comment">//将前面1.1获取文件信息的id作为头信息传递到后端</span>
    xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">'ThreeDimensionalModel-ServiceID'</span>, modelSourceInfoId)
    xhr.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(files))
},

<span class="copy-code-btn">复制代码</span></code></pre>
<h5 data-id="heading-9">6.删除文件</h5>
<p>删除文件时要注意</p>
<ul>
<li>删除本地的文件缓存</li>
<li>删除存储桶里面的文件</li>
<li>停止当前文件对应的http请求</li>
</ul>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">//删除文件，并取消正在文件的上传</span>
  <span class="hljs-title function_">deleteFile</span>(<span class="hljs-params">fileInfo, index</span>){
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>[index] &#x26;&#x26; <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>[index].<span class="hljs-title function_">abort</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>[index] &#x26;&#x26; <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileList</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeRemoteFile</span>(fileInfo)
  },

  <span class="hljs-comment">//清空文件并取消上传队列</span>
  <span class="hljs-title function_">clearFile</span>(<span class="hljs-params"></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =></span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>[index] &#x26;&#x26; <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>[index].<span class="hljs-title function_">abort</span>()
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>[index] &#x26;&#x26; <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeRemoteFile</span>(item)
    })
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span> = []
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span> = []
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileList</span> = []
  },
  <span class="hljs-comment">//删除远程文件</span>
  <span class="hljs-title function_">removeRemoteFile</span>(<span class="hljs-params">fileInfo</span>){
    <span class="hljs-keyword">const</span> userBucket = <span class="hljs-variable language_">this</span>.<span class="hljs-property">userBucket</span>
    <span class="hljs-keyword">const</span> { fileUploadProgress, file} = fileInfo
    <span class="hljs-keyword">const</span> fileName = file.<span class="hljs-property">name</span>
    <span class="hljs-keyword">const</span> complete = fileUploadProgress === <span class="hljs-string">'100.00%'</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>
    <span class="hljs-keyword">if</span>(complete){
     <span class="hljs-variable language_">this</span>. minioClient.<span class="hljs-title function_">removeObject</span>(userBucket, fileName, <span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) {
        <span class="hljs-keyword">if</span> (err) {
          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Unable to remove object'</span>, err)
        }
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Removed the object'</span>)
      })
    }<span class="hljs-keyword">else</span>{
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">minioClient</span>.<span class="hljs-title function_">removeIncompleteUpload</span>(userBucket, fileName, <span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) {
        <span class="hljs-keyword">if</span> (err) {
          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Unable to remove incomplete object'</span>, err)
        }
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Incomplete object removed successfully.'</span>)
      })
    }
  },


<span class="copy-code-btn">复制代码</span></code></pre>
<h1 data-id="heading-10">完整代码</h1>
<p>这里的完整代码是我直接从工程里拷贝出来的，里面用到了一些自己封装的服务和方法
比如
后端的接口、AES解密、获取Token、表单验证等</p>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-keyword">import</span>{uploadModelSourceInfo, uploadModelSource, getMinioConfig} <span class="hljs-keyword">from</span> <span class="hljs-string">'@/api/map'</span> 
<span class="hljs-keyword">import</span> <span class="hljs-variable constant_">AES</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/AES.js'</span> 
<span class="hljs-keyword">import</span> { getToken } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/auth'</span> 
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> myValiDate <span class="hljs-keyword">from</span> <span class="hljs-string">"@/utils/formValidate"</span>;
<span class="copy-code-btn">复制代码</span></code></pre>
<pre><code class="hljs language-js copyable" lang="js"><span class="hljs-comment">/**
 * 文件说明
 * <span class="hljs-doctag">@Author</span>: zhuds
 * <span class="hljs-doctag">@Description</span>: 模型资源上传弹窗
    分为3个步骤
    1.先将文件的基本表单信息上传给后端，获取文件信息的ID
    2.然后将文件上传存储桶
    3.等所有文件都上传完成后，再将上传完成后的文件信息传递给后端，注意，此时的请求头要戴上第1步获取的文件信息id
 * <span class="hljs-doctag">@Date</span>: 2/28/2022, 1:13:20 PM
 * <span class="hljs-doctag">@LastEditDate</span>: 2/28/2022, 1:13:20 PM
 * <span class="hljs-doctag">@LastEditor</span>:
 */</span>
&#x3C;template>
  <span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-model"</span>></span>
    <span class="hljs-tag">&#x3C;<span class="hljs-name">el-dialog</span>
    	<span class="hljs-attr">:visible.sync</span>=<span class="hljs-string">"isVisible"</span>
    	@<span class="hljs-attr">close</span>=<span class="hljs-string">"close()"</span>
    	<span class="hljs-attr">:show-close</span> =<span class="hljs-string">"false"</span>
    	<span class="hljs-attr">:close-on-click-modal</span>=<span class="hljs-string">"false"</span>
    	<span class="hljs-attr">top</span>=<span class="hljs-string">"10vh"</span>
      <span class="hljs-attr">v-if</span>=<span class="hljs-string">"isVisible"</span>
      <span class="hljs-attr">:destroy-on-close</span>=<span class="hljs-string">"true"</span>
    ></span>
    	<span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">"title"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header-title"</span>></span>
    		<span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon"</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>           
    		<span class="hljs-tag">&#x3C;<span class="hljs-name">span</span>></span>上传模型资源<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>
    		<span class="hljs-tag">&#x3C;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-icon-close"</span>  @<span class="hljs-attr">click</span>=<span class="hljs-string">"close()"</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">i</span>></span>			       
    	<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>

      <span class="hljs-tag">&#x3C;<span class="hljs-name">el-form</span>
        <span class="hljs-attr">:label-position</span>=<span class="hljs-string">"labelPosition"</span>
        <span class="hljs-attr">label-width</span>=<span class="hljs-string">"80px"</span>
        <span class="hljs-attr">:model</span>=<span class="hljs-string">"uploadFormData"</span>
        <span class="hljs-attr">ref</span>=<span class="hljs-string">"form"</span>
        <span class="hljs-attr">:rules</span>=<span class="hljs-string">"rules"</span>
      ></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"别名"</span>></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">el-input</span>   <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"uploadFormData.alias"</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">el-input</span>></span>
        <span class="hljs-tag">&#x3C;/<span class="hljs-name">el-form-item</span>></span>

        <span class="hljs-tag">&#x3C;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"备注"</span>></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">el-input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"textarea"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"uploadFormData.remark"</span>  <span class="hljs-attr">size</span>=<span class="hljs-string">"small"</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">el-input</span>></span>
        <span class="hljs-tag">&#x3C;/<span class="hljs-name">el-form-item</span>></span>

        <span class="hljs-tag">&#x3C;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"资源文件"</span>></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">el-button</span>
            <span class="hljs-attr">style</span>=<span class="hljs-string">"marginRight:10px;"</span>
            @<span class="hljs-attr">click</span>=<span class="hljs-string">"selectFile()"</span>
            <span class="hljs-attr">size</span>=<span class="hljs-string">"mini"</span>
          ></span>选择文件<span class="hljs-tag">&#x3C;/<span class="hljs-name">el-button</span>></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">input</span>
            <span class="hljs-attr">:accept</span>=<span class="hljs-string">"acceptFileType"</span>
            <span class="hljs-attr">multiple</span>=<span class="hljs-string">"multiple"</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span>
            <span class="hljs-attr">id</span>=<span class="hljs-string">"uploadInput"</span>
            <span class="hljs-attr">ref</span>=<span class="hljs-string">"uploadInput"</span>
            <span class="hljs-attr">v-show</span>=<span class="hljs-string">"false"</span>
            @<span class="hljs-attr">change</span>=<span class="hljs-string">"getAndFormatFile()"</span>
          ></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tip"</span>></span>仅支持.gbl、.gltf、.fbx、.obj、.mtl、.hdr、.png、.jpg格式的文件<span class="hljs-tag">&#x3C;/<span class="hljs-name">i</span>></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tip"</span>></span>单个文件的大小限制为128MB<span class="hljs-tag">&#x3C;/<span class="hljs-name">i</span>></span>
        <span class="hljs-tag">&#x3C;/<span class="hljs-name">el-form-item</span>></span>

      <span class="hljs-tag">&#x3C;/<span class="hljs-name">el-form</span>></span>

      <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"file-list"</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">"fileInfoList.length > 0"</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"file-item"</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, index) in fileInfoList"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span>></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon"</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"name"</span>></span>{{item.file.name}}<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"size"</span>></span>{{(item.file.size/1024/1024).toFixed(2)}}MB  <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"progress"</span>></span>
            <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bar"</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">"{width: item.fileUploadProgress}"</span>></span><span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
          <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
          <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"rate"</span>></span>{{item.fileUploadProgress}}<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>


          <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"delete-btn"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"deleteFile(item, index)"</span>></span>x<span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
        <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
      <span class="hljs-tag">&#x3C;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-footer"</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"info"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"close()"</span>></span>取 消<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
        <span class="hljs-tag">&#x3C;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"success"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleUplaod()"</span>></span>上传<span class="hljs-tag">&#x3C;/<span class="hljs-name">button</span>></span>
      <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>

    <span class="hljs-tag">&#x3C;/<span class="hljs-name">el-dialog</span>></span>
  <span class="hljs-tag">&#x3C;/<span class="hljs-name">div</span>></span>
<span class="hljs-tag">&#x3C;/<span class="hljs-name">template</span>></span></span>

<span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">script</span>></span><span class="javascript">

  <span class="hljs-keyword">import</span>{uploadModelSourceInfo, uploadModelSource, getMinioConfig} <span class="hljs-keyword">from</span> <span class="hljs-string">'@/api/map'</span>
  <span class="hljs-keyword">import</span> <span class="hljs-variable constant_">AES</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/AES.js'</span>
  <span class="hljs-keyword">import</span> { getToken } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/auth'</span>
  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> myValiDate <span class="hljs-keyword">from</span> <span class="hljs-string">"@/utils/formValidate"</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-title class_">Minio</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'minio'</span>)

  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'UploadModelDialog'</span>,
    <span class="hljs-attr">props</span>: {
      <span class="hljs-attr">isVisible</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
        <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>
      },
    },
    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>){
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">labelPosition</span>: <span class="hljs-string">'right'</span>,
        <span class="hljs-attr">uploadFormData</span>: {
          <span class="hljs-attr">alias</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">//服务名称</span>
          <span class="hljs-attr">remark</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">//备注</span>
        },
        <span class="hljs-attr">rules</span>: {
          <span class="hljs-attr">serviceName</span>: [{
          	<span class="hljs-attr">validator</span>: myValiDate.<span class="hljs-property">validateServiceName</span>,
          	<span class="hljs-attr">trigger</span>: <span class="hljs-string">"blur"</span>,
          	<span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
          }],
        },
        <span class="hljs-attr">acceptFileType</span>:<span class="hljs-string">".glb,.gltf,.fbx,.obj,.mtl,.hdr,.png,.jpg, .mp4"</span>,
        <span class="hljs-attr">fileList</span>:[], <span class="hljs-comment">//待上传的文件列表</span>
        <span class="hljs-attr">fileInfoList</span>: [], <span class="hljs-comment">//格式化后的文件信息列表</span>
        <span class="hljs-attr">userBucket</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">httpQueue</span>: [], <span class="hljs-comment">//上传文件的http队列</span>
        <span class="hljs-attr">allFileHasUpload</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//是否完成上传</span>
        <span class="hljs-attr">modelSourceInfoId</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">//模型资源基本信息的id</span>
      }
    },

    <span class="hljs-attr">watch</span>:{
      <span class="hljs-attr">fileInfoList</span>: {
        <span class="hljs-title function_">handler</span>(<span class="hljs-params">val</span>){
          <span class="hljs-comment">//1.3所有文件都上传到存储桶后，将上传完成后的文件地址、文件名字同步后端</span>
          <span class="hljs-keyword">if</span>(val.<span class="hljs-property">length</span> &#x3C; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>
          <span class="hljs-keyword">let</span> allFileHasUpload = val.<span class="hljs-title function_">every</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =></span> {
            <span class="hljs-keyword">return</span> item.<span class="hljs-property">fileGetUrl</span>.<span class="hljs-property">length</span> > <span class="hljs-number">1</span>
          })
         <span class="hljs-keyword">if</span>(allFileHasUpload) {
           <span class="hljs-variable language_">this</span>.<span class="hljs-property">allFileHasUpload</span> = allFileHasUpload
           <span class="hljs-keyword">const</span> {modelSourceInfoId} = <span class="hljs-variable language_">this</span>
           <span class="hljs-keyword">if</span>(modelSourceInfoId.<span class="hljs-property">length</span> &#x3C; <span class="hljs-number">1</span>) {
             <span class="hljs-keyword">return</span>
           }
           <span class="hljs-keyword">const</span> url = process.<span class="hljs-property">env</span>.<span class="hljs-property">VUE_APP_BASE_API</span> + <span class="hljs-string">"/vector-map/threeDimensionalModelService/invokeMapService"</span>
           <span class="hljs-keyword">const</span> files = val.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">ite, idx</span>) =></span> {
             <span class="hljs-keyword">return</span> {
               	<span class="hljs-attr">fileName</span>: ite.<span class="hljs-property">file</span>.<span class="hljs-property">name</span>,
               	<span class="hljs-attr">fileUrl</span>: ite.<span class="hljs-property">fileGetUrl</span>
             }
           })
           <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">syncAllUploadedFile</span>(url, files, modelSourceInfoId)
         }

        },
        <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>
      }
    },

    <span class="hljs-title function_">created</span>(<span class="hljs-params"></span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initMinioClient</span>()
    },

    <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"></span>) {
      <span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">allFileHasUpload</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearFile</span>()
      }
    },

    <span class="hljs-attr">methods</span>:{
       <span class="hljs-comment">//创建存储桶</span>
      <span class="hljs-keyword">async</span> <span class="hljs-title function_">initMinioClient</span>(<span class="hljs-params"></span>){
        <span class="hljs-keyword">const</span> { code, result, message } =  <span class="hljs-variable constant_">AES</span>.<span class="hljs-title function_">decryptToJSON</span>(<span class="hljs-keyword">await</span> <span class="hljs-title function_">getMinioConfig</span>({}))
        <span class="hljs-keyword">if</span>(!result || code !== <span class="hljs-number">200</span>) {
        	<span class="hljs-variable language_">this</span>.<span class="hljs-property">$customMessage</span>.<span class="hljs-title function_">error</span>({<span class="hljs-attr">message</span>: <span class="hljs-string">'获取存储桶配置信息出错'</span>})
        	<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        }
        <span class="hljs-keyword">let</span> {accessKey, bucketName, endPoint, secretKey} = result
        <span class="hljs-comment">//console.log({accessKey, bucketName, endPoint, secretKey})</span>

        <span class="hljs-keyword">let</span> endPointStr = endPoint.<span class="hljs-title function_">split</span>(<span class="hljs-string">":"</span>)[<span class="hljs-number">1</span>]
        <span class="hljs-keyword">let</span> formatPort = <span class="hljs-title class_">Number</span>(endPoint.<span class="hljs-title function_">split</span>(<span class="hljs-string">":"</span>)[<span class="hljs-number">2</span>])
        <span class="hljs-keyword">let</span> formatEndPoint = endPointStr.<span class="hljs-title function_">split</span>(<span class="hljs-string">'//'</span>)[<span class="hljs-number">1</span>]
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">userBucket</span> = bucketName
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">minioClient</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Minio</span>.<span class="hljs-title class_">Client</span>({
          <span class="hljs-attr">useSSL</span>: <span class="hljs-literal">false</span>,
          <span class="hljs-attr">partSize</span>: <span class="hljs-string">'20M'</span>,
          <span class="hljs-attr">port</span>: formatPort,
          <span class="hljs-attr">endPoint</span>: formatEndPoint,
          accessKey,
          secretKey
        });
        <span class="hljs-keyword">let</span> userBucket = <span class="hljs-variable language_">this</span>.<span class="hljs-property">userBucket</span>
        <span class="hljs-comment">//userBucket只能作为字符串变量传入，不能作为其他变量的属性或者函数返回值，属于Minio的一个规定</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">minioClient</span>.<span class="hljs-title function_">bucketExists</span>(userBucket, <span class="hljs-function">(<span class="hljs-params">err</span>)=></span> {
          <span class="hljs-keyword">if</span> (err &#x26;&#x26; err.<span class="hljs-property">code</span> == <span class="hljs-string">'NoSuchBucket'</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">minioClient</span>.<span class="hljs-title function_">makeBucket</span>(userBucket, <span class="hljs-string">'us-east-1'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>)=></span> {
              <span class="hljs-keyword">if</span> (err) {
                <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'创建存储桶失败'</span>, err)
              }
             <span class="hljs-comment">// console.log('Bucket created successfully in "us-east-1".')</span>
            })
          }<span class="hljs-keyword">else</span>{
            <span class="hljs-comment">//console.log('存储桶存在')</span>
          }
        })
      },

      <span class="hljs-title function_">close</span>(<span class="hljs-params">flag = <span class="hljs-literal">false</span></span>) {
        <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'close'</span>, flag)
        <span class="hljs-comment">//关闭弹窗时，如果文件没有上传完成，则清空文件</span>
        <span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">allFileHasUpload</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearFile</span>()
        }
      },
      <span class="hljs-title function_">selectFile</span>(<span class="hljs-params"></span>) {
        <span class="hljs-keyword">let</span> inputDOM = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">uploadInput</span>
        inputDOM.<span class="hljs-title function_">click</span>();
      },

      <span class="hljs-title function_">getFileSize</span>(<span class="hljs-params">file</span>){
        <span class="hljs-keyword">let</span> fileSize = <span class="hljs-string">''</span>
        <span class="hljs-keyword">if</span>(file.<span class="hljs-property">size</span> / <span class="hljs-number">1024</span> &#x3C; <span class="hljs-number">1</span>){
          fileSize = file.<span class="hljs-property">size</span> + <span class="hljs-string">'B'</span>
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(file.<span class="hljs-property">size</span> / <span class="hljs-number">1024</span> /<span class="hljs-number">1024</span> &#x3C; <span class="hljs-number">1</span>){
          fileSize = file.<span class="hljs-property">size</span> + <span class="hljs-string">'KB'</span>
        }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(file.<span class="hljs-property">size</span> / <span class="hljs-number">1024</span> /<span class="hljs-number">1024</span> >=<span class="hljs-number">1</span>){
           fileSize = file.<span class="hljs-property">size</span> + <span class="hljs-string">'MB'</span>
        }<span class="hljs-keyword">else</span>{
        }

        <span class="hljs-keyword">return</span> fileSize

      },

      <span class="hljs-comment">//删除文件，并取消正在文件的上传</span>
      <span class="hljs-title function_">deleteFile</span>(<span class="hljs-params">fileInfo, index</span>){
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>[index] &#x26;&#x26; <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>[index].<span class="hljs-title function_">abort</span>()
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>[index] &#x26;&#x26; <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>)
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>)
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileList</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>)
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeRemoteFile</span>(fileInfo)
      },

      <span class="hljs-comment">//清空文件并取消上传队列</span>
      <span class="hljs-title function_">clearFile</span>(<span class="hljs-params"></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =></span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>[index] &#x26;&#x26; <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>[index].<span class="hljs-title function_">abort</span>()
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>[index] &#x26;&#x26; <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeRemoteFile</span>(item)
        })
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span> = []
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span> = []
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileList</span> = []
      },
      <span class="hljs-comment">//删除远程文件</span>
      <span class="hljs-title function_">removeRemoteFile</span>(<span class="hljs-params">fileInfo</span>){
        <span class="hljs-keyword">const</span> userBucket = <span class="hljs-variable language_">this</span>.<span class="hljs-property">userBucket</span>
        <span class="hljs-keyword">const</span> { fileUploadProgress, file} = fileInfo
        <span class="hljs-keyword">const</span> fileName = file.<span class="hljs-property">name</span>
        <span class="hljs-keyword">const</span> complete = fileUploadProgress === <span class="hljs-string">'100.00%'</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>
        <span class="hljs-keyword">if</span>(complete){
         <span class="hljs-variable language_">this</span>. minioClient.<span class="hljs-title function_">removeObject</span>(userBucket, fileName, <span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) {
            <span class="hljs-keyword">if</span> (err) {
              <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Unable to remove object'</span>, err)
            }
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Removed the object'</span>)
          })
        }<span class="hljs-keyword">else</span>{
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">minioClient</span>.<span class="hljs-title function_">removeIncompleteUpload</span>(userBucket, fileName, <span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) {
            <span class="hljs-keyword">if</span> (err) {
              <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Unable to remove incomplete object'</span>, err)
            }
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Incomplete object removed successfully.'</span>)
          })
        }
      },
      <span class="hljs-comment">//格式化文件并创建上传队列</span>
      <span class="hljs-title function_">getAndFormatFile</span>(<span class="hljs-params"></span>){
        <span class="hljs-keyword">let</span> files = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">uploadInput</span>.<span class="hljs-property">files</span>
        <span class="hljs-keyword">const</span> userBucket = <span class="hljs-variable language_">this</span>.<span class="hljs-property">userBucket</span>
        <span class="hljs-keyword">if</span>(files.<span class="hljs-property">length</span> > <span class="hljs-number">6</span>) {
          <span class="hljs-variable language_">this</span>.$message({
            <span class="hljs-attr">message</span>: <span class="hljs-string">`最大只能上传6个文件`</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>
          })
          <span class="hljs-keyword">return</span>
        }
        files.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">file, index</span>) =></span> {
          <span class="hljs-keyword">if</span> ((file.<span class="hljs-property">size</span> / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) > <span class="hljs-number">128</span>) { <span class="hljs-comment">//单个文件限制大小为128MB</span>
            <span class="hljs-variable language_">this</span>.$message({
              <span class="hljs-attr">message</span>: <span class="hljs-string">`文件大小不能超过128MB`</span>,
              <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>
            })
            <span class="hljs-keyword">return</span>
          }
          <span class="hljs-comment">//创建文件上传的url并格式化文件信息</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">minioClient</span>.<span class="hljs-title function_">presignedPutObject</span>(userBucket, file.<span class="hljs-property">name</span>, <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span>, <span class="hljs-function">(<span class="hljs-params">err, presignedUrl</span>) =></span> {
            <span class="hljs-keyword">if</span> (err) {
              <span class="hljs-variable language_">this</span>.$message({
                <span class="hljs-attr">message</span>: <span class="hljs-string">`服务器连接超时`</span>,
                <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>
              })
              <span class="hljs-keyword">return</span> err
            }
            <span class="hljs-keyword">let</span> fileIcon = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getFileIcon</span>(file)
            <span class="hljs-keyword">let</span> fileUploadProgress = <span class="hljs-string">'0%'</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>.<span class="hljs-title function_">push</span>({
              file, <span class="hljs-comment">//文件</span>
              fileIcon, <span class="hljs-comment">//文件对应的图标 className</span>
              fileUploadProgress, <span class="hljs-comment">//文件上传进度</span>
              <span class="hljs-attr">filePutUrl</span>: presignedUrl, <span class="hljs-comment">//文件上传put方法的url</span>
              <span class="hljs-attr">fileGetUrl</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">//文件下载的url</span>
            })
          })
        })
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileList</span> = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>]
      },

      <span class="hljs-comment">//1.上传文件到存储桶</span>
      <span class="hljs-keyword">async</span> <span class="hljs-title function_">handleUplaod</span>(<span class="hljs-params"></span>){
        <span class="hljs-keyword">let</span> _this = <span class="hljs-variable language_">this</span>
        <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>.<span class="hljs-property">length</span> &#x3C; <span class="hljs-number">1</span>) {
          <span class="hljs-variable language_">this</span>.$message({
            <span class="hljs-attr">message</span>: <span class="hljs-string">`请先选择文件`</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>
          })
          <span class="hljs-keyword">return</span>
        }
        <span class="hljs-comment">//1.1先上传文件的基本表单信息，获取文件信息的id</span>
        <span class="hljs-keyword">try</span>{
          <span class="hljs-keyword">const</span> {remark, alias} = _this.<span class="hljs-property">uploadFormData</span>
          <span class="hljs-keyword">let</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">uploadModelSourceInfo</span>({remark, <span class="hljs-attr">serviceName</span>: alias})
          _this.<span class="hljs-property">modelSourceInfoId</span> = res.<span class="hljs-property">message</span>
        }<span class="hljs-keyword">catch</span>(error){
          <span class="hljs-keyword">if</span>(error) {
            _this.$message({
              <span class="hljs-attr">message</span>: <span class="hljs-string">`上传失败，请检查服务`</span>,
              <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>
            })
            <span class="hljs-keyword">return</span>
          }
        }

        <span class="hljs-comment">//1.2开始将模型资源上传到远程的存储桶</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =></span> {
          <span class="hljs-keyword">const</span> {file, filePutUrl} = item
          <span class="hljs-keyword">let</span> config = {
            file,
            filePutUrl,
            <span class="hljs-attr">customHeader</span>:{
              <span class="hljs-string">"X-FILENAME"</span>: <span class="hljs-built_in">encodeURIComponent</span>(file.<span class="hljs-property">name</span>),
              <span class="hljs-string">"X-Access-Token"</span>: <span class="hljs-title function_">getToken</span>()
            },
            <span class="hljs-attr">onUploadProgress</span>: <span class="hljs-function">(<span class="hljs-params">{progressEvent, uploadingFile}</span>) =></span> {
              <span class="hljs-keyword">let</span> progress = (progressEvent.<span class="hljs-property">loaded</span> / progressEvent.<span class="hljs-property">total</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>)
              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateFileUploadProgress</span>(uploadingFile, progress)
            },
            <span class="hljs-attr">onUploaded</span>: <span class="hljs-function">(<span class="hljs-params">{result, uploadedFile}</span>) =></span> {
              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateFileDownloadUrl</span>(uploadedFile)
            },
            <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">{error, errorFile}</span>) =></span> {

            }
          }

          <span class="hljs-keyword">let</span> httpInstance = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createUploadHttp</span>(config)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span>.<span class="hljs-title function_">push</span>(httpInstance)
        })
      },

      <span class="hljs-comment">//1更新对应文件的上传进度</span>
      <span class="hljs-title function_">updateFileUploadProgress</span>(<span class="hljs-params">uploadingFile, progress</span>) {
        <span class="hljs-comment">//console.log({uploadingFile, progress})</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =></span> {
          <span class="hljs-keyword">if</span>(item.<span class="hljs-property">file</span>.<span class="hljs-property">name</span> === uploadingFile.<span class="hljs-property">name</span>){
            item.<span class="hljs-property">fileUploadProgress</span> = (<span class="hljs-title class_">Number</span>(progress)*<span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) + <span class="hljs-string">'%'</span>
          }
        })
      },

      <span class="hljs-comment">//更新上传完成文件的下载地址</span>
      <span class="hljs-title function_">updateFileDownloadUrl</span>(<span class="hljs-params">uploadedFile</span>){
        <span class="hljs-keyword">const</span> userBucket = <span class="hljs-variable language_">this</span>.<span class="hljs-property">userBucket</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =></span> {
          <span class="hljs-keyword">if</span>(item.<span class="hljs-property">file</span>.<span class="hljs-property">name</span> === uploadedFile.<span class="hljs-property">name</span>){
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">minioClient</span>.<span class="hljs-title function_">presignedGetObject</span>(userBucket, uploadedFile.<span class="hljs-property">name</span>, <span class="hljs-number">24</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>, <span class="hljs-function">(<span class="hljs-params">err, presignedUrl</span>) =></span> {
              <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)
              item.<span class="hljs-property">fileGetUrl</span> = presignedUrl
             <span class="hljs-comment">// console.log(presignedUrl)</span>
            })
          }
        })
      },

      <span class="hljs-comment">//同步已上传的文件到后端</span>
      <span class="hljs-title function_">syncAllUploadedFile</span>(<span class="hljs-params">url, files, modelSourceInfoId</span>){
        <span class="hljs-keyword">let</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>()
        xhr.<span class="hljs-property">onload</span> = <span class="hljs-function">() =></span> {
          <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> === <span class="hljs-number">200</span> &#x26;&#x26; xhr.<span class="hljs-property">status</span> &#x3C; <span class="hljs-number">300</span> || xhr.<span class="hljs-property">status</span> === <span class="hljs-number">304</span>) {
            <span class="hljs-keyword">try</span> {
             <span class="hljs-keyword">const</span> res = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>)
             <span class="hljs-keyword">if</span>(res &#x26;&#x26; res.<span class="hljs-property">code</span> === <span class="hljs-number">200</span>){
               <span class="hljs-variable language_">this</span>.$message({
                 <span class="hljs-attr">message</span>: <span class="hljs-string">'上传完成'</span>,
                 <span class="hljs-attr">type</span>: <span class="hljs-string">'success'</span>
               })
              <span class="hljs-comment">// setTimeout(() => {</span>
                 <span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">'close'</span>)
                 <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileInfoList</span> = []
                 <span class="hljs-variable language_">this</span>.<span class="hljs-property">fileList</span> = []
                 <span class="hljs-variable language_">this</span>.<span class="hljs-property">httpQueue</span> = []
              <span class="hljs-comment">// }, 1000)</span>
             }
            } <span class="hljs-keyword">catch</span>(error) {
             <span class="hljs-variable language_">this</span>.$message({
               <span class="hljs-attr">message</span>: <span class="hljs-string">'上传失败，请检查服务'</span>,
               <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>
             })
            }
          }
        }
        xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">"post"</span>, url, <span class="hljs-literal">true</span>)
        xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'application/json'</span>)
        xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">'X-Access-Token'</span>, <span class="hljs-title function_">getToken</span>())
        <span class="hljs-comment">//将前面1.1获取文件信息的id作为头信息传递到后端</span>
        xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">'ThreeDimensionalModel-ServiceID'</span>, modelSourceInfoId)
        xhr.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(files))
      },

      <span class="hljs-comment">//获取文件类型图标class</span>
      <span class="hljs-title function_">getFileIcon</span>(<span class="hljs-params">file</span>) {
        <span class="hljs-keyword">const</span> { type } = file
        <span class="hljs-keyword">let</span> icon = <span class="hljs-string">''</span>
        <span class="hljs-keyword">return</span> icon
      },

      <span class="hljs-comment">//创建上传文件的http</span>
      <span class="hljs-title function_">createUploadHttp</span>(<span class="hljs-params">config</span>){
        <span class="hljs-keyword">const</span> {file, filePutUrl, customHeader, onUploadProgress, onUploaded, onError} = config
        <span class="hljs-keyword">let</span> fileName = file.<span class="hljs-property">name</span>
        <span class="hljs-keyword">let</span> http = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
        http.<span class="hljs-property">upload</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"progress"</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =></span> {
          <span class="hljs-title function_">onUploadProgress</span>({
            <span class="hljs-attr">progressEvent</span>: e,
            <span class="hljs-attr">uploadingFile</span>: file
          })
        }, <span class="hljs-literal">false</span>)

        http.<span class="hljs-property">onload</span> = <span class="hljs-function">() =></span> {
          <span class="hljs-keyword">if</span> (http.<span class="hljs-property">status</span> === <span class="hljs-number">200</span> &#x26;&#x26; http.<span class="hljs-property">status</span> &#x3C; <span class="hljs-number">300</span> || http.<span class="hljs-property">status</span> === <span class="hljs-number">304</span>) {
            <span class="hljs-keyword">try</span> {
              <span class="hljs-keyword">const</span> result = http.<span class="hljs-property">responseURL</span>
              <span class="hljs-title function_">onUploaded</span>({ result, <span class="hljs-attr">uploadedFile</span>: file})
            } <span class="hljs-keyword">catch</span>(error) {
              <span class="hljs-title function_">onError</span>({ error, <span class="hljs-attr">errorFile</span>: file})
            }
          }
        }
        http.<span class="hljs-title function_">open</span>(<span class="hljs-string">"PUT"</span>, filePutUrl, <span class="hljs-literal">true</span>);
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(customHeader).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">key, index</span>) =></span>{
          http.<span class="hljs-title function_">setRequestHeader</span>(key, customHeader[key])
        })
        http.<span class="hljs-title function_">send</span>(file);
        <span class="hljs-keyword">return</span> http
      }

    }
  }
</span><span class="hljs-tag">&#x3C;/<span class="hljs-name">script</span>></span></span>

<span class="xml"><span class="hljs-tag">&#x3C;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>></span><span class="css">

  <span class="hljs-selector-class">.header-title</span> {
  //  <span class="hljs-attribute">height</span>: <span class="hljs-number">24px</span>;
    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#EFEFEF</span>;
    <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">20px</span>;
    //<span class="hljs-attribute">outline</span>: <span class="hljs-number">1px</span> solid red;
    <span class="hljs-selector-class">.icon</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">26px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">26px</span>;
      <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">../images/icon_upload.png</span>);
      <span class="hljs-attribute">float</span>: left;
      <span class="hljs-attribute">background-size</span>: <span class="hljs-number">100%</span> <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">18px</span>;
      <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10px</span>;
    }
    <span class="hljs-selector-tag">span</span> {
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">23px</span>;
      <span class="hljs-attribute">font-family</span>: Source Han Sans CN;
      <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">500</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-number">#333333</span>;
    }
    <span class="hljs-selector-tag">i</span> {
      <span class="hljs-attribute">float</span>: right;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">176</span>, <span class="hljs-number">176</span>, <span class="hljs-number">176</span>, <span class="hljs-number">1</span>);
      <span class="hljs-attribute">cursor</span>: pointer;
      &#x26;<span class="hljs-selector-pseudo">:hover</span> {
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#0069D5</span> ;
      }
    }
  }
  <span class="hljs-selector-class">.tip</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">display</span>: block;
  }
  <span class="hljs-selector-class">.file-list</span> {
    <span class="hljs-attribute">box-sizing</span>: border-box;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;
   // <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;
   // <span class="hljs-attribute">width</span>: <span class="hljs-number">840px</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> auto;
    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">80px</span>;
    <span class="hljs-selector-class">.file-item</span> {
      <span class="hljs-attribute">min-height</span>: <span class="hljs-number">32px</span>;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">justify-content</span>: flex-start;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-selector-tag">div</span> {
        <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">15px</span>;
        <span class="hljs-attribute">text-align</span>: left;
      }
      <span class="hljs-selector-class">.name</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
      }
      <span class="hljs-selector-class">.size</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">60px</span>;
      }
      <span class="hljs-selector-class">.progress</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">180px</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">8px</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#E2E2E2</span>;
        <span class="hljs-selector-class">.bar</span> {
          <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;
          <span class="hljs-attribute">height</span>: <span class="hljs-number">8px</span>;
          <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
          <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#13A763</span>;
        }
      }
      <span class="hljs-selector-class">.rate</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">60px</span>;
       // <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;

      }
      <span class="hljs-selector-class">.delete-btn</span> {
        <span class="hljs-attribute">cursor</span>: pointer;
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
      }
    }
  }

  <span class="hljs-selector-class">.custom-footer</span> {
   // <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid red;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: space-evenly;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
    //<span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0px</span> <span class="hljs-number">1px</span> <span class="hljs-number">0px</span> <span class="hljs-number">0px</span> red;
    <span class="hljs-attribute">border-top</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#efefef</span>;
    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">10</span>;
    <span class="hljs-selector-tag">button</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">90px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
      <span class="hljs-attribute">font-family</span>: Source Han Sans CN;
      &#x26;<span class="hljs-selector-pseudo">:focus</span> {
        <span class="hljs-attribute">border</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">outline</span>: <span class="hljs-number">0</span>;
      }

      &#x26;<span class="hljs-selector-class">.info</span> {
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#8f8f8f</span>;
        <span class="hljs-attribute">background</span>: <span class="hljs-number">#e2e2e2</span>;
        &#x26;<span class="hljs-selector-pseudo">:hover</span>{
          <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#A6A9AD</span>;
          <span class="hljs-attribute">cursor</span>: pointer;
          <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
        }
      }
      &#x26;<span class="hljs-selector-class">.success</span> {
        <span class="hljs-attribute">background</span>: <span class="hljs-number">#12a763</span>;
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
        &#x26;<span class="hljs-selector-pseudo">:hover</span>{
          <span class="hljs-attribute">cursor</span>: pointer;
          <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#73C132</span>;
        }
      }
    }
  }
</span><span class="hljs-tag">&#x3C;/<span class="hljs-name">style</span>></span></span>


<span class="copy-code-btn">复制代码</span></code></pre>
<h1 data-id="heading-11">源码分享</h1>
<p>其实一开始我是想提供一个demo的，发现这个东西与产品功能强绑定，没有测试的服务地址和存储桶，也无法做出一个开放的案例</p>
<p>所以上面的代码只是给大家提供一种实现方式和思路，里面具体的细节处理我做的比较复杂</p>
<p>如果有不懂的地方，评论区聊一聊</p></div></div></article> <!----> <div class="article-end" data-v-f8753450 data-v-ad8c40d2><div class="tag-list-box" data-v-f8753450 data-v-ad8c40d2><!----><!----><!----></div> <!----></div> <!----> <!----><!----><!----><!----><!----></div> <div class="main-area recommended-area entry-list-container shadow" data-v-f8753450 data-v-ad8c40d2><div class="recommended-list-title-wrapper" data-v-f8753450 data-v-ad8c40d2><div class="title" data-v-f8753450 data-v-ad8c40d2><span class="title-content" data-v-f8753450 data-v-ad8c40d2>相关推荐</span></div></div> <div name="entry-list" tag="div" data-fetch-key="1" class="entry-list list recommended-entry-list" data-v-090682e2 data-v-4036ed0e data-v-ad8c40d2><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="7118987709477027847" data-original-type="0" data-draft-id="7118984682917593101" class="entry" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/4353721774379054" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        西陵
      </div></a> <div class="date" data-v-8a39d3fc>11月前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        前端
      </a><a href="/tag/JavaScript" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        JavaScript
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/7118987709477027847" target="_blank" rel="" title="试试S3+minio进行大文件上传" class="title" data-v-8a39d3fc>试试S3+minio进行大文件上传</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/7118987709477027847" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>一、什么是Amazon S3 Amazon S3 是一种对象存储服务，提供行业领先的可扩展性、数据可用性、安全性和性能，他会将数据以对向行驶存储在存储桶中，对象指的是一个文件和描述该文件的任何元数据，</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>1857</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            9
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            4
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="7117884707542401055" data-original-type="0" data-draft-id="7117884214132883492" class="entry" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/1693713856212615" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        ironManYYDS
      </div></a> <div class="date" data-v-8a39d3fc>12月前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/Vue.js" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        Vue.js
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/7117884707542401055" target="_blank" rel="" title="Vue中通过minio上传文件" class="title" data-v-8a39d3fc>Vue中通过minio上传文件</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/7117884707542401055" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>在Vue中minio上传文件（stream流和链接） 1、minio的安装 直接使用npm或者cnpm下载即可 2、minio.js文件 封装了连接minio、文件上传，文件删除等方法 注：此文件中的</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>516</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            1
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            2
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="6958671748023730184" data-original-type="0" data-draft-id="6957322660099391495" class="entry" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/915209459077447" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        对半
      </div></a> <div class="date" data-v-8a39d3fc>2年前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/Node.js" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        Node.js
      </a><a href="/tag/JavaScript" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        JavaScript
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/6958671748023730184" target="_blank" rel="" title="nodeJs + vueJs 实现大文件分片上传" class="title" data-v-8a39d3fc>nodeJs + vueJs 实现大文件分片上传</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/6958671748023730184" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>在常规的应用场景中，很少需要在浏览器上传几百兆、几千兆的文件，但假如在特殊场景中需要浏览器上传超大文件，那么我们如何上传？如何优化？ 下面的示例全部由 vueJs 和 nodeJs 来完成 做这个之前</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>2494</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            31
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            7
          </span></li> <!----></ul></div> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="nodeJs + vueJs 实现大文件分片上传" class="lazy thumb" style="aspect-ratio:1.5;" data-v-55b483d2 data-v-8a39d3fc></div> <!----> <!----></div> <!----></li><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="7216681666106409016" data-original-type="0" data-draft-id="7216644653125861437" class="entry" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/1047207118903469" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        躺平的sx
      </div></a> <div class="date" data-v-8a39d3fc>3月前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/Java" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        Java
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/7216681666106409016" target="_blank" rel="" title="Java构建minio文件系统实现分片上传" class="title" data-v-8a39d3fc>Java构建minio文件系统实现分片上传</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/7216681666106409016" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>下载minio 下载minio，下载地址在https://dl.min.io/server/minio/release/ minio特点 比如8块硬盘组成一个集合，当上传一个文件时会通过纠删码算法计算</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>1496</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            17
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            2
          </span></li> <!----></ul></div> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="Java构建minio文件系统实现分片上传" class="lazy thumb" style="aspect-ratio:1.5;" data-v-55b483d2 data-v-8a39d3fc></div> <!----> <!----></div> <!----></li><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="6844903630659665933" data-original-type="0" data-draft-id="6845075556476829710" class="entry" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/1996368844423565" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        逗猫攻城狮
      </div></a> <div class="date" data-v-8a39d3fc>5年前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/Vue.js" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        Vue.js
      </a><a href="/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        前端
      </a><a href="/tag/%E5%90%8E%E7%AB%AF" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        后端
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/6844903630659665933" target="_blank" rel="" title="SpringBoot+Vue.js前后端分离实现大文件分块上传" class="title" data-v-8a39d3fc>SpringBoot+Vue.js前后端分离实现大文件分块上传</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/6844903630659665933" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>此处用到了这位大佬的Vue上传组件，此图也是引用自他的GitHub，感谢这位大佬。 checkChunk()方法会根据文件唯一标识，和当前块数判断是否已经上传过这个块。 这里只贴了ChunkService的代码，其他的代码只是jpa简单的存取。 文章开头就提到了前后端分离，既然…</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>6287</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            58
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            8
          </span></li> <!----></ul></div> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="SpringBoot+Vue.js前后端分离实现大文件分块上传" class="lazy thumb" style="aspect-ratio:1.5;" data-v-55b483d2 data-v-8a39d3fc></div> <!----> <!----></div> <!----></li><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="7052946931194003463" data-original-type="0" data-draft-id="7041487688809054221" class="entry" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/3386151546923358" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        阿镇吃橙子
      </div></a> <div class="date" data-v-8a39d3fc>1年前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/Node.js" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        Node.js
      </a><a href="/tag/HTTP" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        HTTP
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/7052946931194003463" target="_blank" rel="" title="基于nodejs 的几种http文件传输方案实践" class="title" data-v-8a39d3fc>基于nodejs 的几种http文件传输方案实践</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/7052946931194003463" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>基于nodejs的http文件传输方案在现阶段的前后端全栈开发中有都很重要的作用，本文我将通过几种方案实现http传输大文件</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>1.0w</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            15
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            2
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="7142831050052665381" data-original-type="0" data-draft-id="7142820541429514247" class="entry" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/2260251637475847" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        起一个可以中奖的名字
      </div></a> <div class="date" data-v-8a39d3fc>9月前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/JavaScript" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        JavaScript
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/7142831050052665381" target="_blank" rel="" title="计算文件MD5值实现文件秒传" class="title" data-v-8a39d3fc>计算文件MD5值实现文件秒传</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/7142831050052665381" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>日常开发过程中，经常会遇到需要上传文件的问题，有时候文件会特别的大，这时候需要考虑文件秒传，文件分片上传。 以此来实现高效上传，提升用户体验。本文主要介绍文件秒传。</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>1991</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            17
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            10
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="7204735957778563132" data-original-type="0" data-draft-id="7204735957778481212" class="entry" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/3650034334697048" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        Samson_bu
      </div></a> <div class="date" data-v-8a39d3fc>4月前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/%E6%8E%98%E9%87%91%C2%B7%E6%97%A5%E6%96%B0%E8%AE%A1%E5%88%92" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        掘金·日新计划
      </a><a href="/tag/Spring%20Boot" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        Spring Boot
      </a><a href="/tag/%E5%90%8E%E7%AB%AF" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        后端
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/7204735957778563132" target="_blank" rel="" title="Spring Boot「40」实现文件上传的两种方式" class="title" data-v-8a39d3fc>Spring Boot「40」实现文件上传的两种方式</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/7204735957778563132" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>内容主要包括两部分，如何通过纯 Servlet 的形式进行文件上传、保存（不通过 Spring 框架）；另一部分是如何在 Spring Web MVC 中进行文件上传。</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>1460</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            51
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            2
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="7001041806339096590" data-original-type="0" data-draft-id="7001039037134405639" class="entry" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/1838039172396280" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        zeqinjie
      </div></a> <div class="date" data-v-8a39d3fc>1年前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/iOS" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        iOS
      </a><a href="/tag/RxSwift" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        RxSwift
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/7001041806339096590" target="_blank" rel="" title="AWS3 分片上传的解决方案" class="title" data-v-8a39d3fc>AWS3 分片上传的解决方案</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/7001041806339096590" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>记一次 AWS3 分片上传的解决方案步骤及分片上传组件封装，业务代码部分采用 ReactorKit 框架实现</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>2564</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            12
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            2
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="7085997674033315877" data-original-type="0" data-draft-id="7085995633378590750" class="entry" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/141164809564285" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        玛卡bug卡
      </div></a> <div class="date" data-v-8a39d3fc>1年前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/%E5%90%8E%E7%AB%AF" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        后端
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/7085997674033315877" target="_blank" rel="" title="细说分片上传与极速秒传(SpringBoot+Vue实现)" class="title" data-v-8a39d3fc>细说分片上传与极速秒传(SpringBoot+Vue实现)</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/7085997674033315877" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>本文使用 SpringBoot+Vue 详细讲解前后端分片上传与极速秒传的实现，对涉及到的代码片段都给予注释说明，帮助大家梳理编码思路。</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>2806</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            36
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            15
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="6977693685882290189" data-original-type="0" data-draft-id="6977646005491597326" class="entry" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/1802854801342814" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        Hello码人
      </div></a> <div class="date" data-v-8a39d3fc>2年前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        前端
      </a><a href="/tag/Vue.js" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        Vue.js
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/6977693685882290189" target="_blank" rel="" title="在VUE中使用Plupload实现文件分片上传" class="title" data-v-8a39d3fc>在VUE中使用Plupload实现文件分片上传</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/6977693685882290189" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>效果 拥有多种上传方式：HTML5、flash、silverlight以及传统的。Plupload会自动侦测当前的环境，选择最合适的上传方式，并且会优先使用HTML5的方式。所以你完全不用去操心当前的</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>2433</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            28
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            5
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="6993318543315959816" data-original-type="0" data-draft-id="6993318649092112414" class="entry" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/2849562994940046" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        西瓜watermelon
      </div></a> <div class="date" data-v-8a39d3fc>1年前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/JavaScript" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        JavaScript
      </a><a href="/tag/%E5%89%8D%E7%AB%AF" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        前端
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/6993318543315959816" target="_blank" rel="" title="JavaScript高级 - nodejs+koa2实现文件上传大文件切片上传断点续传（服务器端）" class="title" data-v-8a39d3fc>JavaScript高级 - nodejs+koa2实现文件上传大文件切片上传断点续传（服务器端）</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/6993318543315959816" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>这是我参与8月更文挑战的第6天，活动详情查看：8月更文挑战 前言 一、环境准备及第三方库 我们将采用nodejs+koa2来实现文件上传的服务端部分 nodejs版本：v12.16.1 koa版本：v</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>1758</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            19
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            2
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="6844904151084695559" data-original-type="0" data-draft-id="6845076765321199629" class="entry" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/553809592452989" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        Python实用宝典
      </div></a> <div class="date" data-v-8a39d3fc>3年前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/Python" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        Python
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/6844904151084695559" target="_blank" rel="" title="python 文件下载、大文件下载、异步批量下载 教程" class="title" data-v-8a39d3fc>python 文件下载、大文件下载、异步批量下载 教程</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/6844904151084695559" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>流程：使用request.get请求链接，返回的内容放置到变量r中，然后将r写入到你想放的地方。 运行完毕后，它将会被保存到当前文件夹的new文件夹里。 很简单，如果你的内存只有8G，结果要下载文件却有10G那么大，那就肯定无法下载成功了。而且本机软件运行占的内存也比较大，如果…</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>2578</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            2
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            评论
          </span></li> <!----></ul></div> <!----></div> <!----> <!----></div> <!----></li><li data-growing-container="true" data-growing-title="entryList" class="item" data-v-4036ed0e><div data-entry-id="7095703796856127502" data-original-type="0" data-draft-id="7095703319976362020" class="entry entry-last-one" data-v-8a39d3fc data-v-4036ed0e><div class="meta-container" data-v-8a39d3fc><a href="/user/4441682704609320" target="_blank" rel="" class="user-message" data-v-8a39d3fc><div class="popover-box user-popover" data-v-23e711a0 data-v-958452bc data-v-8a39d3fc><!---->  
        江南一点雨
      </div></a> <div class="date" data-v-8a39d3fc>1年前</div> <div class="tag_list" data-v-8a39d3fc><a href="/tag/%E5%90%8E%E7%AB%AF" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        后端
      </a><a href="/tag/Spring%20Boot" target="_blank" rel="" class="tag" data-v-8a39d3fc>
        Spring Boot
      </a></div></div> <div class="content-wrapper" data-v-8a39d3fc><div class="content-main" data-v-8a39d3fc><div class="title-row" data-v-8a39d3fc> <!----> <!----> <a href="/post/7095703796856127502" target="_blank" rel="" title="一个简单易用的文件上传方案" class="title" data-v-8a39d3fc>一个简单易用的文件上传方案</a></div> <div class="abstract" data-v-8a39d3fc><a href="/post/7095703796856127502" target="_blank" rel="" data-v-8a39d3fc><div data-v-8a39d3fc>现在 OSS 服务算是一个基础服务了，很多云服务厂商都有提供这样的服务，价格也不贵，松哥自己的 www.javaboy.org 用的就是类似的服务。 不过对于中小公司来说，除了购买 OSS 服务之外，</div></a></div> <ul class="action-list jh-timeline-action-area" data-v-8a39d3fc><li class="item view" data-v-8a39d3fc><svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="view-icon" data-v-8a39d3fc data-v-8a39d3fc><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-8a39d3fc data-v-8a39d3fc></circle></svg> <span data-v-8a39d3fc>3799</span></li> <li class="item like" data-v-8a39d3fc><div class="liked-wrap" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="liked-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M7.56162 1.16952C7.66569 1.09661 7.78195 1.06124 7.88247 1.0912C7.97653 1.11923 8.23851 1.25916 8.50988 1.96799C8.64419 2.31881 8.9356 3.2424 8.42155 5.05431C8.29751 5.49152 8.61394 5.95303 9.09259 5.95971L12.492 6.00716L12.492 6.00721H12.4991C12.6049 6.00721 12.7228 6.01986 12.8134 6.05898C12.8544 6.07671 12.8815 6.09639 12.8999 6.116C12.9166 6.13375 12.9368 6.16247 12.9515 6.21636C12.9848 6.33784 13.0228 6.74712 12.9473 7.42262C12.874 8.07857 12.698 8.94479 12.341 9.9598C12.0424 10.8088 11.6601 11.5292 11.0684 12.4879C11.0558 12.5052 11.0462 12.5197 11.0418 12.5265L11.0404 12.5285C11.0292 12.5454 11.0242 12.5531 11.018 12.5618C11.0076 12.5764 11.0018 12.582 10.9983 12.585C10.996 12.587 10.9908 12.5912 10.9777 12.5959C10.9638 12.6009 10.9311 12.61 10.8706 12.61H4.56278L4.56373 5.58489C4.87126 5.41901 5.19881 5.20128 5.54112 4.84059C5.93883 4.42152 6.33789 3.8294 6.76254 2.94183C6.84974 2.75957 6.91745 2.55962 6.97574 2.37762C6.99264 2.32486 7.0087 2.27379 7.02438 2.22393L7.02439 2.22389C7.066 2.09158 7.10495 1.96776 7.14985 1.84312C7.2758 1.49352 7.40247 1.28101 7.56162 1.16952ZM9.45205 1.60729C9.13229 0.772086 8.70208 0.282772 8.17063 0.124374C7.64564 -0.0320981 7.20308 0.188912 6.98278 0.343248C6.55169 0.64525 6.33837 1.11908 6.20071 1.5012C6.14817 1.64705 6.10002 1.80016 6.05661 1.93824C6.0422 1.98405 6.02832 2.02821 6.01496 2.0699C5.95791 2.24804 5.90763 2.39115 5.85248 2.50643C5.45683 3.3334 5.1121 3.8271 4.80935 4.14611C4.51322 4.45815 4.23983 4.6219 3.9473 4.76821C3.71095 4.88641 3.55494 5.12906 3.55491 5.40159L3.55388 12.9125C3.55383 13.3026 3.87002 13.6188 4.26008 13.6188H10.8706C11.2097 13.6188 11.4663 13.5113 11.6519 13.3535C11.7387 13.2797 11.7988 13.2043 11.8387 13.1484C11.8556 13.1248 11.8704 13.1025 11.8786 13.09L11.8813 13.0859L11.8826 13.0839L11.8955 13.0685L11.9142 13.0382C12.5304 12.0414 12.9578 11.247 13.2927 10.2945C13.6745 9.20895 13.8679 8.26811 13.9499 7.5347C14.0297 6.82084 14.009 6.25845 13.9246 5.95014C13.805 5.51285 13.5104 5.26112 13.2134 5.13284C12.9385 5.01407 12.661 4.99859 12.5028 4.99836L9.49071 4.95631C9.92962 3.15791 9.64796 2.11902 9.45205 1.60729ZM0.000800636 5.46783C-0.0181914 5.0652 0.303128 4.72836 0.706212 4.72836H1.75264C2.14266 4.72836 2.45883 5.04454 2.45883 5.43456V12.9442C2.45883 13.3342 2.14266 13.6504 1.75264 13.6504H1.06044C0.68335 13.6504 0.372791 13.3541 0.355024 12.9775L0.000800636 5.46783Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg></div> <span data-v-8a39d3fc>
            13
          </span></li> <li class="item comment" data-v-8a39d3fc><svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="comment-icon" data-v-8a39d3fc data-v-8a39d3fc><path fill-rule="evenodd" clip-rule="evenodd" d="M1.30136 9.11421L1.30019 2.45191C1.30024 1.6778 1.92779 1.05019 2.70191 1.05019H11.3989C12.1731 1.05019 12.8006 1.67785 12.8006 2.452L12.8018 9.1144C12.8017 9.8885 12.1742 10.516 11.4001 10.516H9.13225C8.97329 10.516 8.81862 10.5675 8.69142 10.6629L5.65162 12.9406C5.62173 12.9598 5.58148 12.9444 5.57209 12.91L5.15416 11.0869C5.07758 10.7528 4.78033 10.516 4.43761 10.516H2.70308C1.92893 10.516 1.30136 9.88836 1.30136 9.11421ZM2.70191 0C1.34776 0 0.25 1.09776 0.25 2.45191L0.25117 9.1144C0.25122 10.4685 1.34896 11.5662 2.70308 11.5662H4.18661L4.54953 13.1495L4.55107 13.1558C4.73515 13.9153 5.62879 14.248 6.26458 13.7937L9.23719 11.5662H11.4001C12.7542 11.5662 13.852 10.4684 13.852 9.11421L13.8508 2.45182C13.8508 1.09771 12.753 0 11.3989 0H2.70191ZM3.78612 6.91404C4.35027 6.91404 4.8076 6.45671 4.8076 5.89257C4.8076 5.32842 4.35027 4.87109 3.78612 4.87109C3.22198 4.87109 2.76465 5.32842 2.76465 5.89257C2.76465 6.45671 3.22198 6.91404 3.78612 6.91404ZM7.98631 5.89257C7.98631 6.45671 7.52898 6.91404 6.96483 6.91404C6.40069 6.91404 5.94336 6.45671 5.94336 5.89257C5.94336 5.32842 6.40069 4.87109 6.96483 4.87109C7.52898 4.87109 7.98631 5.32842 7.98631 5.89257ZM10.1484 6.91404C10.7126 6.91404 11.1699 6.45671 11.1699 5.89257C11.1699 5.32842 10.7126 4.87109 10.1484 4.87109C9.58428 4.87109 9.12695 5.32842 9.12695 5.89257C9.12695 6.45671 9.58428 6.91404 10.1484 6.91404Z" fill="currentColor" data-v-8a39d3fc data-v-8a39d3fc></path></svg> <span data-v-8a39d3fc>
            1
          </span></li> <!----></ul></div> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="一个简单易用的文件上传方案" class="lazy thumb" style="aspect-ratio:1.5;" data-v-55b483d2 data-v-8a39d3fc></div> <!----> <!----></div> <!----></li></div></div> <div class="recommended-links main-area" data-v-65e9deb8 data-v-ad8c40d2><p data-v-65e9deb8>友情链接：</p> <ul data-v-65e9deb8><li data-v-65e9deb8><a href="https://www.douyin.com/downloadpage/chat" title="抖音聊天" target="_blank" rel="noopener noreferrer" data-v-65e9deb8>
        抖音聊天
      </a></li><li data-v-65e9deb8><a href="https://frontend.devrank.cn/traffic-aggregation/82404" title="js 小数转成百分比" target="_blank" rel="noopener noreferrer" data-v-65e9deb8>
        js 小数转成百分比
      </a></li><li data-v-65e9deb8><a href="https://frontend.devrank.cn/traffic-aggregation/82422" title="js点击显示隐藏tableview" target="_blank" rel="noopener noreferrer" data-v-65e9deb8>
        js点击显示隐藏tableview
      </a></li><li data-v-65e9deb8><a href="https://frontend.devrank.cn/traffic-aggregation/82428" title="怎样进行小程序开发" target="_blank" rel="noopener noreferrer" data-v-65e9deb8>
        怎样进行小程序开发
      </a></li><li data-v-65e9deb8><a href="https://frontend.devrank.cn/traffic-aggregation/82431" title="js有没有全局变量" target="_blank" rel="noopener noreferrer" data-v-65e9deb8>
        js有没有全局变量
      </a></li></ul></div> <div st:block="sidebar" class="sidebar article-sidebar" data-v-74d21d65 data-v-ad8c40d2><div class="sidebar-block author-block author-block-container pure" data-v-7e7e812a data-v-5518eb2c data-v-74d21d65><a href="/user/1398234520238839/posts" target="_blank" rel="" class="user-item item" data-v-5518eb2c><img loading="eager" src="https://p3-passport.byteimg.com/img/user-avatar/70d42e21da9f4464ca0df299adcaab90~100x100.awebp" alt="" class="lazy avatar avatar" data-v-55b483d2 data-v-071f0fdd data-v-5518eb2c> <div class="info-box" style="visibility:hidden;" data-v-5518eb2c><span to="[object Object]" blank="true" class="username" data-v-2265c9df data-v-5518eb2c><span class="name" style="max-width:128px;" data-v-2265c9df>
    清风夜半
  </span> <span blank="true" class="rank" data-v-19095f0c data-v-2265c9df><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="创作等级LV.4" title="创作等级LV.4" class="lazy" style="aspect-ratio:NaN;" data-v-55b483d2 data-v-19095f0c></span> <!----> <div class="vip-level" data-v-cd7d0a50 data-v-2265c9df><span class="tooltip" data-v-cd7d0a50><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 融会贯通
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.4 融会贯通" title="VIP.4 融会贯通" class="lazy" style="aspect-ratio:NaN;" data-v-55b483d2 data-v-cd7d0a50></span></span></div> </span> <div title="前端研发工程师" class="position" data-v-5518eb2c>
        前端研发工程师
      </div></div></a> <div class="operate-btn" data-v-7e7e812a data-v-5518eb2c><button st:name="followBtn" class="ui-btn follow-btn primary large default attention" data-v-e1243e7c data-v-5518eb2c><!----> 关注</button> <a href="/notification/im?participantId=1398234520238839" class="im-button im-btn" data-v-71bb0cdc data-v-5518eb2c><!----> <div data-v-71bb0cdc>私信</div></a></div>  <div class="stat-item item" data-v-7e7e812a data-v-5518eb2c><svg xmlns="http://www.w3.org/2000/svg" width="25" height="26" viewBox="0 0 25 26" class="zan" data-v-7e7e812a data-v-5518eb2c><g fill="none" fill-rule="evenodd" transform="translate(0 .57)" data-v-7e7e812a data-v-5518eb2c><ellipse cx="12.5" cy="12.57" fill="#E1EFFF" rx="12.5" ry="12.57" data-v-7e7e812a data-v-5518eb2c></ellipse><path fill="#7BB9FF" d="M8.596 11.238V19H7.033C6.463 19 6 18.465 6 17.807v-5.282c0-.685.483-1.287 1.033-1.287h1.563zm4.275-4.156A1.284 1.284 0 0 1 14.156 6c.885.016 1.412.722 1.595 1.07.334.638.343 1.687.114 2.361-.207.61-.687 1.412-.687 1.412h3.596c.38 0 .733.178.969.488.239.317.318.728.21 1.102l-1.628 5.645a1.245 1.245 0 0 1-1.192.922h-7.068v-7.889c1.624-.336 2.623-2.866 2.806-4.029z" data-v-7e7e812a data-v-5518eb2c></path></g></svg> <span class="content" data-v-7e7e812a data-v-5518eb2c>
      获得点赞
      <span class="count" style="display:none;" data-v-7e7e812a data-v-5518eb2c>
         1,163
      </span></span></div> <div class="stat-item item read" data-v-7e7e812a data-v-5518eb2c><svg width="25" height="25" viewBox="0 0 25 25" class="icon stat-view-icon" data-v-7e7e812a data-v-5518eb2c><g fill="none" fill-rule="evenodd" data-v-7e7e812a data-v-5518eb2c><circle cx="12.5" cy="12.5" r="12.5" fill="#E1EFFF" data-v-7e7e812a data-v-5518eb2c></circle><path fill="#7BB9FF" d="M4 12.5S6.917 7 12.75 7s8.75 5.5 8.75 5.5-2.917 5.5-8.75 5.5S4 12.5 4 12.5zm8.75 2.292c1.208 0 2.188-1.026 2.188-2.292 0-1.266-.98-2.292-2.188-2.292-1.208 0-2.188 1.026-2.188 2.292 0 1.266.98 2.292 2.188 2.292z" data-v-7e7e812a data-v-5518eb2c></path></g></svg> <span class="content" data-v-7e7e812a data-v-5518eb2c>
      文章被阅读
      <span class="count" style="display:none;" data-v-7e7e812a data-v-5518eb2c>
         93,863
      </span></span></div> <div class="cut-off" data-v-7e7e812a data-v-5518eb2c></div></div> <!----> <!----> <!----> <!----> <div class="sticky-block-box" style="display:none;" data-v-74d21d65><div class="sidebar-block catalog-block pure" style="display:none;" data-v-7e7e812a data-v-79f817f2 data-v-74d21d65><nav class="article-catalog" style="display:none;" data-v-168273de data-v-79f817f2><div class="catalog-title" data-v-168273de>目录</div> <div class="catalog-body" data-v-168273de><ul class="catalog-list" style="margin-top:0px;" data-v-168273de></ul></div></nav></div> <!----></div></div> <!----></div> <!----></main> <!----></div> <!----> <div class="global-component-box"><!----></div> <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----> <!----><!----><!----><!----><!----><!----><!----><!----><!----></div></div></div><script>window.__NUXT__=(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I){u.loading=a;u.skeleton=c;u.cursor=f;u.data=[];u.total=d;u.hasMore=c;G.id=w;G.self_description=j;G.followed=a;G.viewerIsFollowing=j;G.community=j;G.subscribedTagCount=d;G.wroteBookCount=d;G.boughtBookCount=d;G.isBindedPhone=a;G.level=t;G.user_id=w;G.user_name=E;G.company=e;G.job_title="前端研发工程师";G.avatar_large="https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F70d42e21da9f4464ca0df299adcaab90~300x300.image";G.description="拯救老实人";G.followee_count=44;G.follower_count=279;G.post_article_count=24;G.digg_article_count=25;G.got_digg_count=1163;G.got_view_count=93863;G.post_shortmsg_count=34;G.digg_shortmsg_count=14;G.isfollowed=a;G.favorable_author=d;G.power=F;G.study_point=d;G.university={university_id:f,name:e,logo:e};G.major={major_id:f,parent_id:f,name:e};G.student_status=d;G.select_event_count=d;G.select_online_course_count=d;G.identity=d;G.is_select_annual=a;G.select_annual_rank=d;G.annual_list_type=d;G.extraMap={};G.is_logout=d;G.annual_info=[];G.account_amount=d;G.user_growth_info={user_id:1398234520238839,jpower:F,jscore:607.7,jpower_level:t,jscore_level:5,jscore_title:"先锋掘友",author_achievement_list:[],vip_level:t,vip_title:"融会贯通",jscore_next_level_score:2000,jscore_this_level_mini_score:500};G.is_vip=c;G.become_author_days=d;G.collection_set_article_count=d;G.recommend_article_count_daily=d;G.article_collect_count_daily=d;G.juejinPower=F;G.jobTitle="前端研发工程师";G.roles={isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a};G.username=E;G.blogAddress=j;G.selfDescription="拯救老实人";G.beLikedCount=1163;G.beReadCount=93863;G.followerCount=279;G.followingCount=44;G.collectionCount=d;G.createdCollectionCount=d;G.followingCollectionCount=d;G.postedPostsCount=24;G.pinCount=34;G.likedArticleCount=25;G.likedPinCount=14;G.avatar="https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F70d42e21da9f4464ca0df299adcaab90~300x300.image";G.latestLoginedInAt=b;G.createdAt=b;G.updatedAt=b;G.phoneNumber=e;G.titleDescription=e;G.followeesCount=44;G.applyEventCount=d;G.need_lead=d;G.followTopicCnt=d;return {layout:"default",data:[{renderPost:c}],fetch:[{queryString:e,isShowUserDropdownList:a,isShowAddMoreList:a,isFocus:a,isPhoneMenuShow:a,visibleBadge:a,placeholder:e,hiddenProperty:"hidden",searchHistoryVisible:a,searchHistoryItems:[],tabBadge:b,isChangePlaceholder:c,showMallBridge:a,removeSearchInputKeyupListener:b,logoImg:"\u002F\u002Flf3-cdn-tos.bytescm.com\u002Fobj\u002Fstatic\u002Fxitu_juejin_web\u002Fe08da34488b114bd4c665ba2fa520a31.svg"},{dislikeWhiteListUserIds:j}],error:b,state:{view:{activityIndex:{activityList:[],pageInfo:{hasNextPage:a,endCursor:e},afterPosition:e,activityListIsLoading:c,activityListIsError:a,userActivityList:[],placeholder:e,actionType:{FETCH:"@\u002Fview\u002Factivity-index\u002FFETCH",FETCH_RECOMMEND_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_RECOMMEND_LIST",RESET_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FRESET_ACTIVITY_LIST",FETCH_USER_ACTIVITY_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_USER_ACTIVITY_LIST",FETCH_NEW_COUNT:"@\u002Fview\u002Factivity-index\u002FFETCH_NEW_COUNT",DELETE_ACTIVITY:"@\u002Fview\u002Factivity-index\u002FDELETE_ACTIVITY",TOGGLE_FOLLOW_USER:"@\u002Fview\u002Factivity-index\u002FTOGGLE_FOLLOW_USER",FETCH_ENTRY_COMMENT_LIST:"@\u002Fview\u002Factivity-index\u002FFETCH_ENTRY_COMMENT_LIST",UPDATE_LIST_LOADING:"@\u002Fview\u002Factivity-index\u002FUPDATE_LIST_LOADING",RESET:"@\u002Fview\u002Factivity-index\u002FRESET"},hotList:{list:[],after:e,loading:a,hasNextPage:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fhot-list\u002FRESET"}},sidebar:{bannerList:[],actionType:{RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FUPDATE_STATE",FETCH_BANNER:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002FFETCH_BANNER"},recommend:{pageSize:h,page:d,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-topic-list\u002FRESET"},after:d},followed:{pageSize:h,page:d,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Ffollowed-topic-list\u002FRESET"},after:d},recommendPin:{list:[],after:e,loading:a,hasNextPage:c,actionType:{UPDATE_STATE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FFETCH",RESET:"@\u002Fview\u002Factivity-index\u002Fsidebar\u002Frecommend-pin-list\u002FRESET"}}},topicPinList:{pageSize:h,page:g,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FUPDATE",FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FFETCH_MORE",RESET:"@\u002Fview\u002Factivity-index\u002Ftopic-pin-list\u002FRESET"},topicId:e,navList:[{type:l,name:l,title:"推荐 ",id:l},{type:m,name:m,title:"热门 ",id:m},{type:q,name:q,title:"关注 ",id:q},{type:i,name:"opensource",title:"开源推荐 ",id:"5c09ea2b092dcb42c740fe73"},{type:i,name:"recruitment",title:"内推招聘",id:"5abb61e1092dcb4620ca3322"},{type:i,name:"dating",title:"掘金相亲",id:"5abcaa67092dcb4620ca335c"},{type:i,name:"slacking",title:"上班摸鱼",id:"5c106be9092dcb2cc5de7257"},{type:i,name:"app",title:"应用安利",id:"5b514af1092dcb61bd72800d"},{type:i,name:"tool",title:"开发工具",id:"5abb67d2092dcb4620ca3324"},{type:i,name:"news",title:"New资讯",id:"5c46a17f092dcb4737217152"}],sortType:n}},search:{search_result_from:d,query:e,list:[],linkList:[],loading:a,skeleton:c,actionType:{FETCH:"@\u002Fview\u002Fsearch\u002FFETCH",FETCH_MORE:"@\u002Fview\u002Fsearch\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fsearch\u002FRESET"}},columnIndex:{list:{pageSize:h,page:g,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002Flist\u002FRESET"},sort:o,category:"all"},hotList:{pageSize:h,page:g,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FUPDATE",FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FFETCH_MORE",RESET:"@\u002Fview\u002FcolumnIndex\u002FhotList\u002FRESET"}}},timelineIndex:{tdkTemplates:[],categoryNavList:[],tagNavList:[],splitTagList:[],timelineAdList:[],list:[],sort:n,category:l,categoryId:e,tagId:e,tag:"全部",actionType:{FETCH_TIMELINE_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TIMELINE_LIST",FETCH_CATEGORY_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_CATEGORY_LIST",FETCH_TAG_LIST:"@\u002Fview\u002FtimelineIndex\u002FFETCH_TAG_LIST",DELETE_ENTRY:"@\u002Fview\u002FtimelineIndex\u002FDELETE_ENTRY",DELETE_USER_ENTRIES:"@\u002Fview\u002FtimelineIndex\u002FDELETE_USER_ENTRIES",DELETE_TAG_ENTRIES:"@\u002Fview\u002FtimelineIndex\u002FDELETE_TAG_ENTRIES",FETCH_MORE:"@\u002Fview\u002FtimelineIndex\u002FFETCH_MORE",FETCH:"@\u002Fview\u002FtimelineIndex\u002FFETCH",RESET:"@\u002Fview\u002FtimelineIndex\u002FRESET"},serverRenderTimelineList:a,timelineList:{list:[],cursor:f,skeleton:c,loading:a,hasMore:c,categoryId:e,tagId:e,sort:e,actionType:{UPDATE_STATE:"timeline-list\u002FUPDATE_STATE",FETCH_MORE:"timeline-list\u002FFETCH_MORE",FETCH:"timeline-list\u002FFETCH",RESET:"timeline-list\u002FRESET"}},recommendList:{list:[],cursor:f,loading:a,skeleton:c,hasMore:c,actionType:{UPDATE_STATE:"recommend-list\u002FUPDATE_STATE",FETCH_MORE:"recommend-list\u002FFETCH_MORE",FETCH:"recommend-list\u002FFETCH",RESET:"recommend-list\u002FRESET"}},followingList:{list:[],cursor:f,skeleton:c,loading:a,hasMore:c,actionType:{UPDATE_STATE:"following-list\u002FUPDATE_STATE",FETCH_MORE:"following-list\u002FFETCH_MORE",FETCH:"following-list\u002FFETCH",RESET:"following-list\u002FRESET"}}},subscribe:{subscribed:{list:[],cursor:f,skeleton:c,loading:a,hasMore:a,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fsubscribed\u002Flist\u002FRESET"}},all:{list:[],cursor:f,loading:a,skeleton:c,hasMore:a,linkList:e,actionType:{UPDATE_STATE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH_MORE",FETCH:"view\u002Fsubscribe\u002Fall\u002Flist\u002FFETCH",RESET:"view\u002Fsubscribe\u002Fall\u002Flist\u002FRESET"}}},entryPublic:{entry:{user:{}},relatedEntryList:[],relatedCollectionList:[],actionType:{FETCH:"@\u002Fview\u002FentryPublic\u002FFETCH",RESET:"@\u002Fview\u002FentryPublic\u002FRESET"}},user:{user:{},serverRendered:a,userAnnuals:[],actionType:{FETCH:"@\u002Fview\u002Fuser\u002FFETCH",RESET:"@\u002Fview\u002Fuser\u002FRESET",UPDATE:"@\u002Fview\u002Fuser\u002FUPDATE",FETCH_ANNUALS:"@\u002Fview\u002Fuser\u002FFETCH_ANNUALS"},detailList:{actionType:{RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FRESET"},likeList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:c,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FlikePostList\u002FRESET"}},postList:{list:[],hasMore:a,skeleton:a,loading:a,sort:o,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpostList\u002FRESET"}},searchList:{list:[],hasMore:a,skeleton:a,loading:a,key_word:e,search_type:d,cursor:f,isPostSearch:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FsearchList\u002FRESET"}},tagList:{list:[],loading:a,skeleton:c,hasMore:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FtagList\u002FRESET"}},collectionList:{list:[],userId:e,skeleton:c,hasMore:a,cursor:f,type:"created",loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FRESET",TOGGLE_FOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FTOGGLE_FOLLOW_COLLECTION",FOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FFOLLOW_COLLECTION",UNFOLLOW_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FUNFOLLOW_COLLECTION",DELELTE_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FDELELTE_COLLECTION",ADD_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FADD_COLLECTION",EDIT_COLLECTION:"@\u002Fview\u002Fuser\u002FdetailList\u002FcollectionList\u002FEDIT_COLLECTION"}},followerList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowerList\u002FRESET"}},followingList:{list:[],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingList\u002FRESET"}},followingTeamsList:{list:[],cursor:f,hasMore:a,skeleton:a,loading:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FfollowingTeamsList\u002FRESET"}},activityList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FactivityList\u002FRESET"}},bookList:{list:[],cursor:f,skeleton:c,hasMore:a,loading:a,type:"wrote",actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FbookList\u002FRESET"}},pinList:{list:[],hasMore:a,loading:a,skeleton:c,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinList\u002FRESET"}},courseList:{list:[],hasMore:a,loading:a,skeleton:c,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcourseList\u002FRESET"}},pinPraisedList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:c,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FpinPraisedList\u002FRESET"}},eventList:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FeventList\u002FRESET"}},selfColumnList:{list:[],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnList\u002FRESET"}},columnFollowedList:{list:[],hasMore:a,skeleton:a,loading:a,cursor:f,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FRESET",FILTER:"@\u002Fview\u002Fuser\u002FdetailList\u002FcolumnFollowedList\u002FFILTER"}},realtimes:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FRESET",DELETE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimes\u002FDELETE"}},realtimeliked:{list:[],cursor:f,hasMore:a,loading:a,skeleton:a,actionType:{FETCH:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FRESET",DELETE:"@\u002Fview\u002Fuser\u002FdetailList\u002Frealtimeliked\u002FDELETE"}}}},tag:{tag:{},actionType:{FETCH:"@\u002Fview\u002Ftag\u002FFETCH",FETCH_LIST:"@\u002Fview\u002Ftag\u002FFETCH_LIST",RESET:"@\u002Fview\u002Ftag\u002FRESET"},list:{list:[],cursor:f,loading:a,skeleton:a,hasMore:a,actionType:{UPDATE_STATE:"@\u002Fview\u002Ftag\u002Flist\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Ftag\u002Flist\u002FFETCH",RESET:"@\u002Fview\u002Ftag\u002Flist\u002FRESET"}}},notification:{user:{actionType:{RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002FRESET"},listState:{list:[],cursor:f,hasMore:a,isLoading:a,messageType:3,msgTotal:d,msgSubMap:{"1":d,"2":d,"3":d,"4":d,"7":d}},list:{pageSize:h,page:g,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fuser\u002Flist\u002FRESET"}}},system:{actionType:{RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002FRESET"},list:{pageSize:h,page:g,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fnotification\u002Fsystem\u002Flist\u002FRESET"}}}},column:{serverRenderList:a,column:{id:k},entry:{id:k,screenshot:j,liked:a,article_id:k,article_info:{article_id:k,user_id:w,category_id:"6809637767543259144",tag_ids:[6809640369764958000,6809640398105870000,6809640407484334000],visible_level:d,link_url:e,cover_image:"https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F45c61471d63d4e35a0e901679cbae3ee~tplv-k3u1fbpfcp-watermark.image?",is_gfw:d,title:x,brief_content:y,is_english:d,is_original:g,user_index:9.643298337065323,original_type:d,original_author:e,content:e,ctime:"1647420504",mtime:z,rtime:z,draft_id:A,view_count:B,collect_count:C,digg_count:r,comment_count:D,hot_index:443,is_hot:d,rank_index:.00334491,status:s,verify_status:g,audit_status:s,mark_content:"---\nhighlight: an-old-hope\n---\n# 背景\n\n最近突然接到了一个产品的需求，有点特别，在这里给大家分享一下，需求如下\n\n1. 提交表单，同时要上传模型资源\n1. 模型文件是大文件，要显示上传进度，同时可以删除\n1. 模型文件要上传到服务器，表单数据同步到数据库\n1. 同时要同步上传后的模型地址到数据库\n1. 后端使用Minio做文件管理\n\n设计图如下\n\n![pic1.png](https:\u002F\u002Fp1-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fa92063a729f247df869a3ff23e547bb0~tplv-k3u1fbpfcp-watermark.image?)\n\n一开始以为是一个简单的表单上传，发现并不是，这是大文件上传啊，但很快又发现，不单单是上传大文件，还有将文件信息关联到表单。\n\n基于这个奇葩的情况，我和后端兄弟商量了一下，决定使用如下方案\n\n# 实现方案\n分2步走\n\n1. 点击上传时，先提交表单信息到数据库，接着后端返回一个表单的id给我\n1. 当所有文件上传完成后，再调用另外一个服务，将上传完成后的地址和表单id发送给后端\n\n如此，便完成了上面的需求\n\n###  了解一下Mino\n\n这里大家先了解一下Minio的js [SDK文档](http:\u002F\u002Fdocs.minio.org.cn\u002Fdocs\u002Fmaster\u002Fjavascript-client-api-reference)\n\n里面有2个很重要的接口，今天要用到\n\n **一个是给文件生成用于put方法上传的地址**\n ---\n![image.png](https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F2702520f452349c596daf281e5da60ee~tplv-k3u1fbpfcp-watermark.image?)\n\n **一个是获取已经上传完成后的文件的get下载地址**\n ---\n\n![image.png](https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Ff8e867e38b964ad2b6e0c3011af89b30~tplv-k3u1fbpfcp-watermark.image?)\n\n### 实现步骤\n\n这里是使用原生的 ajax请求进行上传的，至于为什么，后面会有说到\n\n##### 1.创建存储桶\n\n创建一个Minio上传实例\n\n```js\nvar Minio = require('minio')\n\nthis.minioClient = new Minio.Client({\n    endPoint: '192.168.172.162', \u002F\u002F后端提供\n    port: 9000, \u002F\u002F端口号默认9000\n    useSSL: true,\n    accessKey: 'Q3AM3UQ867SPQQA43P2F', \u002F\u002F后端提供\n    secretKey: 'zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG'\n});\n\nthis.userBucket = 'yourBucketName' \u002F\u002F这里后端需要提供给你，一个存储桶名字\n```\n\n##### 2.选择文件\n\n这里使用input标签选择文件,点击选择文件的时候，调用一下input的click方法，就可以打开本地文件夹\n\n```html\n\u003Cel-form-item label=\"资源文件\"\u003E\n  \u003Cel-button\n    style=\"marginRight:10px;\"\n    @click=\"selectFile()\"\n    size=\"mini\"\n  \u003E选择文件\u003C\u002Fel-button\u003E\n  \u003Cinput\n    :accept=\"acceptFileType\"\n    multiple=\"multiple\"\n    type=\"file\"\n    id=\"uploadInput\"\n    ref=\"uploadInput\"\n    v-show=\"false\"\n    @change=\"getAndFormatFile()\"\n  \u003E\n  \u003Ci class=\"tip\"\u003E仅支持.gbl、.gltf、.fbx、.obj、.mtl、.hdr、.png、.jpg格式的文件\u003C\u002Fi\u003E\n  \u003Ci class=\"tip\"\u003E单个文件的大小限制为128MB\u003C\u002Fi\u003E\n\u003C\u002Fel-form-item\u003E\n\n```\n\n\n```js\n\nselectFile() {\n    let inputDOM = this.$refs.uploadInput\n    inputDOM.click();\n},\n\n```\n\n接着就是对文件进行格式化\n\n```js\n\u002F\u002F格式化文件并创建上传队列\n  getAndFormatFile(){\n    let files = this.$refs.uploadInput.files\n    const userBucket = this.userBucket\n    if(files.length \u003E 6) {\n      this.$message({\n        message: `最大只能上传6个文件`,\n        type: 'warning'\n      })\n      return\n    }\n    files.forEach((file, index) =\u003E {\n      if ((file.size \u002F 1024 \u002F 1024).toFixed(2) \u003E 128) { \u002F\u002F单个文件限制大小为128MB\n        this.$message({\n          message: `文件大小不能超过128MB`,\n          type: 'warning'\n        })\n        return\n      }\n      \u002F\u002F创建文件的put方法的url\n      this.minioClient.presignedPutObject(userBucket, file.name, 24 * 60 * 60, (err, presignedUrl) =\u003E {\n        if (err) {\n          this.$message({\n            message: `服务器连接超时`,\n            type: 'error'\n          })\n          return err\n        }\n        let fileIcon = this.getFileIcon(file)\n        let fileUploadProgress = '0%' \u002F\u002F文件上传进度\n        this.fileInfoList.push({\n          file, \u002F\u002F文件\n          fileIcon, \u002F\u002F文件对应的图标 className\n          fileUploadProgress, \u002F\u002F文件上传进度\n          filePutUrl: presignedUrl, \u002F\u002F文件上传put方法的url\n          fileGetUrl: '', \u002F\u002F文件下载的url\n        })\n      })\n    })\n    this.fileList = [...this.fileInfoList]\n  },\n```\n\n##### 3.创建上传队列\n\n\n这里定义了一个创建文件上传请求的方法，使用原生的`XMLHttpRequest`，它接受以下参数\n\n- `file`:要上传的文件\n- `filePutUrl`:文件上传的put方法地址\n- `customHeader`: 自定义的头信息\n- `onUploadProgress`:文件上传的进度监听函数\n- `onUploaded`:文件上传完成的监听函数\n- `onError`:文件上传出错的监听函数\n\n```js\n \u002F\u002F创建上传文件的http\n  createUploadHttp(config){\n    const {file, filePutUrl, customHeader, onUploadProgress, onUploaded, onError} = config\n    let fileName = file.name\n    let http = new XMLHttpRequest();\n    http.upload.addEventListener(\"progress\", (e) =\u003E { \u002F\u002F监听http的进度。并执行进度监听函数\n      onUploadProgress({\n        progressEvent: e,\n        uploadingFile: file\n      })\n    }, false)\n\n    http.onload = () =\u003E {\n      if (http.status === 200 && http.status \u003C 300 || http.status === 304) {\n        try {\n        \u002F\u002F监听http的完成事件，并执行上传完成的监听函数\n          const result = http.responseURL\n          onUploaded({ result, uploadedFile: file})\n        } catch(error) {\n        \u002F\u002F监听错误\n          onError({ error, errorFile: file})\n        }\n      }\n    }\n \n    http.open(\"PUT\", filePutUrl, true);\n    \u002F\u002F加入头信息\n    Object.keys(customHeader).forEach((key, index) =\u003E{\n      http.setRequestHeader(key, customHeader[key])\n    })\n    http.send(file);\n    return http \u002F\u002F返回该http实例\n  }\n\n```\n\n##### 4.开始上传\n\n```js\n\u002F\u002F上传文件到存储桶\n  async handleUplaod(){\n    let _this = this\n    if(this.fileInfoList.length \u003C 1) {\n      this.$message({\n        message: `请先选择文件`,\n        type: 'warning'\n      })\n      return\n    }\n    \u002F\u002F先上传文件的基本表单信息，获取表单信息的id\n    try{\n      const {remark, alias} = _this.uploadFormData\n      let res = await uploadModelSourceInfo({remark, serviceName: alias})\n      _this.modelSourceInfoId = res.message\n    }catch(error){\n      if(error) {\n        _this.$message({\n          message: `上传失败，请检查服务`,\n          type: 'error'\n        })\n        return\n      }\n    }\n\n    \u002F\u002F开始将模型资源上传到远程的存储桶\n    this.fileList.forEach((item, index) =\u003E {\n      const {file, filePutUrl} = item\n      let config = {\n        file,\n        filePutUrl,\n        customHeader:{\n          \"X-FILENAME\": encodeURIComponent(file.name),\n          \"X-Access-Token\": getToken()\n        },\n        onUploadProgress: ({progressEvent, uploadingFile}) =\u003E {\n          let progress = (progressEvent.loaded \u002F progressEvent.total).toFixed(2)\n          this.updateFileUploadProgress(uploadingFile, progress)\n        },\n        onUploaded: ({result, uploadedFile}) =\u003E {\n          this.updateFileDownloadUrl(uploadedFile)\n        },\n        onError: ({error, errorFile}) =\u003E {\n\n        }\n      }\n\n      let httpInstance = this.createUploadHttp(config) \u002F\u002F创建http请求实例\n      this.httpQueue.push(httpInstance) \u002F\u002F将http请求保存到队列中\n    })\n  },\n\n\n\u002F\u002F更新对应文件的上传进度\nupdateFileUploadProgress(uploadingFile, progress) {\nthis.fileInfoList.forEach((item, index) =\u003E {\n  if(item.file.name === uploadingFile.name){\n    item.fileUploadProgress = (Number(progress)*100).toFixed(2) + '%'\n  }\n})\n},\n\n\u002F\u002F更新上传完成文件的下载地址\nupdateFileDownloadUrl(uploadedFile){\nconst userBucket = this.userBucket\nthis.fileInfoList.forEach((item, index) =\u003E {\n  if(item.file.name === uploadedFile.name){\n    this.minioClient.presignedGetObject(userBucket, uploadedFile.name, 24*60*60, (err, presignedUrl) =\u003E {\n      if (err) return console.log(err)\n      item.fileGetUrl = presignedUrl\n    })\n  }\n})\n},\n\n\n```\n\n##### 5 上传完成后，同步文件地址给后端\n\n在watch里监听文件列表，当所有的文件进度都是100%时，表示上传完成，接着就可以同步文件信息\n\n```js\n\nwatch:{\n  fileInfoList: {\n    handler(val){\n      \u002F\u002F1.3所有文件都上传到存储桶后，将上传完成后的文件地址、文件名字同步后端\n      if(val.length \u003C 1) return\n      let allFileHasUpload = val.every((item, index) =\u003E {\n        return item.fileGetUrl.length \u003E 1\n      })\n     if(allFileHasUpload) {\n       this.allFileHasUpload = allFileHasUpload\n       const {modelSourceInfoId} = this\n       if(modelSourceInfoId.length \u003C 1) {\n         return\n       }\n       const url = process.env.VUE_APP_BASE_API + \"\u002Fvector-map\u002FthreeDimensionalModelService\u002FinvokeMapService\"\n       const files = val.map((ite, idx) =\u003E {\n         return {\n            fileName: ite.file.name,\n            fileUrl: ite.fileGetUrl\n         }\n       })\n       this.syncAllUploadedFile(url, files, modelSourceInfoId)\n     }\n\n    },\n    deep: true\n  }\n},\n\n\n\n\u002F\u002F同步已上传的文件到后端\nsyncAllUploadedFile(url, files, modelSourceInfoId){\n    let xhr = new XMLHttpRequest()\n    xhr.onload = () =\u003E {\n      if (xhr.status === 200 && xhr.status \u003C 300 || xhr.status === 304) {\n        try {\n         const res = JSON.parse(xhr.responseText)\n         if(res && res.code === 200){\n           this.$message({\n             message: '上传完成',\n             type: 'success'\n           })\n             this.$emit('close')\n             this.fileInfoList = []\n             this.fileList = []\n             this.httpQueue = []\n         }\n        } catch(error) {\n         this.$message({\n           message: '上传失败，请检查服务',\n           type: 'error'\n         })\n        }\n      }\n    }\n    xhr.open(\"post\", url, true)\n    xhr.setRequestHeader('Content-Type', 'application\u002Fjson')\n    xhr.setRequestHeader('X-Access-Token', getToken())\n    \u002F\u002F将前面1.1获取文件信息的id作为头信息传递到后端\n    xhr.setRequestHeader('ThreeDimensionalModel-ServiceID', modelSourceInfoId)\n    xhr.send(JSON.stringify(files))\n},\n\n```\n\n##### 6.删除文件\n删除文件时要注意\n\n- 删除本地的文件缓存\n- 删除存储桶里面的文件\n- 停止当前文件对应的http请求\n```js\n\u002F\u002F删除文件，并取消正在文件的上传\n  deleteFile(fileInfo, index){\n    this.httpQueue[index] && this.httpQueue[index].abort()\n    this.httpQueue[index] && this.httpQueue.splice(index, 1)\n    this.fileInfoList.splice(index, 1)\n    this.fileList.splice(index, 1)\n    this.removeRemoteFile(fileInfo)\n  },\n\n  \u002F\u002F清空文件并取消上传队列\n  clearFile() {\n    this.fileInfoList.forEach((item, index) =\u003E {\n      this.httpQueue[index] && this.httpQueue[index].abort()\n      this.httpQueue[index] && this.httpQueue.splice(index, 1)\n      this.removeRemoteFile(item)\n    })\n    this.fileInfoList = []\n    this.httpQueue = []\n    this.fileList = []\n  },\n  \u002F\u002F删除远程文件\n  removeRemoteFile(fileInfo){\n    const userBucket = this.userBucket\n    const { fileUploadProgress, file} = fileInfo\n    const fileName = file.name\n    const complete = fileUploadProgress === '100.00%' ? true : false\n    if(complete){\n     this. minioClient.removeObject(userBucket, fileName, function(err) {\n        if (err) {\n          return console.log('Unable to remove object', err)\n        }\n        console.log('Removed the object')\n      })\n    }else{\n      this.minioClient.removeIncompleteUpload(userBucket, fileName, function(err) {\n        if (err) {\n          return console.log('Unable to remove incomplete object', err)\n        }\n        console.log('Incomplete object removed successfully.')\n      })\n    }\n  },\n\n\n```\n\n# 完整代码\n\n这里的完整代码是我直接从工程里拷贝出来的，里面用到了一些自己封装的服务和方法\n比如\n后端的接口、AES解密、获取Token、表单验证等\n\n\n\n\n```js\nimport{uploadModelSourceInfo, uploadModelSource, getMinioConfig} from '@\u002Fapi\u002Fmap' \nimport AES from '@\u002Futils\u002FAES.js' \nimport { getToken } from '@\u002Futils\u002Fauth' \nimport * as myValiDate from \"@\u002Futils\u002FformValidate\";\n```\n\n\n\n```js\n\u002F**\n * 文件说明\n * @Author: zhuds\n * @Description: 模型资源上传弹窗\n    分为3个步骤\n    1.先将文件的基本表单信息上传给后端，获取文件信息的ID\n    2.然后将文件上传存储桶\n    3.等所有文件都上传完成后，再将上传完成后的文件信息传递给后端，注意，此时的请求头要戴上第1步获取的文件信息id\n * @Date: 2\u002F28\u002F2022, 1:13:20 PM\n * @LastEditDate: 2\u002F28\u002F2022, 1:13:20 PM\n * @LastEditor:\n *\u002F\n\u003Ctemplate\u003E\n  \u003Cdiv class=\"upload-model\"\u003E\n    \u003Cel-dialog\n    \t:visible.sync=\"isVisible\"\n    \t@close=\"close()\"\n    \t:show-close =\"false\"\n    \t:close-on-click-modal=\"false\"\n    \ttop=\"10vh\"\n      v-if=\"isVisible\"\n      :destroy-on-close=\"true\"\n    \u003E\n    \t\u003Cdiv slot=\"title\" class=\"header-title\"\u003E\n    \t\t\u003Cdiv class=\"icon\"\u003E\u003C\u002Fdiv\u003E           \n    \t\t\u003Cspan\u003E上传模型资源\u003C\u002Fspan\u003E\n    \t\t\u003Ci class=\"el-icon-close\"  @click=\"close()\"\u003E\u003C\u002Fi\u003E\t\t\t       \n    \t\u003C\u002Fdiv\u003E\n\n      \u003Cel-form\n        :label-position=\"labelPosition\"\n        label-width=\"80px\"\n        :model=\"uploadFormData\"\n        ref=\"form\"\n        :rules=\"rules\"\n      \u003E\n        \u003Cel-form-item label=\"别名\"\u003E\n          \u003Cel-input   size=\"small\" v-model=\"uploadFormData.alias\"\u003E\u003C\u002Fel-input\u003E\n        \u003C\u002Fel-form-item\u003E\n\n        \u003Cel-form-item label=\"备注\"\u003E\n          \u003Cel-input type=\"textarea\" v-model=\"uploadFormData.remark\"  size=\"small\"\u003E\u003C\u002Fel-input\u003E\n        \u003C\u002Fel-form-item\u003E\n\n        \u003Cel-form-item label=\"资源文件\"\u003E\n          \u003Cel-button\n            style=\"marginRight:10px;\"\n            @click=\"selectFile()\"\n            size=\"mini\"\n          \u003E选择文件\u003C\u002Fel-button\u003E\n          \u003Cinput\n            :accept=\"acceptFileType\"\n            multiple=\"multiple\"\n            type=\"file\"\n            id=\"uploadInput\"\n            ref=\"uploadInput\"\n            v-show=\"false\"\n            @change=\"getAndFormatFile()\"\n          \u003E\n          \u003Ci class=\"tip\"\u003E仅支持.gbl、.gltf、.fbx、.obj、.mtl、.hdr、.png、.jpg格式的文件\u003C\u002Fi\u003E\n          \u003Ci class=\"tip\"\u003E单个文件的大小限制为128MB\u003C\u002Fi\u003E\n        \u003C\u002Fel-form-item\u003E\n\n      \u003C\u002Fel-form\u003E\n\n      \u003Cdiv class=\"file-list\" v-show=\"fileInfoList.length \u003E 0\"\u003E\n        \u003Cdiv class=\"file-item\" v-for=\"(item, index) in fileInfoList\" :key=\"index\"\u003E\n          \u003Cdiv class=\"icon\"\u003E\u003C\u002Fdiv\u003E\n          \u003Cdiv class=\"name\"\u003E{{item.file.name}}\u003C\u002Fdiv\u003E\n          \u003Cdiv class=\"size\"\u003E{{(item.file.size\u002F1024\u002F1024).toFixed(2)}}MB  \u003C\u002Fdiv\u003E\n          \u003Cdiv class=\"progress\"\u003E\n            \u003Cdiv class=\"bar\" :style=\"{width: item.fileUploadProgress}\"\u003E\u003C\u002Fdiv\u003E\n          \u003C\u002Fdiv\u003E\n          \u003Cdiv class=\"rate\"\u003E{{item.fileUploadProgress}}\u003C\u002Fdiv\u003E\n\n\n          \u003Cdiv class=\"delete-btn\" @click=\"deleteFile(item, index)\"\u003Ex\u003C\u002Fdiv\u003E\n        \u003C\u002Fdiv\u003E\n      \u003C\u002Fdiv\u003E\n      \u003Cdiv class=\"custom-footer\"\u003E\n        \u003Cbutton class=\"info\" @click=\"close()\"\u003E取 消\u003C\u002Fbutton\u003E\n        \u003Cbutton class=\"success\" @click=\"handleUplaod()\"\u003E上传\u003C\u002Fbutton\u003E\n      \u003C\u002Fdiv\u003E\n\n    \u003C\u002Fel-dialog\u003E\n  \u003C\u002Fdiv\u003E\n\u003C\u002Ftemplate\u003E\n\n\u003Cscript\u003E\n\n  import{uploadModelSourceInfo, uploadModelSource, getMinioConfig} from '@\u002Fapi\u002Fmap'\n  import AES from '@\u002Futils\u002FAES.js'\n  import { getToken } from '@\u002Futils\u002Fauth'\n  import * as myValiDate from \"@\u002Futils\u002FformValidate\";\n  let Minio = require('minio')\n\n  export default {\n    name: 'UploadModelDialog',\n    props: {\n      isVisible: {\n        type: Boolean,\n        default: false\n      },\n    },\n    data(){\n      return {\n        labelPosition: 'right',\n        uploadFormData: {\n          alias: '', \u002F\u002F服务名称\n          remark: '', \u002F\u002F备注\n        },\n        rules: {\n          serviceName: [{\n          \tvalidator: myValiDate.validateServiceName,\n          \ttrigger: \"blur\",\n          \trequired: true,\n          }],\n        },\n        acceptFileType:\".glb,.gltf,.fbx,.obj,.mtl,.hdr,.png,.jpg, .mp4\",\n        fileList:[], \u002F\u002F待上传的文件列表\n        fileInfoList: [], \u002F\u002F格式化后的文件信息列表\n        userBucket: null,\n        httpQueue: [], \u002F\u002F上传文件的http队列\n        allFileHasUpload: false, \u002F\u002F是否完成上传\n        modelSourceInfoId: '', \u002F\u002F模型资源基本信息的id\n      }\n    },\n\n    watch:{\n      fileInfoList: {\n        handler(val){\n          \u002F\u002F1.3所有文件都上传到存储桶后，将上传完成后的文件地址、文件名字同步后端\n          if(val.length \u003C 1) return\n          let allFileHasUpload = val.every((item, index) =\u003E {\n            return item.fileGetUrl.length \u003E 1\n          })\n         if(allFileHasUpload) {\n           this.allFileHasUpload = allFileHasUpload\n           const {modelSourceInfoId} = this\n           if(modelSourceInfoId.length \u003C 1) {\n             return\n           }\n           const url = process.env.VUE_APP_BASE_API + \"\u002Fvector-map\u002FthreeDimensionalModelService\u002FinvokeMapService\"\n           const files = val.map((ite, idx) =\u003E {\n             return {\n               \tfileName: ite.file.name,\n               \tfileUrl: ite.fileGetUrl\n             }\n           })\n           this.syncAllUploadedFile(url, files, modelSourceInfoId)\n         }\n\n        },\n        deep: true\n      }\n    },\n\n    created() {\n      this.initMinioClient()\n    },\n\n    beforeDestroy() {\n      if(!this.allFileHasUpload) {\n        this.clearFile()\n      }\n    },\n\n    methods:{\n       \u002F\u002F创建存储桶\n      async initMinioClient(){\n        const { code, result, message } =  AES.decryptToJSON(await getMinioConfig({}))\n        if(!result || code !== 200) {\n        \tthis.$customMessage.error({message: '获取存储桶配置信息出错'})\n        \treturn false\n        }\n        let {accessKey, bucketName, endPoint, secretKey} = result\n        \u002F\u002Fconsole.log({accessKey, bucketName, endPoint, secretKey})\n\n        let endPointStr = endPoint.split(\":\")[1]\n        let formatPort = Number(endPoint.split(\":\")[2])\n        let formatEndPoint = endPointStr.split('\u002F\u002F')[1]\n        this.userBucket = bucketName\n        this.minioClient = new Minio.Client({\n          useSSL: false,\n          partSize: '20M',\n          port: formatPort,\n          endPoint: formatEndPoint,\n          accessKey,\n          secretKey\n        });\n        let userBucket = this.userBucket\n        \u002F\u002FuserBucket只能作为字符串变量传入，不能作为其他变量的属性或者函数返回值，属于Minio的一个规定\n        this.minioClient.bucketExists(userBucket, (err)=\u003E {\n          if (err && err.code == 'NoSuchBucket') {\n            this.minioClient.makeBucket(userBucket, 'us-east-1', (err)=\u003E {\n              if (err) {\n                return console.log('创建存储桶失败', err)\n              }\n             \u002F\u002F console.log('Bucket created successfully in \"us-east-1\".')\n            })\n          }else{\n            \u002F\u002Fconsole.log('存储桶存在')\n          }\n        })\n      },\n\n      close(flag = false) {\n        this.$emit('close', flag)\n        \u002F\u002F关闭弹窗时，如果文件没有上传完成，则清空文件\n        if(!this.allFileHasUpload) {\n          this.clearFile()\n        }\n      },\n      selectFile() {\n        let inputDOM = this.$refs.uploadInput\n        inputDOM.click();\n      },\n\n      getFileSize(file){\n        let fileSize = ''\n        if(file.size \u002F 1024 \u003C 1){\n          fileSize = file.size + 'B'\n        }else if(file.size \u002F 1024 \u002F1024 \u003C 1){\n          fileSize = file.size + 'KB'\n        }else if(file.size \u002F 1024 \u002F1024 \u003E=1){\n           fileSize = file.size + 'MB'\n        }else{\n        }\n\n        return fileSize\n\n      },\n\n      \u002F\u002F删除文件，并取消正在文件的上传\n      deleteFile(fileInfo, index){\n        this.httpQueue[index] && this.httpQueue[index].abort()\n        this.httpQueue[index] && this.httpQueue.splice(index, 1)\n        this.fileInfoList.splice(index, 1)\n        this.fileList.splice(index, 1)\n        this.removeRemoteFile(fileInfo)\n      },\n\n      \u002F\u002F清空文件并取消上传队列\n      clearFile() {\n        this.fileInfoList.forEach((item, index) =\u003E {\n          this.httpQueue[index] && this.httpQueue[index].abort()\n          this.httpQueue[index] && this.httpQueue.splice(index, 1)\n          this.removeRemoteFile(item)\n        })\n        this.fileInfoList = []\n        this.httpQueue = []\n        this.fileList = []\n      },\n      \u002F\u002F删除远程文件\n      removeRemoteFile(fileInfo){\n        const userBucket = this.userBucket\n        const { fileUploadProgress, file} = fileInfo\n        const fileName = file.name\n        const complete = fileUploadProgress === '100.00%' ? true : false\n        if(complete){\n         this. minioClient.removeObject(userBucket, fileName, function(err) {\n            if (err) {\n              return console.log('Unable to remove object', err)\n            }\n            console.log('Removed the object')\n          })\n        }else{\n          this.minioClient.removeIncompleteUpload(userBucket, fileName, function(err) {\n            if (err) {\n              return console.log('Unable to remove incomplete object', err)\n            }\n            console.log('Incomplete object removed successfully.')\n          })\n        }\n      },\n      \u002F\u002F格式化文件并创建上传队列\n      getAndFormatFile(){\n        let files = this.$refs.uploadInput.files\n        const userBucket = this.userBucket\n        if(files.length \u003E 6) {\n          this.$message({\n            message: `最大只能上传6个文件`,\n            type: 'warning'\n          })\n          return\n        }\n        files.forEach((file, index) =\u003E {\n          if ((file.size \u002F 1024 \u002F 1024).toFixed(2) \u003E 128) { \u002F\u002F单个文件限制大小为128MB\n            this.$message({\n              message: `文件大小不能超过128MB`,\n              type: 'warning'\n            })\n            return\n          }\n          \u002F\u002F创建文件上传的url并格式化文件信息\n          this.minioClient.presignedPutObject(userBucket, file.name, 24 * 60 * 60, (err, presignedUrl) =\u003E {\n            if (err) {\n              this.$message({\n                message: `服务器连接超时`,\n                type: 'error'\n              })\n              return err\n            }\n            let fileIcon = this.getFileIcon(file)\n            let fileUploadProgress = '0%'\n            this.fileInfoList.push({\n              file, \u002F\u002F文件\n              fileIcon, \u002F\u002F文件对应的图标 className\n              fileUploadProgress, \u002F\u002F文件上传进度\n              filePutUrl: presignedUrl, \u002F\u002F文件上传put方法的url\n              fileGetUrl: '', \u002F\u002F文件下载的url\n            })\n          })\n        })\n        this.fileList = [...this.fileInfoList]\n      },\n\n      \u002F\u002F1.上传文件到存储桶\n      async handleUplaod(){\n        let _this = this\n        if(this.fileInfoList.length \u003C 1) {\n          this.$message({\n            message: `请先选择文件`,\n            type: 'warning'\n          })\n          return\n        }\n        \u002F\u002F1.1先上传文件的基本表单信息，获取文件信息的id\n        try{\n          const {remark, alias} = _this.uploadFormData\n          let res = await uploadModelSourceInfo({remark, serviceName: alias})\n          _this.modelSourceInfoId = res.message\n        }catch(error){\n          if(error) {\n            _this.$message({\n              message: `上传失败，请检查服务`,\n              type: 'error'\n            })\n            return\n          }\n        }\n\n        \u002F\u002F1.2开始将模型资源上传到远程的存储桶\n        this.fileList.forEach((item, index) =\u003E {\n          const {file, filePutUrl} = item\n          let config = {\n            file,\n            filePutUrl,\n            customHeader:{\n              \"X-FILENAME\": encodeURIComponent(file.name),\n              \"X-Access-Token\": getToken()\n            },\n            onUploadProgress: ({progressEvent, uploadingFile}) =\u003E {\n              let progress = (progressEvent.loaded \u002F progressEvent.total).toFixed(2)\n              this.updateFileUploadProgress(uploadingFile, progress)\n            },\n            onUploaded: ({result, uploadedFile}) =\u003E {\n              this.updateFileDownloadUrl(uploadedFile)\n            },\n            onError: ({error, errorFile}) =\u003E {\n\n            }\n          }\n\n          let httpInstance = this.createUploadHttp(config)\n          this.httpQueue.push(httpInstance)\n        })\n      },\n\n      \u002F\u002F1更新对应文件的上传进度\n      updateFileUploadProgress(uploadingFile, progress) {\n        \u002F\u002Fconsole.log({uploadingFile, progress})\n        this.fileInfoList.forEach((item, index) =\u003E {\n          if(item.file.name === uploadingFile.name){\n            item.fileUploadProgress = (Number(progress)*100).toFixed(2) + '%'\n          }\n        })\n      },\n\n      \u002F\u002F更新上传完成文件的下载地址\n      updateFileDownloadUrl(uploadedFile){\n        const userBucket = this.userBucket\n        this.fileInfoList.forEach((item, index) =\u003E {\n          if(item.file.name === uploadedFile.name){\n            this.minioClient.presignedGetObject(userBucket, uploadedFile.name, 24*60*60, (err, presignedUrl) =\u003E {\n              if (err) return console.log(err)\n              item.fileGetUrl = presignedUrl\n             \u002F\u002F console.log(presignedUrl)\n            })\n          }\n        })\n      },\n\n      \u002F\u002F同步已上传的文件到后端\n      syncAllUploadedFile(url, files, modelSourceInfoId){\n        let xhr = new XMLHttpRequest()\n        xhr.onload = () =\u003E {\n          if (xhr.status === 200 && xhr.status \u003C 300 || xhr.status === 304) {\n            try {\n             const res = JSON.parse(xhr.responseText)\n             if(res && res.code === 200){\n               this.$message({\n                 message: '上传完成',\n                 type: 'success'\n               })\n              \u002F\u002F setTimeout(() =\u003E {\n                 this.$emit('close')\n                 this.fileInfoList = []\n                 this.fileList = []\n                 this.httpQueue = []\n              \u002F\u002F }, 1000)\n             }\n            } catch(error) {\n             this.$message({\n               message: '上传失败，请检查服务',\n               type: 'error'\n             })\n            }\n          }\n        }\n        xhr.open(\"post\", url, true)\n        xhr.setRequestHeader('Content-Type', 'application\u002Fjson')\n        xhr.setRequestHeader('X-Access-Token', getToken())\n        \u002F\u002F将前面1.1获取文件信息的id作为头信息传递到后端\n        xhr.setRequestHeader('ThreeDimensionalModel-ServiceID', modelSourceInfoId)\n        xhr.send(JSON.stringify(files))\n      },\n\n      \u002F\u002F获取文件类型图标class\n      getFileIcon(file) {\n        const { type } = file\n        let icon = ''\n        return icon\n      },\n\n      \u002F\u002F创建上传文件的http\n      createUploadHttp(config){\n        const {file, filePutUrl, customHeader, onUploadProgress, onUploaded, onError} = config\n        let fileName = file.name\n        let http = new XMLHttpRequest();\n        http.upload.addEventListener(\"progress\", (e) =\u003E {\n          onUploadProgress({\n            progressEvent: e,\n            uploadingFile: file\n          })\n        }, false)\n\n        http.onload = () =\u003E {\n          if (http.status === 200 && http.status \u003C 300 || http.status === 304) {\n            try {\n              const result = http.responseURL\n              onUploaded({ result, uploadedFile: file})\n            } catch(error) {\n              onError({ error, errorFile: file})\n            }\n          }\n        }\n        http.open(\"PUT\", filePutUrl, true);\n        Object.keys(customHeader).forEach((key, index) =\u003E{\n          http.setRequestHeader(key, customHeader[key])\n        })\n        http.send(file);\n        return http\n      }\n\n    }\n  }\n\u003C\u002Fscript\u003E\n\n\u003Cstyle scoped lang=\"scss\"\u003E\n\n  .header-title {\n  \u002F\u002F  height: 24px;\n    border-bottom: 1px solid #EFEFEF;\n    padding-bottom: 20px;\n    \u002F\u002Foutline: 1px solid red;\n    .icon {\n      width: 26px;\n      height: 26px;\n      background-image: url(..\u002Fimages\u002Ficon_upload.png);\n      float: left;\n      background-size: 100% 100%;\n      margin-right: 18px;\n      margin-left: 10px;\n    }\n    span {\n      font-size: 23px;\n      font-family: Source Han Sans CN;\n      font-weight: 500;\n      color: #333333;\n    }\n    i {\n      float: right;\n      font-size: 16px;\n      color: rgba(176, 176, 176, 1);\n      cursor: pointer;\n      &:hover {\n        color: #0069D5 ;\n      }\n    }\n  }\n  .tip {\n    font-size: 12px;\n    display: block;\n  }\n  .file-list {\n    box-sizing: border-box;\n    padding: 5px;\n   \u002F\u002F border: 1px solid red;\n   \u002F\u002F width: 840px;\n    margin: 5px auto;\n    margin-left: 80px;\n    .file-item {\n      min-height: 32px;\n      display: flex;\n      justify-content: flex-start;\n      align-items: center;\n      font-size: 12px;\n      div {\n        margin-right: 15px;\n        text-align: left;\n      }\n      .name {\n        width: 200px;\n      }\n      .size {\n        width: 60px;\n      }\n      .progress {\n        width: 180px;\n        height: 8px;\n        border-radius: 4px;\n        background-color: #E2E2E2;\n        .bar {\n          width: 50%;\n          height: 8px;\n          border-radius: 4px;\n          background-color: #13A763;\n        }\n      }\n      .rate {\n        width: 60px;\n       \u002F\u002F border: 1px solid red;\n\n      }\n      .delete-btn {\n        cursor: pointer;\n        font-size: 16px;\n      }\n    }\n  }\n\n  .custom-footer {\n   \u002F\u002F border: 1px solid red;\n    display: flex;\n    justify-content: space-evenly;\n    align-items: center;\n    width: 100%;\n    height: 80px;\n    background-color: #fff;\n    \u002F\u002Fbox-shadow: 0px 1px 0px 0px red;\n    border-top: 1px solid #efefef;\n    z-index: 10;\n    button {\n      width: 90px;\n      height: 40px;\n      border-radius: 4px;\n      border: 0;\n      font-size: 16px;\n      font-family: Source Han Sans CN;\n      &:focus {\n        border: 0;\n        outline: 0;\n      }\n\n      &.info {\n        color: #8f8f8f;\n        background: #e2e2e2;\n        &:hover{\n          background-color: #A6A9AD;\n          cursor: pointer;\n          color: #fff;\n        }\n      }\n      &.success {\n        background: #12a763;\n        color: #fff;\n        &:hover{\n          cursor: pointer;\n          background-color: #73C132;\n        }\n      }\n    }\n  }\n\u003C\u002Fstyle\u003E\n\n\n```\n\n# 源码分享\n\n其实一开始我是想提供一个demo的，发现这个东西与产品功能强绑定，没有测试的服务地址和存储桶，也无法做出一个开放的案例\n\n所以上面的代码只是给大家提供一种实现方式和思路，里面具体的细节处理我做的比较复杂\n\n如果有不懂的地方，评论区聊一聊\n",display_count:d,is_markdown:g,app_html_content:e},author_user_info:{user_id:w,user_name:E,company:e,job_title:"前端研发工程师",avatar_large:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F70d42e21da9f4464ca0df299adcaab90~300x300.image",level:t,description:"拯救老实人",followee_count:44,follower_count:279,post_article_count:24,digg_article_count:25,got_digg_count:1163,got_view_count:93863,post_shortmsg_count:34,digg_shortmsg_count:14,isfollowed:a,favorable_author:d,power:F,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:1398234520238839,jpower:F,jscore:607.7,jpower_level:t,jscore_level:5,jscore_title:"先锋掘友",author_achievement_list:[],vip_level:t,vip_title:"融会贯通",jscore_next_level_score:2000,jscore_this_level_mini_score:500},is_vip:c,become_author_days:d,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637767543259144",category_name:p,category_url:"frontend",rank:s,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F8c95587526f346c0.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F1c40f5eaba561e32.png",ctime:1457483942,mtime:1432503190,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:s,id:"6809637767543259144",name:p,title:p,alias:"frontend"},tags:[{entriesCount:j,subscribed:a,id:"6809640369764958215",tag_id:"6809640369764958215",tag_name:"Vue.js",color:e,icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002F7b5c3eb591b671749fee.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1432234520,mtime:1679300115,id_type:9,tag_alias:"vue,Vue",post_article_count:54952,concern_user_count:407613,title:"Vue.js",tagId:"6809640369764958215",articleCount:54952,subscribersCount:407613,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809640398105870343",tag_id:"6809640398105870343",tag_name:"JavaScript",color:"#616161",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002F5d70fd6af940df373834.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1435884803,mtime:1679300291,id_type:9,tag_alias:e,post_article_count:121069,concern_user_count:501206,title:"JavaScript",tagId:"6809640398105870343",articleCount:121069,subscribersCount:501206,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809640407484334093",tag_id:"6809640407484334093",tag_name:p,color:"#60ADFF",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Fbac28828a49181c34110.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:g,ctime:1435971546,mtime:1679300221,id_type:9,tag_alias:e,post_article_count:342105,concern_user_count:639894,title:p,tagId:"6809640407484334093",articleCount:342105,subscribersCount:639894,createdAt:b,updatedAt:b}],user_interact:{id:7075616880571974000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,org_user:b,is_followed:a},req_id:"202303201619027EE86BC10B5FEC0E1F2E",status:{push_status:d},author_interact:b,extra:{boost_type:e},title:x,user:G,viewCount:j,commentsCount:D,isEvent:j,abstract:y,latestCommentAt:b,createdAt:new Date(1647420504000),updatedAt:b,isTopicEvent:a,likedCount:r,likeCount:r,content:e,originalUrl:e,type:"post",collected:a,viewsCount:B,username:E,viewerHasLiked:a,draftId:A,collectionCount:C,theme_list:[]},entryView:{},author:G,adEntryList:[],relatedEntryList:[],linkVotingList:[{keyword:"抖音聊天",url:"https:\u002F\u002Fwww.douyin.com\u002Fdownloadpage\u002Fchat",type:"抖音"},{keyword:"js 小数转成百分比",url:"https:\u002F\u002Ffrontend.devrank.cn\u002Ftraffic-aggregation\u002F82404",type:p},{keyword:"js点击显示隐藏tableview",url:"https:\u002F\u002Ffrontend.devrank.cn\u002Ftraffic-aggregation\u002F82422",type:p},{keyword:"怎样进行小程序开发",url:"https:\u002F\u002Ffrontend.devrank.cn\u002Ftraffic-aggregation\u002F82428",type:p},{keyword:"js有没有全局变量",url:"https:\u002F\u002Ffrontend.devrank.cn\u002Ftraffic-aggregation\u002F82431",type:p}],userAnnuals:[],columnList:[],resultHtml:"\u003Cstyle\u003E.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre\u003Ecode{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:\"\"}.markdown-body blockquote\u003Ep{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}\u003C\u002Fstyle\u003E\u003Cstyle data-highlight data-highlight-key=\"an-old-hope\"\u003E.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre\u003Ecode.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}\u003C\u002Fstyle\u003E\u003Ch1 data-id=\"heading-0\"\u003E背景\u003C\u002Fh1\u003E\n\u003Cp\u003E最近突然接到了一个产品的需求，有点特别，在这里给大家分享一下，需求如下\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E提交表单，同时要上传模型资源\u003C\u002Fli\u003E\n\u003Cli\u003E模型文件是大文件，要显示上传进度，同时可以删除\u003C\u002Fli\u003E\n\u003Cli\u003E模型文件要上传到服务器，表单数据同步到数据库\u003C\u002Fli\u003E\n\u003Cli\u003E同时要同步上传后的模型地址到数据库\u003C\u002Fli\u003E\n\u003Cli\u003E后端使用Minio做文件管理\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E设计图如下\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp1-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fa92063a729f247df869a3ff23e547bb0~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?\" alt=\"pic1.png\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E一开始以为是一个简单的表单上传，发现并不是，这是大文件上传啊，但很快又发现，不单单是上传大文件，还有将文件信息关联到表单。\u003C\u002Fp\u003E\n\u003Cp\u003E基于这个奇葩的情况，我和后端兄弟商量了一下，决定使用如下方案\u003C\u002Fp\u003E\n\u003Ch1 data-id=\"heading-1\"\u003E实现方案\u003C\u002Fh1\u003E\n\u003Cp\u003E分2步走\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003E点击上传时，先提交表单信息到数据库，接着后端返回一个表单的id给我\u003C\u002Fli\u003E\n\u003Cli\u003E当所有文件上传完成后，再调用另外一个服务，将上传完成后的地址和表单id发送给后端\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cp\u003E如此，便完成了上面的需求\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-2\"\u003E了解一下Mino\u003C\u002Fh3\u003E\n\u003Cp\u003E这里大家先了解一下Minio的js \u003Ca href=\"https:\u002F\u002Flink.juejin.cn?target=http%3A%2F%2Fdocs.minio.org.cn%2Fdocs%2Fmaster%2Fjavascript-client-api-reference\" target=\"_blank\" title=\"http:\u002F\u002Fdocs.minio.org.cn\u002Fdocs\u002Fmaster\u002Fjavascript-client-api-reference\" ref=\"nofollow noopener noreferrer\"\u003ESDK文档\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E里面有2个很重要的接口，今天要用到\u003C\u002Fp\u003E\n\n\n\n\n\n\n\n\n\n\n\n\u003Ctable\u003E\u003Cthead\u003E\u003Ctr\u003E\u003Cth\u003E\u003Cstrong\u003E一个是给文件生成用于put方法上传的地址\u003C\u002Fstrong\u003E\u003C\u002Fth\u003E\u003C\u002Ftr\u003E\u003C\u002Fthead\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd\u003E\u003Cimg src=\"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F2702520f452349c596daf281e5da60ee~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?\" alt=\"image.png\" loading=\"lazy\"\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\n\n\n\n\n\n\n\u003Ctable\u003E\u003Cthead\u003E\u003Ctr\u003E\u003Cth\u003E\u003Cstrong\u003E一个是获取已经上传完成后的文件的get下载地址\u003C\u002Fstrong\u003E\u003C\u002Fth\u003E\u003C\u002Ftr\u003E\u003C\u002Fthead\u003E\u003C\u002Ftable\u003E\n\u003Cp\u003E\u003Cimg src=\"https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Ff8e867e38b964ad2b6e0c3011af89b30~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?\" alt=\"image.png\" loading=\"lazy\"\u003E\u003C\u002Fp\u003E\n\u003Ch3 data-id=\"heading-3\"\u003E实现步骤\u003C\u002Fh3\u003E\n\u003Cp\u003E这里是使用原生的 ajax请求进行上传的，至于为什么，后面会有说到\u003C\u002Fp\u003E\n\u003Ch5 data-id=\"heading-4\"\u003E1.创建存储桶\u003C\u002Fh5\u003E\n\u003Cp\u003E创建一个Minio上传实例\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-js copyable\" lang=\"js\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Evar\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EMinio\u003C\u002Fspan\u003E = \u003Cspan class=\"hljs-built_in\"\u003Erequire\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'minio'\u003C\u002Fspan\u003E)\n\n\u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EminioClient\u003C\u002Fspan\u003E = \u003Cspan class=\"hljs-keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EMinio\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title class_\"\u003EClient\u003C\u002Fspan\u003E({\n    \u003Cspan class=\"hljs-attr\"\u003EendPoint\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'192.168.172.162'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F后端提供\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003Eport\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E9000\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F端口号默认9000\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003EuseSSL\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E,\n    \u003Cspan class=\"hljs-attr\"\u003EaccessKey\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'Q3AM3UQ867SPQQA43P2F'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F后端提供\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003EsecretKey\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG'\u003C\u002Fspan\u003E\n});\n\n\u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EuserBucket\u003C\u002Fspan\u003E = \u003Cspan class=\"hljs-string\"\u003E'yourBucketName'\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F这里后端需要提供给你，一个存储桶名字\u003C\u002Fspan\u003E\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch5 data-id=\"heading-5\"\u003E2.选择文件\u003C\u002Fh5\u003E\n\u003Cp\u003E这里使用input标签选择文件,点击选择文件的时候，调用一下input的click方法，就可以打开本地文件夹\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-html copyable\" lang=\"html\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Eel-form-item\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Elabel\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"资源文件\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Eel-button\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003Estyle\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"marginRight:10px;\"\u003C\u002Fspan\u003E\n    @\u003Cspan class=\"hljs-attr\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"selectFile()\"\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003Esize\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"mini\"\u003C\u002Fspan\u003E\n  \u003E\u003C\u002Fspan\u003E选择文件\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Eel-button\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Einput\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003E:accept\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"acceptFileType\"\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003Emultiple\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"multiple\"\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"file\"\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003Eid\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"uploadInput\"\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003Eref\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"uploadInput\"\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-attr\"\u003Ev-show\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"false\"\u003C\u002Fspan\u003E\n    @\u003Cspan class=\"hljs-attr\"\u003Echange\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"getAndFormatFile()\"\u003C\u002Fspan\u003E\n  \u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ei\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"tip\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E仅支持.gbl、.gltf、.fbx、.obj、.mtl、.hdr、.png、.jpg格式的文件\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ei\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ei\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"tip\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E单个文件的大小限制为128MB\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ei\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Eel-form-item\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-js copyable\" lang=\"js\"\u003E\n\u003Cspan class=\"hljs-title function_\"\u003EselectFile\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) {\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E inputDOM = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003E$refs\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EuploadInput\u003C\u002Fspan\u003E\n    inputDOM.\u003Cspan class=\"hljs-title function_\"\u003Eclick\u003C\u002Fspan\u003E();\n},\n\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E接着就是对文件进行格式化\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-js copyable\" lang=\"js\"\u003E\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F格式化文件并创建上传队列\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-title function_\"\u003EgetAndFormatFile\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E){\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E files = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003E$refs\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EuploadInput\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003Efiles\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E userBucket = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EuserBucket\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(files.\u003Cspan class=\"hljs-property\"\u003Elength\u003C\u002Fspan\u003E \u003E \u003Cspan class=\"hljs-number\"\u003E6\u003C\u002Fspan\u003E) {\n      \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$message({\n        \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`最大只能上传6个文件`\u003C\u002Fspan\u003E,\n        \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'warning'\u003C\u002Fspan\u003E\n      })\n      \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E\n    }\n    files.\u003Cspan class=\"hljs-title function_\"\u003EforEach\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Efile, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E ((file.\u003Cspan class=\"hljs-property\"\u003Esize\u003C\u002Fspan\u003E \u002F \u003Cspan class=\"hljs-number\"\u003E1024\u003C\u002Fspan\u003E \u002F \u003Cspan class=\"hljs-number\"\u003E1024\u003C\u002Fspan\u003E).\u003Cspan class=\"hljs-title function_\"\u003EtoFixed\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E) \u003E \u003Cspan class=\"hljs-number\"\u003E128\u003C\u002Fspan\u003E) { \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F单个文件限制大小为128MB\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$message({\n          \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`文件大小不能超过128MB`\u003C\u002Fspan\u003E,\n          \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'warning'\u003C\u002Fspan\u003E\n        })\n        \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E\n      }\n      \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F创建文件的put方法的url\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EminioClient\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EpresignedPutObject\u003C\u002Fspan\u003E(userBucket, file.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E24\u003C\u002Fspan\u003E * \u003Cspan class=\"hljs-number\"\u003E60\u003C\u002Fspan\u003E * \u003Cspan class=\"hljs-number\"\u003E60\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eerr, presignedUrl\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (err) {\n          \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$message({\n            \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`服务器连接超时`\u003C\u002Fspan\u003E,\n            \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'error'\u003C\u002Fspan\u003E\n          })\n          \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E err\n        }\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E fileIcon = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EgetFileIcon\u003C\u002Fspan\u003E(file)\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E fileUploadProgress = \u003Cspan class=\"hljs-string\"\u003E'0%'\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F文件上传进度\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Epush\u003C\u002Fspan\u003E({\n          file, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F文件\u003C\u002Fspan\u003E\n          fileIcon, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F文件对应的图标 className\u003C\u002Fspan\u003E\n          fileUploadProgress, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F文件上传进度\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-attr\"\u003EfilePutUrl\u003C\u002Fspan\u003E: presignedUrl, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F文件上传put方法的url\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-attr\"\u003EfileGetUrl\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E''\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F文件下载的url\u003C\u002Fspan\u003E\n        })\n      })\n    })\n    \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileList\u003C\u002Fspan\u003E = [...\u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E]\n  },\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch5 data-id=\"heading-6\"\u003E3.创建上传队列\u003C\u002Fh5\u003E\n\u003Cp\u003E这里定义了一个创建文件上传请求的方法，使用原生的\u003Ccode\u003EXMLHttpRequest\u003C\u002Fcode\u003E，它接受以下参数\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ccode\u003Efile\u003C\u002Fcode\u003E:要上传的文件\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EfilePutUrl\u003C\u002Fcode\u003E:文件上传的put方法地址\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EcustomHeader\u003C\u002Fcode\u003E: 自定义的头信息\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EonUploadProgress\u003C\u002Fcode\u003E:文件上传的进度监听函数\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EonUploaded\u003C\u002Fcode\u003E:文件上传完成的监听函数\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003EonError\u003C\u002Fcode\u003E:文件上传出错的监听函数\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-js copyable\" lang=\"js\"\u003E \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F创建上传文件的http\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-title function_\"\u003EcreateUploadHttp\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Econfig\u003C\u002Fspan\u003E){\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E {file, filePutUrl, customHeader, onUploadProgress, onUploaded, onError} = config\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E fileName = file.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E http = \u003Cspan class=\"hljs-keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EXMLHttpRequest\u003C\u002Fspan\u003E();\n    http.\u003Cspan class=\"hljs-property\"\u003Eupload\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EaddEventListener\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E\"progress\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Ee\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E { \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F监听http的进度。并执行进度监听函数\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-title function_\"\u003EonUploadProgress\u003C\u002Fspan\u003E({\n        \u003Cspan class=\"hljs-attr\"\u003EprogressEvent\u003C\u002Fspan\u003E: e,\n        \u003Cspan class=\"hljs-attr\"\u003EuploadingFile\u003C\u002Fspan\u003E: file\n      })\n    }, \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E)\n\n    http.\u003Cspan class=\"hljs-property\"\u003Eonload\u003C\u002Fspan\u003E = \u003Cspan class=\"hljs-function\"\u003E() =\u003E\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (http.\u003Cspan class=\"hljs-property\"\u003Estatus\u003C\u002Fspan\u003E === \u003Cspan class=\"hljs-number\"\u003E200\u003C\u002Fspan\u003E &#x26;&#x26; http.\u003Cspan class=\"hljs-property\"\u003Estatus\u003C\u002Fspan\u003E &#x3C; \u003Cspan class=\"hljs-number\"\u003E300\u003C\u002Fspan\u003E || http.\u003Cspan class=\"hljs-property\"\u003Estatus\u003C\u002Fspan\u003E === \u003Cspan class=\"hljs-number\"\u003E304\u003C\u002Fspan\u003E) {\n        \u003Cspan class=\"hljs-keyword\"\u003Etry\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F监听http的完成事件，并执行上传完成的监听函数\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E result = http.\u003Cspan class=\"hljs-property\"\u003EresponseURL\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-title function_\"\u003EonUploaded\u003C\u002Fspan\u003E({ result, \u003Cspan class=\"hljs-attr\"\u003EuploadedFile\u003C\u002Fspan\u003E: file})\n        } \u003Cspan class=\"hljs-keyword\"\u003Ecatch\u003C\u002Fspan\u003E(error) {\n        \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F监听错误\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-title function_\"\u003EonError\u003C\u002Fspan\u003E({ error, \u003Cspan class=\"hljs-attr\"\u003EerrorFile\u003C\u002Fspan\u003E: file})\n        }\n      }\n    }\n \n    http.\u003Cspan class=\"hljs-title function_\"\u003Eopen\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E\"PUT\"\u003C\u002Fspan\u003E, filePutUrl, \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E);\n    \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F加入头信息\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-title class_\"\u003EObject\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Ekeys\u003C\u002Fspan\u003E(customHeader).\u003Cspan class=\"hljs-title function_\"\u003EforEach\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Ekey, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E{\n      http.\u003Cspan class=\"hljs-title function_\"\u003EsetRequestHeader\u003C\u002Fspan\u003E(key, customHeader[key])\n    })\n    http.\u003Cspan class=\"hljs-title function_\"\u003Esend\u003C\u002Fspan\u003E(file);\n    \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E http \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F返回该http实例\u003C\u002Fspan\u003E\n  }\n\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch5 data-id=\"heading-7\"\u003E4.开始上传\u003C\u002Fh5\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-js copyable\" lang=\"js\"\u003E\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F上传文件到存储桶\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003EhandleUplaod\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E){\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E _this = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003Elength\u003C\u002Fspan\u003E &#x3C; \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E) {\n      \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$message({\n        \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`请先选择文件`\u003C\u002Fspan\u003E,\n        \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'warning'\u003C\u002Fspan\u003E\n      })\n      \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E\n    }\n    \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F先上传文件的基本表单信息，获取表单信息的id\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Etry\u003C\u002Fspan\u003E{\n      \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E {remark, alias} = _this.\u003Cspan class=\"hljs-property\"\u003EuploadFormData\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E res = \u003Cspan class=\"hljs-keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003EuploadModelSourceInfo\u003C\u002Fspan\u003E({remark, \u003Cspan class=\"hljs-attr\"\u003EserviceName\u003C\u002Fspan\u003E: alias})\n      _this.\u003Cspan class=\"hljs-property\"\u003EmodelSourceInfoId\u003C\u002Fspan\u003E = res.\u003Cspan class=\"hljs-property\"\u003Emessage\u003C\u002Fspan\u003E\n    }\u003Cspan class=\"hljs-keyword\"\u003Ecatch\u003C\u002Fspan\u003E(error){\n      \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(error) {\n        _this.$message({\n          \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`上传失败，请检查服务`\u003C\u002Fspan\u003E,\n          \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'error'\u003C\u002Fspan\u003E\n        })\n        \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E\n      }\n    }\n\n    \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F开始将模型资源上传到远程的存储桶\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EforEach\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eitem, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E {file, filePutUrl} = item\n      \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E config = {\n        file,\n        filePutUrl,\n        \u003Cspan class=\"hljs-attr\"\u003EcustomHeader\u003C\u002Fspan\u003E:{\n          \u003Cspan class=\"hljs-string\"\u003E\"X-FILENAME\"\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-built_in\"\u003EencodeURIComponent\u003C\u002Fspan\u003E(file.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E),\n          \u003Cspan class=\"hljs-string\"\u003E\"X-Access-Token\"\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-title function_\"\u003EgetToken\u003C\u002Fspan\u003E()\n        },\n        \u003Cspan class=\"hljs-attr\"\u003EonUploadProgress\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003E{progressEvent, uploadingFile}\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n          \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E progress = (progressEvent.\u003Cspan class=\"hljs-property\"\u003Eloaded\u003C\u002Fspan\u003E \u002F progressEvent.\u003Cspan class=\"hljs-property\"\u003Etotal\u003C\u002Fspan\u003E).\u003Cspan class=\"hljs-title function_\"\u003EtoFixed\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E)\n          \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EupdateFileUploadProgress\u003C\u002Fspan\u003E(uploadingFile, progress)\n        },\n        \u003Cspan class=\"hljs-attr\"\u003EonUploaded\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003E{result, uploadedFile}\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n          \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EupdateFileDownloadUrl\u003C\u002Fspan\u003E(uploadedFile)\n        },\n        \u003Cspan class=\"hljs-attr\"\u003EonError\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003E{error, errorFile}\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n\n        }\n      }\n\n      \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E httpInstance = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EcreateUploadHttp\u003C\u002Fspan\u003E(config) \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F创建http请求实例\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Epush\u003C\u002Fspan\u003E(httpInstance) \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F将http请求保存到队列中\u003C\u002Fspan\u003E\n    })\n  },\n\n\n\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F更新对应文件的上传进度\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-title function_\"\u003EupdateFileUploadProgress\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003EuploadingFile, progress\u003C\u002Fspan\u003E) {\n\u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EforEach\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eitem, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(item.\u003Cspan class=\"hljs-property\"\u003Efile\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E === uploadingFile.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E){\n    item.\u003Cspan class=\"hljs-property\"\u003EfileUploadProgress\u003C\u002Fspan\u003E = (\u003Cspan class=\"hljs-title class_\"\u003ENumber\u003C\u002Fspan\u003E(progress)*\u003Cspan class=\"hljs-number\"\u003E100\u003C\u002Fspan\u003E).\u003Cspan class=\"hljs-title function_\"\u003EtoFixed\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E) + \u003Cspan class=\"hljs-string\"\u003E'%'\u003C\u002Fspan\u003E\n  }\n})\n},\n\n\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F更新上传完成文件的下载地址\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-title function_\"\u003EupdateFileDownloadUrl\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003EuploadedFile\u003C\u002Fspan\u003E){\n\u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E userBucket = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EuserBucket\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EforEach\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eitem, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n  \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(item.\u003Cspan class=\"hljs-property\"\u003Efile\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E === uploadedFile.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E){\n    \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EminioClient\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EpresignedGetObject\u003C\u002Fspan\u003E(userBucket, uploadedFile.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E24\u003C\u002Fspan\u003E*\u003Cspan class=\"hljs-number\"\u003E60\u003C\u002Fspan\u003E*\u003Cspan class=\"hljs-number\"\u003E60\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eerr, presignedUrl\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (err) \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable language_\"\u003Econsole\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Elog\u003C\u002Fspan\u003E(err)\n      item.\u003Cspan class=\"hljs-property\"\u003EfileGetUrl\u003C\u002Fspan\u003E = presignedUrl\n    })\n  }\n})\n},\n\n\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch5 data-id=\"heading-8\"\u003E5 上传完成后，同步文件地址给后端\u003C\u002Fh5\u003E\n\u003Cp\u003E在watch里监听文件列表，当所有的文件进度都是100%时，表示上传完成，接着就可以同步文件信息\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-js copyable\" lang=\"js\"\u003E\n\u003Cspan class=\"hljs-attr\"\u003Ewatch\u003C\u002Fspan\u003E:{\n  \u003Cspan class=\"hljs-attr\"\u003EfileInfoList\u003C\u002Fspan\u003E: {\n    \u003Cspan class=\"hljs-title function_\"\u003Ehandler\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eval\u003C\u002Fspan\u003E){\n      \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F1.3所有文件都上传到存储桶后，将上传完成后的文件地址、文件名字同步后端\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(val.\u003Cspan class=\"hljs-property\"\u003Elength\u003C\u002Fspan\u003E &#x3C; \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E) \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E allFileHasUpload = val.\u003Cspan class=\"hljs-title function_\"\u003Eevery\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eitem, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E item.\u003Cspan class=\"hljs-property\"\u003EfileGetUrl\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003Elength\u003C\u002Fspan\u003E \u003E \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E\n      })\n     \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(allFileHasUpload) {\n       \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EallFileHasUpload\u003C\u002Fspan\u003E = allFileHasUpload\n       \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E {modelSourceInfoId} = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E\n       \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(modelSourceInfoId.\u003Cspan class=\"hljs-property\"\u003Elength\u003C\u002Fspan\u003E &#x3C; \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E) {\n         \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E\n       }\n       \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E url = process.\u003Cspan class=\"hljs-property\"\u003Eenv\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EVUE_APP_BASE_API\u003C\u002Fspan\u003E + \u003Cspan class=\"hljs-string\"\u003E\"\u002Fvector-map\u002FthreeDimensionalModelService\u002FinvokeMapService\"\u003C\u002Fspan\u003E\n       \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E files = val.\u003Cspan class=\"hljs-title function_\"\u003Emap\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eite, idx\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n         \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E {\n            \u003Cspan class=\"hljs-attr\"\u003EfileName\u003C\u002Fspan\u003E: ite.\u003Cspan class=\"hljs-property\"\u003Efile\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E,\n            \u003Cspan class=\"hljs-attr\"\u003EfileUrl\u003C\u002Fspan\u003E: ite.\u003Cspan class=\"hljs-property\"\u003EfileGetUrl\u003C\u002Fspan\u003E\n         }\n       })\n       \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EsyncAllUploadedFile\u003C\u002Fspan\u003E(url, files, modelSourceInfoId)\n     }\n\n    },\n    \u003Cspan class=\"hljs-attr\"\u003Edeep\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E\n  }\n},\n\n\n\n\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F同步已上传的文件到后端\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-title function_\"\u003EsyncAllUploadedFile\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eurl, files, modelSourceInfoId\u003C\u002Fspan\u003E){\n    \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E xhr = \u003Cspan class=\"hljs-keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EXMLHttpRequest\u003C\u002Fspan\u003E()\n    xhr.\u003Cspan class=\"hljs-property\"\u003Eonload\u003C\u002Fspan\u003E = \u003Cspan class=\"hljs-function\"\u003E() =\u003E\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (xhr.\u003Cspan class=\"hljs-property\"\u003Estatus\u003C\u002Fspan\u003E === \u003Cspan class=\"hljs-number\"\u003E200\u003C\u002Fspan\u003E &#x26;&#x26; xhr.\u003Cspan class=\"hljs-property\"\u003Estatus\u003C\u002Fspan\u003E &#x3C; \u003Cspan class=\"hljs-number\"\u003E300\u003C\u002Fspan\u003E || xhr.\u003Cspan class=\"hljs-property\"\u003Estatus\u003C\u002Fspan\u003E === \u003Cspan class=\"hljs-number\"\u003E304\u003C\u002Fspan\u003E) {\n        \u003Cspan class=\"hljs-keyword\"\u003Etry\u003C\u002Fspan\u003E {\n         \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E res = \u003Cspan class=\"hljs-title class_\"\u003EJSON\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Eparse\u003C\u002Fspan\u003E(xhr.\u003Cspan class=\"hljs-property\"\u003EresponseText\u003C\u002Fspan\u003E)\n         \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(res &#x26;&#x26; res.\u003Cspan class=\"hljs-property\"\u003Ecode\u003C\u002Fspan\u003E === \u003Cspan class=\"hljs-number\"\u003E200\u003C\u002Fspan\u003E){\n           \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$message({\n             \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'上传完成'\u003C\u002Fspan\u003E,\n             \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'success'\u003C\u002Fspan\u003E\n           })\n             \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$emit(\u003Cspan class=\"hljs-string\"\u003E'close'\u003C\u002Fspan\u003E)\n             \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E = []\n             \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileList\u003C\u002Fspan\u003E = []\n             \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E = []\n         }\n        } \u003Cspan class=\"hljs-keyword\"\u003Ecatch\u003C\u002Fspan\u003E(error) {\n         \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$message({\n           \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'上传失败，请检查服务'\u003C\u002Fspan\u003E,\n           \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'error'\u003C\u002Fspan\u003E\n         })\n        }\n      }\n    }\n    xhr.\u003Cspan class=\"hljs-title function_\"\u003Eopen\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E\"post\"\u003C\u002Fspan\u003E, url, \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E)\n    xhr.\u003Cspan class=\"hljs-title function_\"\u003EsetRequestHeader\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'Content-Type'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E'application\u002Fjson'\u003C\u002Fspan\u003E)\n    xhr.\u003Cspan class=\"hljs-title function_\"\u003EsetRequestHeader\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'X-Access-Token'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-title function_\"\u003EgetToken\u003C\u002Fspan\u003E())\n    \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F将前面1.1获取文件信息的id作为头信息传递到后端\u003C\u002Fspan\u003E\n    xhr.\u003Cspan class=\"hljs-title function_\"\u003EsetRequestHeader\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'ThreeDimensionalModel-ServiceID'\u003C\u002Fspan\u003E, modelSourceInfoId)\n    xhr.\u003Cspan class=\"hljs-title function_\"\u003Esend\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-title class_\"\u003EJSON\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Estringify\u003C\u002Fspan\u003E(files))\n},\n\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch5 data-id=\"heading-9\"\u003E6.删除文件\u003C\u002Fh5\u003E\n\u003Cp\u003E删除文件时要注意\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E删除本地的文件缓存\u003C\u002Fli\u003E\n\u003Cli\u003E删除存储桶里面的文件\u003C\u002Fli\u003E\n\u003Cli\u003E停止当前文件对应的http请求\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-js copyable\" lang=\"js\"\u003E\u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F删除文件，并取消正在文件的上传\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-title function_\"\u003EdeleteFile\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003EfileInfo, index\u003C\u002Fspan\u003E){\n    \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E[index] &#x26;&#x26; \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E[index].\u003Cspan class=\"hljs-title function_\"\u003Eabort\u003C\u002Fspan\u003E()\n    \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E[index] &#x26;&#x26; \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Esplice\u003C\u002Fspan\u003E(index, \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E)\n    \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Esplice\u003C\u002Fspan\u003E(index, \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E)\n    \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Esplice\u003C\u002Fspan\u003E(index, \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E)\n    \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EremoveRemoteFile\u003C\u002Fspan\u003E(fileInfo)\n  },\n\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F清空文件并取消上传队列\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-title function_\"\u003EclearFile\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) {\n    \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EforEach\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eitem, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E[index] &#x26;&#x26; \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E[index].\u003Cspan class=\"hljs-title function_\"\u003Eabort\u003C\u002Fspan\u003E()\n      \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E[index] &#x26;&#x26; \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Esplice\u003C\u002Fspan\u003E(index, \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E)\n      \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EremoveRemoteFile\u003C\u002Fspan\u003E(item)\n    })\n    \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E = []\n    \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E = []\n    \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileList\u003C\u002Fspan\u003E = []\n  },\n  \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F删除远程文件\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-title function_\"\u003EremoveRemoteFile\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003EfileInfo\u003C\u002Fspan\u003E){\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E userBucket = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EuserBucket\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { fileUploadProgress, file} = fileInfo\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E fileName = file.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E complete = fileUploadProgress === \u003Cspan class=\"hljs-string\"\u003E'100.00%'\u003C\u002Fspan\u003E ? \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E : \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(complete){\n     \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E. minioClient.\u003Cspan class=\"hljs-title function_\"\u003EremoveObject\u003C\u002Fspan\u003E(userBucket, fileName, \u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eerr\u003C\u002Fspan\u003E) {\n        \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (err) {\n          \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable language_\"\u003Econsole\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Elog\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'Unable to remove object'\u003C\u002Fspan\u003E, err)\n        }\n        \u003Cspan class=\"hljs-variable language_\"\u003Econsole\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Elog\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'Removed the object'\u003C\u002Fspan\u003E)\n      })\n    }\u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E{\n      \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EminioClient\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EremoveIncompleteUpload\u003C\u002Fspan\u003E(userBucket, fileName, \u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eerr\u003C\u002Fspan\u003E) {\n        \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (err) {\n          \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable language_\"\u003Econsole\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Elog\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'Unable to remove incomplete object'\u003C\u002Fspan\u003E, err)\n        }\n        \u003Cspan class=\"hljs-variable language_\"\u003Econsole\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Elog\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'Incomplete object removed successfully.'\u003C\u002Fspan\u003E)\n      })\n    }\n  },\n\n\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch1 data-id=\"heading-10\"\u003E完整代码\u003C\u002Fh1\u003E\n\u003Cp\u003E这里的完整代码是我直接从工程里拷贝出来的，里面用到了一些自己封装的服务和方法\n比如\n后端的接口、AES解密、获取Token、表单验证等\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-js copyable\" lang=\"js\"\u003E\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E{uploadModelSourceInfo, uploadModelSource, getMinioConfig} \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E'@\u002Fapi\u002Fmap'\u003C\u002Fspan\u003E \n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable constant_\"\u003EAES\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E'@\u002Futils\u002FAES.js'\u003C\u002Fspan\u003E \n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E { getToken } \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E'@\u002Futils\u002Fauth'\u003C\u002Fspan\u003E \n\u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E * \u003Cspan class=\"hljs-keyword\"\u003Eas\u003C\u002Fspan\u003E myValiDate \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"@\u002Futils\u002FformValidate\"\u003C\u002Fspan\u003E;\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cpre\u003E\u003Ccode class=\"hljs language-js copyable\" lang=\"js\"\u003E\u003Cspan class=\"hljs-comment\"\u003E\u002F**\n * 文件说明\n * \u003Cspan class=\"hljs-doctag\"\u003E@Author\u003C\u002Fspan\u003E: zhuds\n * \u003Cspan class=\"hljs-doctag\"\u003E@Description\u003C\u002Fspan\u003E: 模型资源上传弹窗\n    分为3个步骤\n    1.先将文件的基本表单信息上传给后端，获取文件信息的ID\n    2.然后将文件上传存储桶\n    3.等所有文件都上传完成后，再将上传完成后的文件信息传递给后端，注意，此时的请求头要戴上第1步获取的文件信息id\n * \u003Cspan class=\"hljs-doctag\"\u003E@Date\u003C\u002Fspan\u003E: 2\u002F28\u002F2022, 1:13:20 PM\n * \u003Cspan class=\"hljs-doctag\"\u003E@LastEditDate\u003C\u002Fspan\u003E: 2\u002F28\u002F2022, 1:13:20 PM\n * \u003Cspan class=\"hljs-doctag\"\u003E@LastEditor\u003C\u002Fspan\u003E:\n *\u002F\u003C\u002Fspan\u003E\n&#x3C;template\u003E\n  \u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"upload-model\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n    \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Eel-dialog\u003C\u002Fspan\u003E\n    \t\u003Cspan class=\"hljs-attr\"\u003E:visible.sync\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"isVisible\"\u003C\u002Fspan\u003E\n    \t@\u003Cspan class=\"hljs-attr\"\u003Eclose\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"close()\"\u003C\u002Fspan\u003E\n    \t\u003Cspan class=\"hljs-attr\"\u003E:show-close\u003C\u002Fspan\u003E =\u003Cspan class=\"hljs-string\"\u003E\"false\"\u003C\u002Fspan\u003E\n    \t\u003Cspan class=\"hljs-attr\"\u003E:close-on-click-modal\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"false\"\u003C\u002Fspan\u003E\n    \t\u003Cspan class=\"hljs-attr\"\u003Etop\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"10vh\"\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-attr\"\u003Ev-if\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"isVisible\"\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-attr\"\u003E:destroy-on-close\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"true\"\u003C\u002Fspan\u003E\n    \u003E\u003C\u002Fspan\u003E\n    \t\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eslot\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"title\"\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"header-title\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n    \t\t\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"icon\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E           \n    \t\t\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Espan\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E上传模型资源\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Espan\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n    \t\t\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ei\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"el-icon-close\"\u003C\u002Fspan\u003E  @\u003Cspan class=\"hljs-attr\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"close()\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ei\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\t\t\t       \n    \t\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Eel-form\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003E:label-position\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"labelPosition\"\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Elabel-width\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"80px\"\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003E:model\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"uploadFormData\"\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003Eref\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"form\"\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003E:rules\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"rules\"\u003C\u002Fspan\u003E\n      \u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Eel-form-item\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Elabel\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"别名\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Eel-input\u003C\u002Fspan\u003E   \u003Cspan class=\"hljs-attr\"\u003Esize\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"small\"\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Ev-model\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"uploadFormData.alias\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Eel-input\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Eel-form-item\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Eel-form-item\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Elabel\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"备注\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Eel-input\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"textarea\"\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Ev-model\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"uploadFormData.remark\"\u003C\u002Fspan\u003E  \u003Cspan class=\"hljs-attr\"\u003Esize\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"small\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Eel-input\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Eel-form-item\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Eel-form-item\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Elabel\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"资源文件\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Eel-button\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-attr\"\u003Estyle\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"marginRight:10px;\"\u003C\u002Fspan\u003E\n            @\u003Cspan class=\"hljs-attr\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"selectFile()\"\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-attr\"\u003Esize\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"mini\"\u003C\u002Fspan\u003E\n          \u003E\u003C\u002Fspan\u003E选择文件\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Eel-button\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Einput\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-attr\"\u003E:accept\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"acceptFileType\"\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-attr\"\u003Emultiple\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"multiple\"\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"file\"\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-attr\"\u003Eid\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"uploadInput\"\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-attr\"\u003Eref\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"uploadInput\"\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-attr\"\u003Ev-show\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"false\"\u003C\u002Fspan\u003E\n            @\u003Cspan class=\"hljs-attr\"\u003Echange\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"getAndFormatFile()\"\u003C\u002Fspan\u003E\n          \u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ei\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"tip\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E仅支持.gbl、.gltf、.fbx、.obj、.mtl、.hdr、.png、.jpg格式的文件\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ei\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ei\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"tip\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E单个文件的大小限制为128MB\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ei\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Eel-form-item\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Eel-form\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n\n      \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"file-list\"\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Ev-show\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"fileInfoList.length \u003E 0\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"file-item\"\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Ev-for\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"(item, index) in fileInfoList\"\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003E:key\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"index\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"icon\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"name\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E{{item.file.name}}\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"size\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E{{(item.file.size\u002F1024\u002F1024).toFixed(2)}}MB  \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"progress\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"bar\"\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003E:style\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"{width: item.fileUploadProgress}\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"rate\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E{{item.fileUploadProgress}}\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n\n\n          \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"delete-btn\"\u003C\u002Fspan\u003E @\u003Cspan class=\"hljs-attr\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"deleteFile(item, index)\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003Ex\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"custom-footer\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"info\"\u003C\u002Fspan\u003E @\u003Cspan class=\"hljs-attr\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"close()\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E取 消\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ebutton\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Ebutton\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Eclass\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"success\"\u003C\u002Fspan\u003E @\u003Cspan class=\"hljs-attr\"\u003Eclick\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"handleUplaod()\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E上传\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ebutton\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Eel-dialog\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Ediv\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Etemplate\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"javascript\"\u003E\n\n  \u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E{uploadModelSourceInfo, uploadModelSource, getMinioConfig} \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E'@\u002Fapi\u002Fmap'\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable constant_\"\u003EAES\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E'@\u002Futils\u002FAES.js'\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E { getToken } \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E'@\u002Futils\u002Fauth'\u003C\u002Fspan\u003E\n  \u003Cspan class=\"hljs-keyword\"\u003Eimport\u003C\u002Fspan\u003E * \u003Cspan class=\"hljs-keyword\"\u003Eas\u003C\u002Fspan\u003E myValiDate \u003Cspan class=\"hljs-keyword\"\u003Efrom\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-string\"\u003E\"@\u002Futils\u002FformValidate\"\u003C\u002Fspan\u003E;\n  \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EMinio\u003C\u002Fspan\u003E = \u003Cspan class=\"hljs-built_in\"\u003Erequire\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'minio'\u003C\u002Fspan\u003E)\n\n  \u003Cspan class=\"hljs-keyword\"\u003Eexport\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Edefault\u003C\u002Fspan\u003E {\n    \u003Cspan class=\"hljs-attr\"\u003Ename\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'UploadModelDialog'\u003C\u002Fspan\u003E,\n    \u003Cspan class=\"hljs-attr\"\u003Eprops\u003C\u002Fspan\u003E: {\n      \u003Cspan class=\"hljs-attr\"\u003EisVisible\u003C\u002Fspan\u003E: {\n        \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-title class_\"\u003EBoolean\u003C\u002Fspan\u003E,\n        \u003Cspan class=\"hljs-attr\"\u003Edefault\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E\n      },\n    },\n    \u003Cspan class=\"hljs-title function_\"\u003Edata\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E){\n      \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-attr\"\u003ElabelPosition\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'right'\u003C\u002Fspan\u003E,\n        \u003Cspan class=\"hljs-attr\"\u003EuploadFormData\u003C\u002Fspan\u003E: {\n          \u003Cspan class=\"hljs-attr\"\u003Ealias\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E''\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F服务名称\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-attr\"\u003Eremark\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E''\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F备注\u003C\u002Fspan\u003E\n        },\n        \u003Cspan class=\"hljs-attr\"\u003Erules\u003C\u002Fspan\u003E: {\n          \u003Cspan class=\"hljs-attr\"\u003EserviceName\u003C\u002Fspan\u003E: [{\n          \t\u003Cspan class=\"hljs-attr\"\u003Evalidator\u003C\u002Fspan\u003E: myValiDate.\u003Cspan class=\"hljs-property\"\u003EvalidateServiceName\u003C\u002Fspan\u003E,\n          \t\u003Cspan class=\"hljs-attr\"\u003Etrigger\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E\"blur\"\u003C\u002Fspan\u003E,\n          \t\u003Cspan class=\"hljs-attr\"\u003Erequired\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E,\n          }],\n        },\n        \u003Cspan class=\"hljs-attr\"\u003EacceptFileType\u003C\u002Fspan\u003E:\u003Cspan class=\"hljs-string\"\u003E\".glb,.gltf,.fbx,.obj,.mtl,.hdr,.png,.jpg, .mp4\"\u003C\u002Fspan\u003E,\n        \u003Cspan class=\"hljs-attr\"\u003EfileList\u003C\u002Fspan\u003E:[], \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F待上传的文件列表\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003EfileInfoList\u003C\u002Fspan\u003E: [], \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F格式化后的文件信息列表\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003EuserBucket\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-literal\"\u003Enull\u003C\u002Fspan\u003E,\n        \u003Cspan class=\"hljs-attr\"\u003EhttpQueue\u003C\u002Fspan\u003E: [], \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F上传文件的http队列\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003EallFileHasUpload\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F是否完成上传\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-attr\"\u003EmodelSourceInfoId\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E''\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F模型资源基本信息的id\u003C\u002Fspan\u003E\n      }\n    },\n\n    \u003Cspan class=\"hljs-attr\"\u003Ewatch\u003C\u002Fspan\u003E:{\n      \u003Cspan class=\"hljs-attr\"\u003EfileInfoList\u003C\u002Fspan\u003E: {\n        \u003Cspan class=\"hljs-title function_\"\u003Ehandler\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eval\u003C\u002Fspan\u003E){\n          \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F1.3所有文件都上传到存储桶后，将上传完成后的文件地址、文件名字同步后端\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(val.\u003Cspan class=\"hljs-property\"\u003Elength\u003C\u002Fspan\u003E &#x3C; \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E) \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E allFileHasUpload = val.\u003Cspan class=\"hljs-title function_\"\u003Eevery\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eitem, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n            \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E item.\u003Cspan class=\"hljs-property\"\u003EfileGetUrl\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003Elength\u003C\u002Fspan\u003E \u003E \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E\n          })\n         \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(allFileHasUpload) {\n           \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EallFileHasUpload\u003C\u002Fspan\u003E = allFileHasUpload\n           \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E {modelSourceInfoId} = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E\n           \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(modelSourceInfoId.\u003Cspan class=\"hljs-property\"\u003Elength\u003C\u002Fspan\u003E &#x3C; \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E) {\n             \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E\n           }\n           \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E url = process.\u003Cspan class=\"hljs-property\"\u003Eenv\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EVUE_APP_BASE_API\u003C\u002Fspan\u003E + \u003Cspan class=\"hljs-string\"\u003E\"\u002Fvector-map\u002FthreeDimensionalModelService\u002FinvokeMapService\"\u003C\u002Fspan\u003E\n           \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E files = val.\u003Cspan class=\"hljs-title function_\"\u003Emap\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eite, idx\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n             \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E {\n               \t\u003Cspan class=\"hljs-attr\"\u003EfileName\u003C\u002Fspan\u003E: ite.\u003Cspan class=\"hljs-property\"\u003Efile\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E,\n               \t\u003Cspan class=\"hljs-attr\"\u003EfileUrl\u003C\u002Fspan\u003E: ite.\u003Cspan class=\"hljs-property\"\u003EfileGetUrl\u003C\u002Fspan\u003E\n             }\n           })\n           \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EsyncAllUploadedFile\u003C\u002Fspan\u003E(url, files, modelSourceInfoId)\n         }\n\n        },\n        \u003Cspan class=\"hljs-attr\"\u003Edeep\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E\n      }\n    },\n\n    \u003Cspan class=\"hljs-title function_\"\u003Ecreated\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) {\n      \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EinitMinioClient\u003C\u002Fspan\u003E()\n    },\n\n    \u003Cspan class=\"hljs-title function_\"\u003EbeforeDestroy\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) {\n      \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(!\u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EallFileHasUpload\u003C\u002Fspan\u003E) {\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EclearFile\u003C\u002Fspan\u003E()\n      }\n    },\n\n    \u003Cspan class=\"hljs-attr\"\u003Emethods\u003C\u002Fspan\u003E:{\n       \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F创建存储桶\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003EinitMinioClient\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E){\n        \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { code, result, message } =  \u003Cspan class=\"hljs-variable constant_\"\u003EAES\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EdecryptToJSON\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003EgetMinioConfig\u003C\u002Fspan\u003E({}))\n        \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(!result || code !== \u003Cspan class=\"hljs-number\"\u003E200\u003C\u002Fspan\u003E) {\n        \t\u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003E$customMessage\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Eerror\u003C\u002Fspan\u003E({\u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'获取存储桶配置信息出错'\u003C\u002Fspan\u003E})\n        \t\u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E\n        }\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E {accessKey, bucketName, endPoint, secretKey} = result\n        \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002Fconsole.log({accessKey, bucketName, endPoint, secretKey})\u003C\u002Fspan\u003E\n\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E endPointStr = endPoint.\u003Cspan class=\"hljs-title function_\"\u003Esplit\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E\":\"\u003C\u002Fspan\u003E)[\u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E]\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E formatPort = \u003Cspan class=\"hljs-title class_\"\u003ENumber\u003C\u002Fspan\u003E(endPoint.\u003Cspan class=\"hljs-title function_\"\u003Esplit\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E\":\"\u003C\u002Fspan\u003E)[\u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E])\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E formatEndPoint = endPointStr.\u003Cspan class=\"hljs-title function_\"\u003Esplit\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'\u002F\u002F'\u003C\u002Fspan\u003E)[\u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E]\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EuserBucket\u003C\u002Fspan\u003E = bucketName\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EminioClient\u003C\u002Fspan\u003E = \u003Cspan class=\"hljs-keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EMinio\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title class_\"\u003EClient\u003C\u002Fspan\u003E({\n          \u003Cspan class=\"hljs-attr\"\u003EuseSSL\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E,\n          \u003Cspan class=\"hljs-attr\"\u003EpartSize\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'20M'\u003C\u002Fspan\u003E,\n          \u003Cspan class=\"hljs-attr\"\u003Eport\u003C\u002Fspan\u003E: formatPort,\n          \u003Cspan class=\"hljs-attr\"\u003EendPoint\u003C\u002Fspan\u003E: formatEndPoint,\n          accessKey,\n          secretKey\n        });\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E userBucket = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EuserBucket\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002FuserBucket只能作为字符串变量传入，不能作为其他变量的属性或者函数返回值，属于Minio的一个规定\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EminioClient\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EbucketExists\u003C\u002Fspan\u003E(userBucket, \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eerr\u003C\u002Fspan\u003E)=\u003E\u003C\u002Fspan\u003E {\n          \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (err &#x26;&#x26; err.\u003Cspan class=\"hljs-property\"\u003Ecode\u003C\u002Fspan\u003E == \u003Cspan class=\"hljs-string\"\u003E'NoSuchBucket'\u003C\u002Fspan\u003E) {\n            \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EminioClient\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EmakeBucket\u003C\u002Fspan\u003E(userBucket, \u003Cspan class=\"hljs-string\"\u003E'us-east-1'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eerr\u003C\u002Fspan\u003E)=\u003E\u003C\u002Fspan\u003E {\n              \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (err) {\n                \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable language_\"\u003Econsole\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Elog\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'创建存储桶失败'\u003C\u002Fspan\u003E, err)\n              }\n             \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F console.log('Bucket created successfully in \"us-east-1\".')\u003C\u002Fspan\u003E\n            })\n          }\u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E{\n            \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002Fconsole.log('存储桶存在')\u003C\u002Fspan\u003E\n          }\n        })\n      },\n\n      \u003Cspan class=\"hljs-title function_\"\u003Eclose\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eflag = \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E) {\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$emit(\u003Cspan class=\"hljs-string\"\u003E'close'\u003C\u002Fspan\u003E, flag)\n        \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F关闭弹窗时，如果文件没有上传完成，则清空文件\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(!\u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EallFileHasUpload\u003C\u002Fspan\u003E) {\n          \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EclearFile\u003C\u002Fspan\u003E()\n        }\n      },\n      \u003Cspan class=\"hljs-title function_\"\u003EselectFile\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) {\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E inputDOM = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003E$refs\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EuploadInput\u003C\u002Fspan\u003E\n        inputDOM.\u003Cspan class=\"hljs-title function_\"\u003Eclick\u003C\u002Fspan\u003E();\n      },\n\n      \u003Cspan class=\"hljs-title function_\"\u003EgetFileSize\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Efile\u003C\u002Fspan\u003E){\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E fileSize = \u003Cspan class=\"hljs-string\"\u003E''\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(file.\u003Cspan class=\"hljs-property\"\u003Esize\u003C\u002Fspan\u003E \u002F \u003Cspan class=\"hljs-number\"\u003E1024\u003C\u002Fspan\u003E &#x3C; \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E){\n          fileSize = file.\u003Cspan class=\"hljs-property\"\u003Esize\u003C\u002Fspan\u003E + \u003Cspan class=\"hljs-string\"\u003E'B'\u003C\u002Fspan\u003E\n        }\u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(file.\u003Cspan class=\"hljs-property\"\u003Esize\u003C\u002Fspan\u003E \u002F \u003Cspan class=\"hljs-number\"\u003E1024\u003C\u002Fspan\u003E \u002F\u003Cspan class=\"hljs-number\"\u003E1024\u003C\u002Fspan\u003E &#x3C; \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E){\n          fileSize = file.\u003Cspan class=\"hljs-property\"\u003Esize\u003C\u002Fspan\u003E + \u003Cspan class=\"hljs-string\"\u003E'KB'\u003C\u002Fspan\u003E\n        }\u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(file.\u003Cspan class=\"hljs-property\"\u003Esize\u003C\u002Fspan\u003E \u002F \u003Cspan class=\"hljs-number\"\u003E1024\u003C\u002Fspan\u003E \u002F\u003Cspan class=\"hljs-number\"\u003E1024\u003C\u002Fspan\u003E \u003E=\u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E){\n           fileSize = file.\u003Cspan class=\"hljs-property\"\u003Esize\u003C\u002Fspan\u003E + \u003Cspan class=\"hljs-string\"\u003E'MB'\u003C\u002Fspan\u003E\n        }\u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E{\n        }\n\n        \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E fileSize\n\n      },\n\n      \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F删除文件，并取消正在文件的上传\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-title function_\"\u003EdeleteFile\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003EfileInfo, index\u003C\u002Fspan\u003E){\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E[index] &#x26;&#x26; \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E[index].\u003Cspan class=\"hljs-title function_\"\u003Eabort\u003C\u002Fspan\u003E()\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E[index] &#x26;&#x26; \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Esplice\u003C\u002Fspan\u003E(index, \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E)\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Esplice\u003C\u002Fspan\u003E(index, \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E)\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Esplice\u003C\u002Fspan\u003E(index, \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E)\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EremoveRemoteFile\u003C\u002Fspan\u003E(fileInfo)\n      },\n\n      \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F清空文件并取消上传队列\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-title function_\"\u003EclearFile\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E) {\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EforEach\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eitem, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n          \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E[index] &#x26;&#x26; \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E[index].\u003Cspan class=\"hljs-title function_\"\u003Eabort\u003C\u002Fspan\u003E()\n          \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E[index] &#x26;&#x26; \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Esplice\u003C\u002Fspan\u003E(index, \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E)\n          \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EremoveRemoteFile\u003C\u002Fspan\u003E(item)\n        })\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E = []\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E = []\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileList\u003C\u002Fspan\u003E = []\n      },\n      \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F删除远程文件\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-title function_\"\u003EremoveRemoteFile\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003EfileInfo\u003C\u002Fspan\u003E){\n        \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E userBucket = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EuserBucket\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { fileUploadProgress, file} = fileInfo\n        \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E fileName = file.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E complete = fileUploadProgress === \u003Cspan class=\"hljs-string\"\u003E'100.00%'\u003C\u002Fspan\u003E ? \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E : \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(complete){\n         \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E. minioClient.\u003Cspan class=\"hljs-title function_\"\u003EremoveObject\u003C\u002Fspan\u003E(userBucket, fileName, \u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eerr\u003C\u002Fspan\u003E) {\n            \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (err) {\n              \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable language_\"\u003Econsole\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Elog\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'Unable to remove object'\u003C\u002Fspan\u003E, err)\n            }\n            \u003Cspan class=\"hljs-variable language_\"\u003Econsole\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Elog\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'Removed the object'\u003C\u002Fspan\u003E)\n          })\n        }\u003Cspan class=\"hljs-keyword\"\u003Eelse\u003C\u002Fspan\u003E{\n          \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EminioClient\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EremoveIncompleteUpload\u003C\u002Fspan\u003E(userBucket, fileName, \u003Cspan class=\"hljs-keyword\"\u003Efunction\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eerr\u003C\u002Fspan\u003E) {\n            \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (err) {\n              \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable language_\"\u003Econsole\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Elog\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'Unable to remove incomplete object'\u003C\u002Fspan\u003E, err)\n            }\n            \u003Cspan class=\"hljs-variable language_\"\u003Econsole\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Elog\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'Incomplete object removed successfully.'\u003C\u002Fspan\u003E)\n          })\n        }\n      },\n      \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F格式化文件并创建上传队列\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-title function_\"\u003EgetAndFormatFile\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E){\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E files = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003E$refs\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EuploadInput\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003Efiles\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E userBucket = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EuserBucket\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(files.\u003Cspan class=\"hljs-property\"\u003Elength\u003C\u002Fspan\u003E \u003E \u003Cspan class=\"hljs-number\"\u003E6\u003C\u002Fspan\u003E) {\n          \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$message({\n            \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`最大只能上传6个文件`\u003C\u002Fspan\u003E,\n            \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'warning'\u003C\u002Fspan\u003E\n          })\n          \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E\n        }\n        files.\u003Cspan class=\"hljs-title function_\"\u003EforEach\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Efile, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n          \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E ((file.\u003Cspan class=\"hljs-property\"\u003Esize\u003C\u002Fspan\u003E \u002F \u003Cspan class=\"hljs-number\"\u003E1024\u003C\u002Fspan\u003E \u002F \u003Cspan class=\"hljs-number\"\u003E1024\u003C\u002Fspan\u003E).\u003Cspan class=\"hljs-title function_\"\u003EtoFixed\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E) \u003E \u003Cspan class=\"hljs-number\"\u003E128\u003C\u002Fspan\u003E) { \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F单个文件限制大小为128MB\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$message({\n              \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`文件大小不能超过128MB`\u003C\u002Fspan\u003E,\n              \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'warning'\u003C\u002Fspan\u003E\n            })\n            \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E\n          }\n          \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F创建文件上传的url并格式化文件信息\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EminioClient\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EpresignedPutObject\u003C\u002Fspan\u003E(userBucket, file.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E24\u003C\u002Fspan\u003E * \u003Cspan class=\"hljs-number\"\u003E60\u003C\u002Fspan\u003E * \u003Cspan class=\"hljs-number\"\u003E60\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eerr, presignedUrl\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n            \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (err) {\n              \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$message({\n                \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`服务器连接超时`\u003C\u002Fspan\u003E,\n                \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'error'\u003C\u002Fspan\u003E\n              })\n              \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E err\n            }\n            \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E fileIcon = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EgetFileIcon\u003C\u002Fspan\u003E(file)\n            \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E fileUploadProgress = \u003Cspan class=\"hljs-string\"\u003E'0%'\u003C\u002Fspan\u003E\n            \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Epush\u003C\u002Fspan\u003E({\n              file, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F文件\u003C\u002Fspan\u003E\n              fileIcon, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F文件对应的图标 className\u003C\u002Fspan\u003E\n              fileUploadProgress, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F文件上传进度\u003C\u002Fspan\u003E\n              \u003Cspan class=\"hljs-attr\"\u003EfilePutUrl\u003C\u002Fspan\u003E: presignedUrl, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F文件上传put方法的url\u003C\u002Fspan\u003E\n              \u003Cspan class=\"hljs-attr\"\u003EfileGetUrl\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E''\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F文件下载的url\u003C\u002Fspan\u003E\n            })\n          })\n        })\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileList\u003C\u002Fspan\u003E = [...\u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E]\n      },\n\n      \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F1.上传文件到存储桶\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-keyword\"\u003Easync\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003EhandleUplaod\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003E\u003C\u002Fspan\u003E){\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E _this = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003Elength\u003C\u002Fspan\u003E &#x3C; \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E) {\n          \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$message({\n            \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`请先选择文件`\u003C\u002Fspan\u003E,\n            \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'warning'\u003C\u002Fspan\u003E\n          })\n          \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E\n        }\n        \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F1.1先上传文件的基本表单信息，获取文件信息的id\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-keyword\"\u003Etry\u003C\u002Fspan\u003E{\n          \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E {remark, alias} = _this.\u003Cspan class=\"hljs-property\"\u003EuploadFormData\u003C\u002Fspan\u003E\n          \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E res = \u003Cspan class=\"hljs-keyword\"\u003Eawait\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title function_\"\u003EuploadModelSourceInfo\u003C\u002Fspan\u003E({remark, \u003Cspan class=\"hljs-attr\"\u003EserviceName\u003C\u002Fspan\u003E: alias})\n          _this.\u003Cspan class=\"hljs-property\"\u003EmodelSourceInfoId\u003C\u002Fspan\u003E = res.\u003Cspan class=\"hljs-property\"\u003Emessage\u003C\u002Fspan\u003E\n        }\u003Cspan class=\"hljs-keyword\"\u003Ecatch\u003C\u002Fspan\u003E(error){\n          \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(error) {\n            _this.$message({\n              \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E`上传失败，请检查服务`\u003C\u002Fspan\u003E,\n              \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'error'\u003C\u002Fspan\u003E\n            })\n            \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E\n          }\n        }\n\n        \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F1.2开始将模型资源上传到远程的存储桶\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EforEach\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eitem, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n          \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E {file, filePutUrl} = item\n          \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E config = {\n            file,\n            filePutUrl,\n            \u003Cspan class=\"hljs-attr\"\u003EcustomHeader\u003C\u002Fspan\u003E:{\n              \u003Cspan class=\"hljs-string\"\u003E\"X-FILENAME\"\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-built_in\"\u003EencodeURIComponent\u003C\u002Fspan\u003E(file.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E),\n              \u003Cspan class=\"hljs-string\"\u003E\"X-Access-Token\"\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-title function_\"\u003EgetToken\u003C\u002Fspan\u003E()\n            },\n            \u003Cspan class=\"hljs-attr\"\u003EonUploadProgress\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003E{progressEvent, uploadingFile}\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n              \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E progress = (progressEvent.\u003Cspan class=\"hljs-property\"\u003Eloaded\u003C\u002Fspan\u003E \u002F progressEvent.\u003Cspan class=\"hljs-property\"\u003Etotal\u003C\u002Fspan\u003E).\u003Cspan class=\"hljs-title function_\"\u003EtoFixed\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E)\n              \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EupdateFileUploadProgress\u003C\u002Fspan\u003E(uploadingFile, progress)\n            },\n            \u003Cspan class=\"hljs-attr\"\u003EonUploaded\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003E{result, uploadedFile}\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n              \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EupdateFileDownloadUrl\u003C\u002Fspan\u003E(uploadedFile)\n            },\n            \u003Cspan class=\"hljs-attr\"\u003EonError\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003E{error, errorFile}\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n\n            }\n          }\n\n          \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E httpInstance = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EcreateUploadHttp\u003C\u002Fspan\u003E(config)\n          \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Epush\u003C\u002Fspan\u003E(httpInstance)\n        })\n      },\n\n      \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F1更新对应文件的上传进度\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-title function_\"\u003EupdateFileUploadProgress\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003EuploadingFile, progress\u003C\u002Fspan\u003E) {\n        \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002Fconsole.log({uploadingFile, progress})\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EforEach\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eitem, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n          \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(item.\u003Cspan class=\"hljs-property\"\u003Efile\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E === uploadingFile.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E){\n            item.\u003Cspan class=\"hljs-property\"\u003EfileUploadProgress\u003C\u002Fspan\u003E = (\u003Cspan class=\"hljs-title class_\"\u003ENumber\u003C\u002Fspan\u003E(progress)*\u003Cspan class=\"hljs-number\"\u003E100\u003C\u002Fspan\u003E).\u003Cspan class=\"hljs-title function_\"\u003EtoFixed\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-number\"\u003E2\u003C\u002Fspan\u003E) + \u003Cspan class=\"hljs-string\"\u003E'%'\u003C\u002Fspan\u003E\n          }\n        })\n      },\n\n      \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F更新上传完成文件的下载地址\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-title function_\"\u003EupdateFileDownloadUrl\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003EuploadedFile\u003C\u002Fspan\u003E){\n        \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E userBucket = \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EuserBucket\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EforEach\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eitem, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n          \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(item.\u003Cspan class=\"hljs-property\"\u003Efile\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E === uploadedFile.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E){\n            \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EminioClient\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EpresignedGetObject\u003C\u002Fspan\u003E(userBucket, uploadedFile.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E24\u003C\u002Fspan\u003E*\u003Cspan class=\"hljs-number\"\u003E60\u003C\u002Fspan\u003E*\u003Cspan class=\"hljs-number\"\u003E60\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Eerr, presignedUrl\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n              \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (err) \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-variable language_\"\u003Econsole\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Elog\u003C\u002Fspan\u003E(err)\n              item.\u003Cspan class=\"hljs-property\"\u003EfileGetUrl\u003C\u002Fspan\u003E = presignedUrl\n             \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F console.log(presignedUrl)\u003C\u002Fspan\u003E\n            })\n          }\n        })\n      },\n\n      \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F同步已上传的文件到后端\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-title function_\"\u003EsyncAllUploadedFile\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Eurl, files, modelSourceInfoId\u003C\u002Fspan\u003E){\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E xhr = \u003Cspan class=\"hljs-keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EXMLHttpRequest\u003C\u002Fspan\u003E()\n        xhr.\u003Cspan class=\"hljs-property\"\u003Eonload\u003C\u002Fspan\u003E = \u003Cspan class=\"hljs-function\"\u003E() =\u003E\u003C\u002Fspan\u003E {\n          \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (xhr.\u003Cspan class=\"hljs-property\"\u003Estatus\u003C\u002Fspan\u003E === \u003Cspan class=\"hljs-number\"\u003E200\u003C\u002Fspan\u003E &#x26;&#x26; xhr.\u003Cspan class=\"hljs-property\"\u003Estatus\u003C\u002Fspan\u003E &#x3C; \u003Cspan class=\"hljs-number\"\u003E300\u003C\u002Fspan\u003E || xhr.\u003Cspan class=\"hljs-property\"\u003Estatus\u003C\u002Fspan\u003E === \u003Cspan class=\"hljs-number\"\u003E304\u003C\u002Fspan\u003E) {\n            \u003Cspan class=\"hljs-keyword\"\u003Etry\u003C\u002Fspan\u003E {\n             \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E res = \u003Cspan class=\"hljs-title class_\"\u003EJSON\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Eparse\u003C\u002Fspan\u003E(xhr.\u003Cspan class=\"hljs-property\"\u003EresponseText\u003C\u002Fspan\u003E)\n             \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E(res &#x26;&#x26; res.\u003Cspan class=\"hljs-property\"\u003Ecode\u003C\u002Fspan\u003E === \u003Cspan class=\"hljs-number\"\u003E200\u003C\u002Fspan\u003E){\n               \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$message({\n                 \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'上传完成'\u003C\u002Fspan\u003E,\n                 \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'success'\u003C\u002Fspan\u003E\n               })\n              \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F setTimeout(() =\u003E {\u003C\u002Fspan\u003E\n                 \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$emit(\u003Cspan class=\"hljs-string\"\u003E'close'\u003C\u002Fspan\u003E)\n                 \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileInfoList\u003C\u002Fspan\u003E = []\n                 \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EfileList\u003C\u002Fspan\u003E = []\n                 \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-property\"\u003EhttpQueue\u003C\u002Fspan\u003E = []\n              \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F }, 1000)\u003C\u002Fspan\u003E\n             }\n            } \u003Cspan class=\"hljs-keyword\"\u003Ecatch\u003C\u002Fspan\u003E(error) {\n             \u003Cspan class=\"hljs-variable language_\"\u003Ethis\u003C\u002Fspan\u003E.$message({\n               \u003Cspan class=\"hljs-attr\"\u003Emessage\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'上传失败，请检查服务'\u003C\u002Fspan\u003E,\n               \u003Cspan class=\"hljs-attr\"\u003Etype\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-string\"\u003E'error'\u003C\u002Fspan\u003E\n             })\n            }\n          }\n        }\n        xhr.\u003Cspan class=\"hljs-title function_\"\u003Eopen\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E\"post\"\u003C\u002Fspan\u003E, url, \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E)\n        xhr.\u003Cspan class=\"hljs-title function_\"\u003EsetRequestHeader\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'Content-Type'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-string\"\u003E'application\u002Fjson'\u003C\u002Fspan\u003E)\n        xhr.\u003Cspan class=\"hljs-title function_\"\u003EsetRequestHeader\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'X-Access-Token'\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-title function_\"\u003EgetToken\u003C\u002Fspan\u003E())\n        \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F将前面1.1获取文件信息的id作为头信息传递到后端\u003C\u002Fspan\u003E\n        xhr.\u003Cspan class=\"hljs-title function_\"\u003EsetRequestHeader\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E'ThreeDimensionalModel-ServiceID'\u003C\u002Fspan\u003E, modelSourceInfoId)\n        xhr.\u003Cspan class=\"hljs-title function_\"\u003Esend\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-title class_\"\u003EJSON\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Estringify\u003C\u002Fspan\u003E(files))\n      },\n\n      \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F获取文件类型图标class\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-title function_\"\u003EgetFileIcon\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Efile\u003C\u002Fspan\u003E) {\n        \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E { type } = file\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E icon = \u003Cspan class=\"hljs-string\"\u003E''\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E icon\n      },\n\n      \u003Cspan class=\"hljs-comment\"\u003E\u002F\u002F创建上传文件的http\u003C\u002Fspan\u003E\n      \u003Cspan class=\"hljs-title function_\"\u003EcreateUploadHttp\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-params\"\u003Econfig\u003C\u002Fspan\u003E){\n        \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E {file, filePutUrl, customHeader, onUploadProgress, onUploaded, onError} = config\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E fileName = file.\u003Cspan class=\"hljs-property\"\u003Ename\u003C\u002Fspan\u003E\n        \u003Cspan class=\"hljs-keyword\"\u003Elet\u003C\u002Fspan\u003E http = \u003Cspan class=\"hljs-keyword\"\u003Enew\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-title class_\"\u003EXMLHttpRequest\u003C\u002Fspan\u003E();\n        http.\u003Cspan class=\"hljs-property\"\u003Eupload\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003EaddEventListener\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E\"progress\"\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Ee\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E {\n          \u003Cspan class=\"hljs-title function_\"\u003EonUploadProgress\u003C\u002Fspan\u003E({\n            \u003Cspan class=\"hljs-attr\"\u003EprogressEvent\u003C\u002Fspan\u003E: e,\n            \u003Cspan class=\"hljs-attr\"\u003EuploadingFile\u003C\u002Fspan\u003E: file\n          })\n        }, \u003Cspan class=\"hljs-literal\"\u003Efalse\u003C\u002Fspan\u003E)\n\n        http.\u003Cspan class=\"hljs-property\"\u003Eonload\u003C\u002Fspan\u003E = \u003Cspan class=\"hljs-function\"\u003E() =\u003E\u003C\u002Fspan\u003E {\n          \u003Cspan class=\"hljs-keyword\"\u003Eif\u003C\u002Fspan\u003E (http.\u003Cspan class=\"hljs-property\"\u003Estatus\u003C\u002Fspan\u003E === \u003Cspan class=\"hljs-number\"\u003E200\u003C\u002Fspan\u003E &#x26;&#x26; http.\u003Cspan class=\"hljs-property\"\u003Estatus\u003C\u002Fspan\u003E &#x3C; \u003Cspan class=\"hljs-number\"\u003E300\u003C\u002Fspan\u003E || http.\u003Cspan class=\"hljs-property\"\u003Estatus\u003C\u002Fspan\u003E === \u003Cspan class=\"hljs-number\"\u003E304\u003C\u002Fspan\u003E) {\n            \u003Cspan class=\"hljs-keyword\"\u003Etry\u003C\u002Fspan\u003E {\n              \u003Cspan class=\"hljs-keyword\"\u003Econst\u003C\u002Fspan\u003E result = http.\u003Cspan class=\"hljs-property\"\u003EresponseURL\u003C\u002Fspan\u003E\n              \u003Cspan class=\"hljs-title function_\"\u003EonUploaded\u003C\u002Fspan\u003E({ result, \u003Cspan class=\"hljs-attr\"\u003EuploadedFile\u003C\u002Fspan\u003E: file})\n            } \u003Cspan class=\"hljs-keyword\"\u003Ecatch\u003C\u002Fspan\u003E(error) {\n              \u003Cspan class=\"hljs-title function_\"\u003EonError\u003C\u002Fspan\u003E({ error, \u003Cspan class=\"hljs-attr\"\u003EerrorFile\u003C\u002Fspan\u003E: file})\n            }\n          }\n        }\n        http.\u003Cspan class=\"hljs-title function_\"\u003Eopen\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E\"PUT\"\u003C\u002Fspan\u003E, filePutUrl, \u003Cspan class=\"hljs-literal\"\u003Etrue\u003C\u002Fspan\u003E);\n        \u003Cspan class=\"hljs-title class_\"\u003EObject\u003C\u002Fspan\u003E.\u003Cspan class=\"hljs-title function_\"\u003Ekeys\u003C\u002Fspan\u003E(customHeader).\u003Cspan class=\"hljs-title function_\"\u003EforEach\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-function\"\u003E(\u003Cspan class=\"hljs-params\"\u003Ekey, index\u003C\u002Fspan\u003E) =\u003E\u003C\u002Fspan\u003E{\n          http.\u003Cspan class=\"hljs-title function_\"\u003EsetRequestHeader\u003C\u002Fspan\u003E(key, customHeader[key])\n        })\n        http.\u003Cspan class=\"hljs-title function_\"\u003Esend\u003C\u002Fspan\u003E(file);\n        \u003Cspan class=\"hljs-keyword\"\u003Ereturn\u003C\u002Fspan\u003E http\n      }\n\n    }\n  }\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Escript\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"xml\"\u003E\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u003Cspan class=\"hljs-name\"\u003Estyle\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Escoped\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-attr\"\u003Elang\u003C\u002Fspan\u003E=\u003Cspan class=\"hljs-string\"\u003E\"scss\"\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"css\"\u003E\n\n  \u003Cspan class=\"hljs-selector-class\"\u003E.header-title\u003C\u002Fspan\u003E {\n  \u002F\u002F  \u003Cspan class=\"hljs-attribute\"\u003Eheight\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E24px\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-attribute\"\u003Eborder-bottom\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E1px\u003C\u002Fspan\u003E solid \u003Cspan class=\"hljs-number\"\u003E#EFEFEF\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-attribute\"\u003Epadding-bottom\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E20px\u003C\u002Fspan\u003E;\n    \u002F\u002F\u003Cspan class=\"hljs-attribute\"\u003Eoutline\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E1px\u003C\u002Fspan\u003E solid red;\n    \u003Cspan class=\"hljs-selector-class\"\u003E.icon\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-attribute\"\u003Ewidth\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E26px\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-attribute\"\u003Eheight\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E26px\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-attribute\"\u003Ebackground-image\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-built_in\"\u003Eurl\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-string\"\u003E..\u002Fimages\u002Ficon_upload.png\u003C\u002Fspan\u003E);\n      \u003Cspan class=\"hljs-attribute\"\u003Efloat\u003C\u002Fspan\u003E: left;\n      \u003Cspan class=\"hljs-attribute\"\u003Ebackground-size\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E100%\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E100%\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-attribute\"\u003Emargin-right\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E18px\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-attribute\"\u003Emargin-left\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E10px\u003C\u002Fspan\u003E;\n    }\n    \u003Cspan class=\"hljs-selector-tag\"\u003Espan\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-attribute\"\u003Efont-size\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E23px\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-attribute\"\u003Efont-family\u003C\u002Fspan\u003E: Source Han Sans CN;\n      \u003Cspan class=\"hljs-attribute\"\u003Efont-weight\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E500\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-attribute\"\u003Ecolor\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E#333333\u003C\u002Fspan\u003E;\n    }\n    \u003Cspan class=\"hljs-selector-tag\"\u003Ei\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-attribute\"\u003Efloat\u003C\u002Fspan\u003E: right;\n      \u003Cspan class=\"hljs-attribute\"\u003Efont-size\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E16px\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-attribute\"\u003Ecolor\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-built_in\"\u003Ergba\u003C\u002Fspan\u003E(\u003Cspan class=\"hljs-number\"\u003E176\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E176\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E176\u003C\u002Fspan\u003E, \u003Cspan class=\"hljs-number\"\u003E1\u003C\u002Fspan\u003E);\n      \u003Cspan class=\"hljs-attribute\"\u003Ecursor\u003C\u002Fspan\u003E: pointer;\n      &#x26;\u003Cspan class=\"hljs-selector-pseudo\"\u003E:hover\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-attribute\"\u003Ecolor\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E#0069D5\u003C\u002Fspan\u003E ;\n      }\n    }\n  }\n  \u003Cspan class=\"hljs-selector-class\"\u003E.tip\u003C\u002Fspan\u003E {\n    \u003Cspan class=\"hljs-attribute\"\u003Efont-size\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E12px\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-attribute\"\u003Edisplay\u003C\u002Fspan\u003E: block;\n  }\n  \u003Cspan class=\"hljs-selector-class\"\u003E.file-list\u003C\u002Fspan\u003E {\n    \u003Cspan class=\"hljs-attribute\"\u003Ebox-sizing\u003C\u002Fspan\u003E: border-box;\n    \u003Cspan class=\"hljs-attribute\"\u003Epadding\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E5px\u003C\u002Fspan\u003E;\n   \u002F\u002F \u003Cspan class=\"hljs-attribute\"\u003Eborder\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E1px\u003C\u002Fspan\u003E solid red;\n   \u002F\u002F \u003Cspan class=\"hljs-attribute\"\u003Ewidth\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E840px\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-attribute\"\u003Emargin\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E5px\u003C\u002Fspan\u003E auto;\n    \u003Cspan class=\"hljs-attribute\"\u003Emargin-left\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E80px\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-selector-class\"\u003E.file-item\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-attribute\"\u003Emin-height\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E32px\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-attribute\"\u003Edisplay\u003C\u002Fspan\u003E: flex;\n      \u003Cspan class=\"hljs-attribute\"\u003Ejustify-content\u003C\u002Fspan\u003E: flex-start;\n      \u003Cspan class=\"hljs-attribute\"\u003Ealign-items\u003C\u002Fspan\u003E: center;\n      \u003Cspan class=\"hljs-attribute\"\u003Efont-size\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E12px\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-selector-tag\"\u003Ediv\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-attribute\"\u003Emargin-right\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E15px\u003C\u002Fspan\u003E;\n        \u003Cspan class=\"hljs-attribute\"\u003Etext-align\u003C\u002Fspan\u003E: left;\n      }\n      \u003Cspan class=\"hljs-selector-class\"\u003E.name\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-attribute\"\u003Ewidth\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E200px\u003C\u002Fspan\u003E;\n      }\n      \u003Cspan class=\"hljs-selector-class\"\u003E.size\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-attribute\"\u003Ewidth\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E60px\u003C\u002Fspan\u003E;\n      }\n      \u003Cspan class=\"hljs-selector-class\"\u003E.progress\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-attribute\"\u003Ewidth\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E180px\u003C\u002Fspan\u003E;\n        \u003Cspan class=\"hljs-attribute\"\u003Eheight\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E8px\u003C\u002Fspan\u003E;\n        \u003Cspan class=\"hljs-attribute\"\u003Eborder-radius\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E4px\u003C\u002Fspan\u003E;\n        \u003Cspan class=\"hljs-attribute\"\u003Ebackground-color\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E#E2E2E2\u003C\u002Fspan\u003E;\n        \u003Cspan class=\"hljs-selector-class\"\u003E.bar\u003C\u002Fspan\u003E {\n          \u003Cspan class=\"hljs-attribute\"\u003Ewidth\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E50%\u003C\u002Fspan\u003E;\n          \u003Cspan class=\"hljs-attribute\"\u003Eheight\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E8px\u003C\u002Fspan\u003E;\n          \u003Cspan class=\"hljs-attribute\"\u003Eborder-radius\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E4px\u003C\u002Fspan\u003E;\n          \u003Cspan class=\"hljs-attribute\"\u003Ebackground-color\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E#13A763\u003C\u002Fspan\u003E;\n        }\n      }\n      \u003Cspan class=\"hljs-selector-class\"\u003E.rate\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-attribute\"\u003Ewidth\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E60px\u003C\u002Fspan\u003E;\n       \u002F\u002F \u003Cspan class=\"hljs-attribute\"\u003Eborder\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E1px\u003C\u002Fspan\u003E solid red;\n\n      }\n      \u003Cspan class=\"hljs-selector-class\"\u003E.delete-btn\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-attribute\"\u003Ecursor\u003C\u002Fspan\u003E: pointer;\n        \u003Cspan class=\"hljs-attribute\"\u003Efont-size\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E16px\u003C\u002Fspan\u003E;\n      }\n    }\n  }\n\n  \u003Cspan class=\"hljs-selector-class\"\u003E.custom-footer\u003C\u002Fspan\u003E {\n   \u002F\u002F \u003Cspan class=\"hljs-attribute\"\u003Eborder\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E1px\u003C\u002Fspan\u003E solid red;\n    \u003Cspan class=\"hljs-attribute\"\u003Edisplay\u003C\u002Fspan\u003E: flex;\n    \u003Cspan class=\"hljs-attribute\"\u003Ejustify-content\u003C\u002Fspan\u003E: space-evenly;\n    \u003Cspan class=\"hljs-attribute\"\u003Ealign-items\u003C\u002Fspan\u003E: center;\n    \u003Cspan class=\"hljs-attribute\"\u003Ewidth\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E100%\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-attribute\"\u003Eheight\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E80px\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-attribute\"\u003Ebackground-color\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E#fff\u003C\u002Fspan\u003E;\n    \u002F\u002F\u003Cspan class=\"hljs-attribute\"\u003Ebox-shadow\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E0px\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E1px\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0px\u003C\u002Fspan\u003E \u003Cspan class=\"hljs-number\"\u003E0px\u003C\u002Fspan\u003E red;\n    \u003Cspan class=\"hljs-attribute\"\u003Eborder-top\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E1px\u003C\u002Fspan\u003E solid \u003Cspan class=\"hljs-number\"\u003E#efefef\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-attribute\"\u003Ez-index\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E10\u003C\u002Fspan\u003E;\n    \u003Cspan class=\"hljs-selector-tag\"\u003Ebutton\u003C\u002Fspan\u003E {\n      \u003Cspan class=\"hljs-attribute\"\u003Ewidth\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E90px\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-attribute\"\u003Eheight\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E40px\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-attribute\"\u003Eborder-radius\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E4px\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-attribute\"\u003Eborder\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-attribute\"\u003Efont-size\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E16px\u003C\u002Fspan\u003E;\n      \u003Cspan class=\"hljs-attribute\"\u003Efont-family\u003C\u002Fspan\u003E: Source Han Sans CN;\n      &#x26;\u003Cspan class=\"hljs-selector-pseudo\"\u003E:focus\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-attribute\"\u003Eborder\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n        \u003Cspan class=\"hljs-attribute\"\u003Eoutline\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E0\u003C\u002Fspan\u003E;\n      }\n\n      &#x26;\u003Cspan class=\"hljs-selector-class\"\u003E.info\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-attribute\"\u003Ecolor\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E#8f8f8f\u003C\u002Fspan\u003E;\n        \u003Cspan class=\"hljs-attribute\"\u003Ebackground\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E#e2e2e2\u003C\u002Fspan\u003E;\n        &#x26;\u003Cspan class=\"hljs-selector-pseudo\"\u003E:hover\u003C\u002Fspan\u003E{\n          \u003Cspan class=\"hljs-attribute\"\u003Ebackground-color\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E#A6A9AD\u003C\u002Fspan\u003E;\n          \u003Cspan class=\"hljs-attribute\"\u003Ecursor\u003C\u002Fspan\u003E: pointer;\n          \u003Cspan class=\"hljs-attribute\"\u003Ecolor\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E#fff\u003C\u002Fspan\u003E;\n        }\n      }\n      &#x26;\u003Cspan class=\"hljs-selector-class\"\u003E.success\u003C\u002Fspan\u003E {\n        \u003Cspan class=\"hljs-attribute\"\u003Ebackground\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E#12a763\u003C\u002Fspan\u003E;\n        \u003Cspan class=\"hljs-attribute\"\u003Ecolor\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E#fff\u003C\u002Fspan\u003E;\n        &#x26;\u003Cspan class=\"hljs-selector-pseudo\"\u003E:hover\u003C\u002Fspan\u003E{\n          \u003Cspan class=\"hljs-attribute\"\u003Ecursor\u003C\u002Fspan\u003E: pointer;\n          \u003Cspan class=\"hljs-attribute\"\u003Ebackground-color\u003C\u002Fspan\u003E: \u003Cspan class=\"hljs-number\"\u003E#73C132\u003C\u002Fspan\u003E;\n        }\n      }\n    }\n  }\n\u003C\u002Fspan\u003E\u003Cspan class=\"hljs-tag\"\u003E&#x3C;\u002F\u003Cspan class=\"hljs-name\"\u003Estyle\u003C\u002Fspan\u003E\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\n\n\u003Cspan class=\"copy-code-btn\"\u003E复制代码\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Ch1 data-id=\"heading-11\"\u003E源码分享\u003C\u002Fh1\u003E\n\u003Cp\u003E其实一开始我是想提供一个demo的，发现这个东西与产品功能强绑定，没有测试的服务地址和存储桶，也无法做出一个开放的案例\u003C\u002Fp\u003E\n\u003Cp\u003E所以上面的代码只是给大家提供一种实现方式和思路，里面具体的细节处理我做的比较复杂\u003C\u002Fp\u003E\n\u003Cp\u003E如果有不懂的地方，评论区聊一聊\u003C\u002Fp\u003E",hitArticleCache:c,relatedLoaded:a,dynamicDataReady:a,version:j,actionType:{FETCH:"view\u002Fcolumn\u002FFETCH",FETCH_RELATED:"view\u002Fcolumn\u002FFETCH_RELATED",FETCH_RECOMMEND:"view\u002Fcolumn\u002FFETCH_RECOMMEND",FETCH_ADDITIONAL:"view\u002Fcolumn\u002FFETCH_ADDITIONAL",FETCH_SIDEBAR_ADENTRY:"view\u002Fcolumn\u002FFETCH_SIDEBAR_ADENTRY",FETCH_AUTHOR_EXTRA:"view\u002Fcolumn\u002FFETCH_AUTHOR_EXTRA",RESET:"view\u002Fcolumn\u002FRESET"},recommendedArticleList:{list:[{id:"7118987709477027847",screenshot:j,liked:a,article_id:"7118987709477027847",article_info:{article_id:"7118987709477027847",user_id:"4353721774379054",category_id:"6809637767543259144",tag_ids:[6809640407484334000,6809640398105870000],visible_level:d,link_url:e,cover_image:e,is_gfw:d,title:"试试S3+minio进行大文件上传",brief_content:"一、什么是Amazon S3 Amazon S3 是一种对象存储服务，提供行业领先的可扩展性、数据可用性、安全性和性能，他会将数据以对向行驶存储在存储桶中，对象指的是一个文件和描述该文件的任何元数据，",is_english:d,is_original:g,user_index:5.903724962429483,original_type:d,original_author:e,content:e,ctime:"1657518554",mtime:"1657537169",rtime:"1657522487",draft_id:"7118984682917593101",view_count:1857,collect_count:8,digg_count:9,comment_count:t,hot_index:105,is_hot:d,rank_index:.00085473,status:s,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:s},author_user_info:{user_id:"4353721774379054",user_name:"西陵",company:"百度",job_title:p,avatar_large:"https:\u002F\u002Fp9-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F0f6c751fcf811104fed1c534100dcb4a~300x300.image",level:d,description:e,followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:884,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637767543259144",category_name:p,category_url:"frontend",rank:s,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F8c95587526f346c0.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F1c40f5eaba561e32.png",ctime:1457483942,mtime:1432503190,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:s,id:"6809637767543259144",name:p,title:p,alias:"frontend"},tags:[{entriesCount:j,subscribed:a,id:"6809640407484334093",tag_id:"6809640407484334093",tag_name:p,color:"#60ADFF",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Fbac28828a49181c34110.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:g,ctime:1435971546,mtime:1688404562,id_type:9,tag_alias:e,post_article_count:387321,concern_user_count:654910,title:p,tagId:"6809640407484334093",articleCount:387321,subscribersCount:654910,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809640398105870343",tag_id:"6809640398105870343",tag_name:"JavaScript",color:"#616161",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002F5d70fd6af940df373834.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1435884803,mtime:1688403743,id_type:9,tag_alias:e,post_article_count:130023,concern_user_count:513974,title:"JavaScript",tagId:"6809640398105870343",articleCount:130023,subscribersCount:513974,createdAt:b,updatedAt:b}],user_interact:{id:7118987709477028000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"试试S3+minio进行大文件上传",user:{id:"4353721774379054",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"4353721774379054",user_name:"西陵",company:"百度",job_title:p,avatar_large:"https:\u002F\u002Fp9-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F0f6c751fcf811104fed1c534100dcb4a~300x300.image",description:e,followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:884,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:p,roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"西陵",blogAddress:j,selfDescription:e,beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp9-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F0f6c751fcf811104fed1c534100dcb4a~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:t,isEvent:j,abstract:"一、什么是Amazon S3 Amazon S3 是一种对象存储服务，提供行业领先的可扩展性、数据可用性、安全性和性能，他会将数据以对向行驶存储在存储桶中，对象指的是一个文件和描述该文件的任何元数据，",latestCommentAt:b,createdAt:new Date(1657518554000),updatedAt:b,isTopicEvent:a,likedCount:9,likeCount:9,content:e,originalUrl:e,type:"post",collected:a,viewsCount:1857,username:"西陵",viewerHasLiked:a,draftId:"7118984682917593101",collectionCount:8},{id:"7117884707542401055",screenshot:j,liked:a,article_id:"7117884707542401055",article_info:{article_id:"7117884707542401055",user_id:"1693713856212615",category_id:"6809637767543259144",tag_ids:[6809640369764958000],visible_level:d,link_url:e,cover_image:e,is_gfw:d,title:"Vue中通过minio上传文件",brief_content:"在Vue中minio上传文件（stream流和链接） 1、minio的安装 直接使用npm或者cnpm下载即可 2、minio.js文件 封装了连接minio、文件上传，文件删除等方法 注：此文件中的",is_english:d,is_original:g,user_index:d,original_type:d,original_author:e,content:e,ctime:"1657261688",mtime:"1657273240",rtime:"-62135596800",draft_id:"7117884214132883492",view_count:516,collect_count:3,digg_count:g,comment_count:s,hot_index:28,is_hot:d,rank_index:1.3e-7,status:g,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:g},author_user_info:{user_id:"1693713856212615",user_name:"ironManYYDS",company:e,job_title:"前端工程师",avatar_large:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fmosaic-legacy\u002F3793\u002F3114521287~300x300.image",level:d,description:e,followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:361,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637767543259144",category_name:p,category_url:"frontend",rank:s,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F8c95587526f346c0.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F1c40f5eaba561e32.png",ctime:1457483942,mtime:1432503190,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:s,id:"6809637767543259144",name:p,title:p,alias:"frontend"},tags:[{entriesCount:j,subscribed:a,id:"6809640369764958215",tag_id:"6809640369764958215",tag_name:"Vue.js",color:e,icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002F7b5c3eb591b671749fee.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1432234520,mtime:1688404988,id_type:9,tag_alias:"vue,Vue",post_article_count:59128,concern_user_count:419270,title:"Vue.js",tagId:"6809640369764958215",articleCount:59128,subscribersCount:419270,createdAt:b,updatedAt:b}],user_interact:{id:7117884707542401000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"Vue中通过minio上传文件",user:{id:"1693713856212615",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"1693713856212615",user_name:"ironManYYDS",company:e,job_title:"前端工程师",avatar_large:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fmosaic-legacy\u002F3793\u002F3114521287~300x300.image",description:e,followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:361,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:"前端工程师",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"ironManYYDS",blogAddress:j,selfDescription:e,beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fmosaic-legacy\u002F3793\u002F3114521287~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:s,isEvent:j,abstract:"在Vue中minio上传文件（stream流和链接） 1、minio的安装 直接使用npm或者cnpm下载即可 2、minio.js文件 封装了连接minio、文件上传，文件删除等方法 注：此文件中的",latestCommentAt:b,createdAt:new Date(1657261688000),updatedAt:b,isTopicEvent:a,likedCount:g,likeCount:g,content:e,originalUrl:e,type:"post",collected:a,viewsCount:516,username:"ironManYYDS",viewerHasLiked:a,draftId:"7117884214132883492",collectionCount:3},{id:"6958671748023730184",screenshot:j,liked:a,article_id:"6958671748023730184",article_info:{article_id:"6958671748023730184",user_id:"915209459077447",category_id:"6809637767543259144",tag_ids:[6809640361531539000,6809640398105870000],visible_level:d,link_url:e,cover_image:"https:\u002F\u002Fp1-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Fb6984d6b27ac44e68dba9714fd890127~tplv-k3u1fbpfcp-watermark.image",is_gfw:d,title:"nodeJs + vueJs 实现大文件分片上传",brief_content:"在常规的应用场景中，很少需要在浏览器上传几百兆、几千兆的文件，但假如在特殊场景中需要浏览器上传超大文件，那么我们如何上传？如何优化？ 下面的示例全部由 vueJs 和 nodeJs 来完成 做这个之前",is_english:d,is_original:g,user_index:d,original_type:d,original_author:e,content:e,ctime:"1620192335",mtime:"1629991233",rtime:"1620212181",draft_id:"6957322660099391495",view_count:2494,collect_count:53,digg_count:31,comment_count:7,hot_index:162,is_hot:d,rank_index:.00044573,status:s,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:s},author_user_info:{user_id:"915209459077447",user_name:"对半",company:"EY",job_title:"前端攻城狮",avatar_large:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002Fbd0a0fa0c2d7730659d62a4d105d03dd~300x300.image",level:d,description:"唯有学习，与世长存",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:c,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:808,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637767543259144",category_name:p,category_url:"frontend",rank:s,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F8c95587526f346c0.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F1c40f5eaba561e32.png",ctime:1457483942,mtime:1432503190,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:s,id:"6809637767543259144",name:p,title:p,alias:"frontend"},tags:[{entriesCount:j,subscribed:a,id:"6809640361531539470",tag_id:"6809640361531539470",tag_name:"Node.js",color:"#e81864",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Ff16f548d25028a1fdd80.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1432234488,mtime:1688400479,id_type:9,tag_alias:e,post_article_count:17674,concern_user_count:341839,title:"Node.js",tagId:"6809640361531539470",articleCount:17674,subscribersCount:341839,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809640398105870343",tag_id:"6809640398105870343",tag_name:"JavaScript",color:"#616161",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002F5d70fd6af940df373834.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1435884803,mtime:1688403743,id_type:9,tag_alias:e,post_article_count:130023,concern_user_count:513974,title:"JavaScript",tagId:"6809640398105870343",articleCount:130023,subscribersCount:513974,createdAt:b,updatedAt:b}],user_interact:{id:6958671748023730000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"nodeJs + vueJs 实现大文件分片上传",user:{id:"915209459077447",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"915209459077447",user_name:"对半",company:"EY",job_title:"前端攻城狮",avatar_large:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002Fbd0a0fa0c2d7730659d62a4d105d03dd~300x300.image",description:"唯有学习，与世长存",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:c,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:808,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:"前端攻城狮",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"对半",blogAddress:j,selfDescription:"唯有学习，与世长存",beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002Fbd0a0fa0c2d7730659d62a4d105d03dd~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:7,isEvent:j,abstract:"在常规的应用场景中，很少需要在浏览器上传几百兆、几千兆的文件，但假如在特殊场景中需要浏览器上传超大文件，那么我们如何上传？如何优化？ 下面的示例全部由 vueJs 和 nodeJs 来完成 做这个之前",latestCommentAt:b,createdAt:new Date(1620192335000),updatedAt:b,isTopicEvent:a,likedCount:31,likeCount:31,content:e,originalUrl:e,type:"post",collected:a,viewsCount:2494,username:"对半",viewerHasLiked:a,draftId:"6957322660099391495",collectionCount:53},{id:"7216681666106409016",screenshot:j,liked:a,article_id:"7216681666106409016",article_info:{article_id:"7216681666106409016",user_id:"1047207118903469",category_id:"6809637769959178254",tag_ids:[6809640445233070000],visible_level:d,link_url:e,cover_image:"https:\u002F\u002Fp9-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F76fd6f92d03044bf8416b1e588e13a61~tplv-k3u1fbpfcp-watermark.image?",is_gfw:d,title:"Java构建minio文件系统实现分片上传",brief_content:"下载minio 下载minio，下载地址在https:\u002F\u002Fdl.min.io\u002Fserver\u002Fminio\u002Frelease\u002F minio特点 比如8块硬盘组成一个集合，当上传一个文件时会通过纠删码算法计算",is_english:d,is_original:g,user_index:5.949087226667339,original_type:d,original_author:e,content:e,ctime:"1680277062",mtime:"1680967373",rtime:"1680506922",draft_id:"7216644653125861437",view_count:1496,collect_count:51,digg_count:17,comment_count:s,hot_index:93,is_hot:d,rank_index:.00448837,status:s,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:8},author_user_info:{user_id:"1047207118903469",user_name:"躺平的sx",company:e,job_title:e,avatar_large:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fmosaic-legacy\u002F3793\u002F3131589739~300x300.image",level:d,description:e,followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:525,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637769959178254",category_name:"后端",category_url:"backend",rank:g,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Ffb3b208d06e6fe32.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Fa2ec01b816abd4c5.png",ctime:1457483880,mtime:1432503193,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:g,id:"6809637769959178254",name:"后端",title:"后端",alias:"backend"},tags:[{entriesCount:j,subscribed:a,id:"6809640445233070094",tag_id:"6809640445233070094",tag_name:"Java",color:"#DD2C2A",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Ff8ee3cd45f949a546263.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1436156295,mtime:1688403743,id_type:9,tag_alias:e,post_article_count:124410,concern_user_count:381350,title:"Java",tagId:"6809640445233070094",articleCount:124410,subscribersCount:381350,createdAt:b,updatedAt:b}],user_interact:{id:7216681666106409000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"Java构建minio文件系统实现分片上传",user:{id:"1047207118903469",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"1047207118903469",user_name:"躺平的sx",company:e,job_title:e,avatar_large:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fmosaic-legacy\u002F3793\u002F3131589739~300x300.image",description:e,followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:525,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:e,roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"躺平的sx",blogAddress:j,selfDescription:e,beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fmosaic-legacy\u002F3793\u002F3131589739~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:s,isEvent:j,abstract:"下载minio 下载minio，下载地址在https:\u002F\u002Fdl.min.io\u002Fserver\u002Fminio\u002Frelease\u002F minio特点 比如8块硬盘组成一个集合，当上传一个文件时会通过纠删码算法计算",latestCommentAt:b,createdAt:new Date(1680277062000),updatedAt:b,isTopicEvent:a,likedCount:17,likeCount:17,content:e,originalUrl:e,type:"post",collected:a,viewsCount:1496,username:"躺平的sx",viewerHasLiked:a,draftId:"7216644653125861437",collectionCount:51},{id:"6844903630659665933",screenshot:j,liked:a,article_id:"6844903630659665933",article_info:{article_id:"6844903630659665933",user_id:"1996368844423565",category_id:"6809637769959178254",tag_ids:[6809640369764958000,6809640407484334000,6809640408797168000,6809640703325372000,6809641037787562000],visible_level:d,link_url:"https:\u002F\u002Fjuejin.im\u002Fpost\u002F6844903630659665933",cover_image:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2018\u002F7\u002F2\u002F16458a3c176ec6f4~tplv-t2oaga2asx-image.image",is_gfw:d,title:"SpringBoot+Vue.js前后端分离实现大文件分块上传",brief_content:"此处用到了这位大佬的Vue上传组件，此图也是引用自他的GitHub，感谢这位大佬。 checkChunk()方法会根据文件唯一标识，和当前块数判断是否已经上传过这个块。 这里只贴了ChunkService的代码，其他的代码只是jpa简单的存取。 文章开头就提到了前后端分离，既然…",is_english:d,is_original:g,user_index:d,original_type:d,original_author:e,content:e,ctime:"1530499479",mtime:"1599539617",rtime:"1530589698",draft_id:"6845075556476829710",view_count:6287,collect_count:57,digg_count:58,comment_count:8,hot_index:380,is_hot:d,rank_index:.00035114,status:s,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:g},author_user_info:{user_id:"1996368844423565",user_name:"逗猫攻城狮",company:"ByteDance",job_title:"全沾攻城狮",avatar_large:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F8e40348633ca33a096677fb0d2d99096~300x300.image",level:d,description:"写代码无非就是两种情况，一种是跑不起来，一种是停不下来",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:d,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637769959178254",category_name:"后端",category_url:"backend",rank:g,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Ffb3b208d06e6fe32.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Fa2ec01b816abd4c5.png",ctime:1457483880,mtime:1432503193,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:g,id:"6809637769959178254",name:"后端",title:"后端",alias:"backend"},tags:[{entriesCount:j,subscribed:a,id:"6809640369764958215",tag_id:"6809640369764958215",tag_name:"Vue.js",color:e,icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002F7b5c3eb591b671749fee.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1432234520,mtime:1688404988,id_type:9,tag_alias:"vue,Vue",post_article_count:59128,concern_user_count:419270,title:"Vue.js",tagId:"6809640369764958215",articleCount:59128,subscribersCount:419270,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809640407484334093",tag_id:"6809640407484334093",tag_name:p,color:"#60ADFF",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Fbac28828a49181c34110.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:g,ctime:1435971546,mtime:1688404562,id_type:9,tag_alias:e,post_article_count:387321,concern_user_count:654910,title:p,tagId:"6809640407484334093",articleCount:387321,subscribersCount:654910,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809640408797167623",tag_id:"6809640408797167623",tag_name:"后端",color:"#C679FF",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Fd83da9d012ddb7ae85f4.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:g,ctime:1435971556,mtime:1688406097,id_type:9,tag_alias:e,post_article_count:226551,concern_user_count:521694,title:"后端",tagId:"6809640408797167623",articleCount:226551,subscribersCount:521694,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809640703325372423",tag_id:"6809640703325372423",tag_name:"Spring",color:"#000000",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002F279e631b065a5a31289f.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1481070886,mtime:1688400050,id_type:9,tag_alias:e,post_article_count:12047,concern_user_count:129044,title:"Spring",tagId:"6809640703325372423",articleCount:12047,subscribersCount:129044,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809641037787561992",tag_id:"6809641037787561992",tag_name:"Spring Boot",color:"#000000",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Ff77e4a02edb8b963a2c5.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1489517587,mtime:1688396203,id_type:9,tag_alias:e,post_article_count:11930,concern_user_count:78155,title:"Spring Boot",tagId:"6809641037787561992",articleCount:11930,subscribersCount:78155,createdAt:b,updatedAt:b}],user_interact:{id:6844903630659666000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"SpringBoot+Vue.js前后端分离实现大文件分块上传",user:{id:"1996368844423565",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"1996368844423565",user_name:"逗猫攻城狮",company:"ByteDance",job_title:"全沾攻城狮",avatar_large:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F8e40348633ca33a096677fb0d2d99096~300x300.image",description:"写代码无非就是两种情况，一种是跑不起来，一种是停不下来",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:d,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:"全沾攻城狮",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"逗猫攻城狮",blogAddress:j,selfDescription:"写代码无非就是两种情况，一种是跑不起来，一种是停不下来",beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F8e40348633ca33a096677fb0d2d99096~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:8,isEvent:j,abstract:"此处用到了这位大佬的Vue上传组件，此图也是引用自他的GitHub，感谢这位大佬。 checkChunk()方法会根据文件唯一标识，和当前块数判断是否已经上传过这个块。 这里只贴了ChunkService的代码，其他的代码只是jpa简单的存取。 文章开头就提到了前后端分离，既然…",latestCommentAt:b,createdAt:new Date(1530499479000),updatedAt:b,isTopicEvent:a,likedCount:58,likeCount:58,content:e,originalUrl:"https:\u002F\u002Fjuejin.im\u002Fpost\u002F6844903630659665933",type:"post",collected:a,viewsCount:6287,username:"逗猫攻城狮",viewerHasLiked:a,draftId:"6845075556476829710",collectionCount:57},{id:"7052946931194003463",screenshot:j,liked:a,article_id:"7052946931194003463",article_info:{article_id:"7052946931194003463",user_id:"3386151546923358",category_id:"6809637767543259144",tag_ids:[6809640361531539000,6809640540305359000],visible_level:d,link_url:e,cover_image:e,is_gfw:d,title:"基于nodejs 的几种http文件传输方案实践",brief_content:"基于nodejs的http文件传输方案在现阶段的前后端全栈开发中有都很重要的作用，本文我将通过几种方案实现http传输大文件",is_english:d,is_original:g,user_index:6.01066759436551,original_type:d,original_author:e,content:e,ctime:"1642142267",mtime:"1642389179",rtime:"1642389179",draft_id:"7041487688809054221",view_count:10245,collect_count:14,digg_count:15,comment_count:s,hot_index:529,is_hot:d,rank_index:.00245528,status:s,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:s},author_user_info:{user_id:"3386151546923358",user_name:"阿镇吃橙子",company:e,job_title:"前端开发工程师",avatar_large:"https:\u002F\u002Fp9-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F174c00403a60354007d07580e60e3812~300x300.image",level:d,description:"只要有树叶飞舞的地方,火就会燃烧~",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:c,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:859,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637767543259144",category_name:p,category_url:"frontend",rank:s,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F8c95587526f346c0.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F1c40f5eaba561e32.png",ctime:1457483942,mtime:1432503190,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:s,id:"6809637767543259144",name:p,title:p,alias:"frontend"},tags:[{entriesCount:j,subscribed:a,id:"6809640361531539470",tag_id:"6809640361531539470",tag_name:"Node.js",color:"#e81864",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Ff16f548d25028a1fdd80.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1432234488,mtime:1688400479,id_type:9,tag_alias:e,post_article_count:17674,concern_user_count:341839,title:"Node.js",tagId:"6809640361531539470",articleCount:17674,subscribersCount:341839,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809640540305358862",tag_id:"6809640540305358862",tag_name:"HTTP",color:"#616161",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002F936251cc1634d8d98959.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1441226632,mtime:1688402141,id_type:9,tag_alias:e,post_article_count:6662,concern_user_count:205518,title:"HTTP",tagId:"6809640540305358862",articleCount:6662,subscribersCount:205518,createdAt:b,updatedAt:b}],user_interact:{id:7052946931194003000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"基于nodejs 的几种http文件传输方案实践",user:{id:"3386151546923358",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"3386151546923358",user_name:"阿镇吃橙子",company:e,job_title:"前端开发工程师",avatar_large:"https:\u002F\u002Fp9-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F174c00403a60354007d07580e60e3812~300x300.image",description:"只要有树叶飞舞的地方,火就会燃烧~",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:c,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:859,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:"前端开发工程师",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"阿镇吃橙子",blogAddress:j,selfDescription:"只要有树叶飞舞的地方,火就会燃烧~",beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp9-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F174c00403a60354007d07580e60e3812~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:s,isEvent:j,abstract:"基于nodejs的http文件传输方案在现阶段的前后端全栈开发中有都很重要的作用，本文我将通过几种方案实现http传输大文件",latestCommentAt:b,createdAt:new Date(1642142267000),updatedAt:b,isTopicEvent:a,likedCount:15,likeCount:15,content:e,originalUrl:e,type:"post",collected:a,viewsCount:10245,username:"阿镇吃橙子",viewerHasLiked:a,draftId:"7041487688809054221",collectionCount:14},{id:"7142831050052665381",screenshot:j,liked:a,article_id:"7142831050052665381",article_info:{article_id:"7142831050052665381",user_id:"2260251637475847",category_id:"6809637767543259144",tag_ids:[6809640398105870000],visible_level:d,link_url:e,cover_image:e,is_gfw:d,title:"计算文件MD5值实现文件秒传",brief_content:"日常开发过程中，经常会遇到需要上传文件的问题，有时候文件会特别的大，这时候需要考虑文件秒传，文件分片上传。 以此来实现高效上传，提升用户体验。本文主要介绍文件秒传。",is_english:d,is_original:g,user_index:8.128533874054364,original_type:d,original_author:e,content:e,ctime:"1663069989",mtime:"1663221729",rtime:"1663221729",draft_id:"7142820541429514247",view_count:1991,collect_count:26,digg_count:17,comment_count:10,hot_index:126,is_hot:d,rank_index:.00134672,status:s,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:g},author_user_info:{user_id:"2260251637475847",user_name:"起一个可以中奖的名字",company:e,job_title:"软件开发",avatar_large:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002Fbc2d29879201f1e960e9916ab444d826~300x300.image",level:d,description:e,followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:c,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:c,become_author_days:496,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637767543259144",category_name:p,category_url:"frontend",rank:s,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F8c95587526f346c0.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F1c40f5eaba561e32.png",ctime:1457483942,mtime:1432503190,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:s,id:"6809637767543259144",name:p,title:p,alias:"frontend"},tags:[{entriesCount:j,subscribed:a,id:"6809640398105870343",tag_id:"6809640398105870343",tag_name:"JavaScript",color:"#616161",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002F5d70fd6af940df373834.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1435884803,mtime:1688403743,id_type:9,tag_alias:e,post_article_count:130023,concern_user_count:513974,title:"JavaScript",tagId:"6809640398105870343",articleCount:130023,subscribersCount:513974,createdAt:b,updatedAt:b}],user_interact:{id:7142831050052665000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"计算文件MD5值实现文件秒传",user:{id:"2260251637475847",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"2260251637475847",user_name:"起一个可以中奖的名字",company:e,job_title:"软件开发",avatar_large:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002Fbc2d29879201f1e960e9916ab444d826~300x300.image",description:e,followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:c,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:c,become_author_days:496,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:"软件开发",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"起一个可以中奖的名字",blogAddress:j,selfDescription:e,beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp26-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002Fbc2d29879201f1e960e9916ab444d826~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:10,isEvent:j,abstract:"日常开发过程中，经常会遇到需要上传文件的问题，有时候文件会特别的大，这时候需要考虑文件秒传，文件分片上传。 以此来实现高效上传，提升用户体验。本文主要介绍文件秒传。",latestCommentAt:b,createdAt:new Date(1663069989000),updatedAt:b,isTopicEvent:a,likedCount:17,likeCount:17,content:e,originalUrl:e,type:"post",collected:a,viewsCount:1991,username:"起一个可以中奖的名字",viewerHasLiked:a,draftId:"7142820541429514247",collectionCount:26},{id:"7204735957778563132",screenshot:j,liked:a,article_id:"7204735957778563132",article_info:{article_id:"7204735957778563132",user_id:"3650034334697048",category_id:"6809637769959178254",tag_ids:[7147583745896219000,6809641037787562000,6809640408797168000],visible_level:d,link_url:e,cover_image:e,is_gfw:d,title:"Spring Boot「40」实现文件上传的两种方式",brief_content:"内容主要包括两部分，如何通过纯 Servlet 的形式进行文件上传、保存（不通过 Spring 框架）；另一部分是如何在 Spring Web MVC 中进行文件上传。",is_english:d,is_original:g,user_index:7.369339969600986,original_type:d,original_author:e,content:e,ctime:"1677487871",mtime:"1677547111",rtime:"1677547111",draft_id:"7204735957778481212",view_count:1460,collect_count:18,digg_count:51,comment_count:s,hot_index:126,is_hot:d,rank_index:.00401004,status:s,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:g},author_user_info:{user_id:"3650034334697048",user_name:"Samson_bu",company:e,job_title:"Java开发攻城狮",avatar_large:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F67d0b53a3fe8cbe3d6d01247b0b976f7~300x300.image",level:d,description:"专注于后端技术，记录工作、学习过程中遇到的问题及思考。",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:c,become_author_days:1286,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637769959178254",category_name:"后端",category_url:"backend",rank:g,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Ffb3b208d06e6fe32.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Fa2ec01b816abd4c5.png",ctime:1457483880,mtime:1432503193,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:g,id:"6809637769959178254",name:"后端",title:"后端",alias:"backend"},tags:[{entriesCount:j,subscribed:a,id:"7147583745896218628",tag_id:"7147583745896218628",tag_name:"掘金·日新计划",color:e,icon:"https:\u002F\u002Fp6-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002F2acbfd7dac7c40d7ab74f6aa55ee118c~tplv-k3u1fbpfcp-watermark.image?",back_ground:e,show_navi:d,ctime:1664176524,mtime:1688392393,id_type:9,tag_alias:"更文,更文挑战,10月更文,闯关,日新",post_article_count:35454,concern_user_count:8668,title:"掘金·日新计划",tagId:"7147583745896218628",articleCount:35454,subscribersCount:8668,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809641037787561992",tag_id:"6809641037787561992",tag_name:"Spring Boot",color:"#000000",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Ff77e4a02edb8b963a2c5.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1489517587,mtime:1688396203,id_type:9,tag_alias:e,post_article_count:11930,concern_user_count:78155,title:"Spring Boot",tagId:"6809641037787561992",articleCount:11930,subscribersCount:78155,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809640408797167623",tag_id:"6809640408797167623",tag_name:"后端",color:"#C679FF",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Fd83da9d012ddb7ae85f4.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:g,ctime:1435971556,mtime:1688406097,id_type:9,tag_alias:e,post_article_count:226551,concern_user_count:521694,title:"后端",tagId:"6809640408797167623",articleCount:226551,subscribersCount:521694,createdAt:b,updatedAt:b}],user_interact:{id:7204735957778563000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"Spring Boot「40」实现文件上传的两种方式",user:{id:"3650034334697048",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"3650034334697048",user_name:"Samson_bu",company:e,job_title:"Java开发攻城狮",avatar_large:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F67d0b53a3fe8cbe3d6d01247b0b976f7~300x300.image",description:"专注于后端技术，记录工作、学习过程中遇到的问题及思考。",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:c,become_author_days:1286,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:"Java开发攻城狮",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Samson_bu",blogAddress:j,selfDescription:"专注于后端技术，记录工作、学习过程中遇到的问题及思考。",beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F67d0b53a3fe8cbe3d6d01247b0b976f7~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:s,isEvent:j,abstract:"内容主要包括两部分，如何通过纯 Servlet 的形式进行文件上传、保存（不通过 Spring 框架）；另一部分是如何在 Spring Web MVC 中进行文件上传。",latestCommentAt:b,createdAt:new Date(1677487871000),updatedAt:b,isTopicEvent:a,likedCount:51,likeCount:51,content:e,originalUrl:e,type:"post",collected:a,viewsCount:1460,username:"Samson_bu",viewerHasLiked:a,draftId:"7204735957778481212",collectionCount:18},{id:"7001041806339096590",screenshot:j,liked:a,article_id:"7001041806339096590",article_info:{article_id:"7001041806339096590",user_id:"1838039172396280",category_id:"6809635626661445640",tag_ids:[6809640399544517000,6809640648812003000],visible_level:d,link_url:e,cover_image:e,is_gfw:d,title:"AWS3 分片上传的解决方案",brief_content:"记一次 AWS3 分片上传的解决方案步骤及分片上传组件封装，业务代码部分采用 ReactorKit 框架实现",is_english:d,is_original:g,user_index:9.56723974928089,original_type:d,original_author:e,content:e,ctime:"1630057180",mtime:"1630293398",rtime:"1630293398",draft_id:"7001039037134405639",view_count:2564,collect_count:t,digg_count:12,comment_count:s,hot_index:142,is_hot:d,rank_index:.00051347,status:s,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:t},author_user_info:{user_id:"1838039172396280",user_name:"zeqinjie",company:"addcn",job_title:"iOS\u002FFlutter 工程师",avatar_large:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F5c92e701a43a5f395ce42afe8a4b1aa1~300x300.image",level:d,description:"不要轻言放弃，否则对不起自己",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:1826,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809635626661445640",category_name:"iOS",category_url:"ios",rank:t,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F34589746327a360a.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F4a218bdf1f6969fd.png",ctime:1461266350,mtime:1432503174,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:t,id:"6809635626661445640",name:"iOS",title:"iOS",alias:"ios"},tags:[{entriesCount:j,subscribed:a,id:"6809640399544516616",tag_id:"6809640399544516616",tag_name:"iOS",color:"#616161",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F155962881259379c25251a455680e3249366e3a3ac373.jpg~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:g,ctime:1435964171,mtime:1688392990,id_type:9,tag_alias:e,post_article_count:34910,concern_user_count:194263,title:"iOS",tagId:"6809640399544516616",articleCount:34910,subscribersCount:194263,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809640648812003341",tag_id:"6809640648812003341",tag_name:"RxSwift",color:"#000000",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Fa966d6fdc0817aee.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1473122679,mtime:1688104839,id_type:9,tag_alias:e,post_article_count:475,concern_user_count:5116,title:"RxSwift",tagId:"6809640648812003341",articleCount:475,subscribersCount:5116,createdAt:b,updatedAt:b}],user_interact:{id:7001041806339097000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"AWS3 分片上传的解决方案",user:{id:"1838039172396280",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"1838039172396280",user_name:"zeqinjie",company:"addcn",job_title:"iOS\u002FFlutter 工程师",avatar_large:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F5c92e701a43a5f395ce42afe8a4b1aa1~300x300.image",description:"不要轻言放弃，否则对不起自己",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:1826,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:"iOS\u002FFlutter 工程师",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"zeqinjie",blogAddress:j,selfDescription:"不要轻言放弃，否则对不起自己",beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F5c92e701a43a5f395ce42afe8a4b1aa1~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:s,isEvent:j,abstract:"记一次 AWS3 分片上传的解决方案步骤及分片上传组件封装，业务代码部分采用 ReactorKit 框架实现",latestCommentAt:b,createdAt:new Date(1630057180000),updatedAt:b,isTopicEvent:a,likedCount:12,likeCount:12,content:e,originalUrl:e,type:"post",collected:a,viewsCount:2564,username:"zeqinjie",viewerHasLiked:a,draftId:"7001039037134405639",collectionCount:t},{id:"7085997674033315877",screenshot:j,liked:a,article_id:"7085997674033315877",article_info:{article_id:"7085997674033315877",user_id:"141164809564285",category_id:"6809637769959178254",tag_ids:[6809640408797168000],visible_level:d,link_url:e,cover_image:e,is_gfw:d,title:"细说分片上传与极速秒传(SpringBoot+Vue实现)",brief_content:"本文使用 SpringBoot+Vue 详细讲解前后端分片上传与极速秒传的实现，对涉及到的代码片段都给予注释说明，帮助大家梳理编码思路。",is_english:d,is_original:g,user_index:1.612781110704644,original_type:d,original_author:e,content:e,ctime:"1649837413",mtime:"1651334442",rtime:"1649843670",draft_id:"7085995633378590750",view_count:2806,collect_count:96,digg_count:36,comment_count:15,hot_index:191,is_hot:d,rank_index:.00111217,status:s,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:s},author_user_info:{user_id:"141164809564285",user_name:"玛卡bug卡",company:e,job_title:"后端开发",avatar_large:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F0d4ede0b6f21bd7c567fa18cc14ed0bc~300x300.image",level:d,description:"可乐不加冰",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:c,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:c,become_author_days:842,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637769959178254",category_name:"后端",category_url:"backend",rank:g,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Ffb3b208d06e6fe32.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Fa2ec01b816abd4c5.png",ctime:1457483880,mtime:1432503193,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:g,id:"6809637769959178254",name:"后端",title:"后端",alias:"backend"},tags:[{entriesCount:j,subscribed:a,id:"6809640408797167623",tag_id:"6809640408797167623",tag_name:"后端",color:"#C679FF",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Fd83da9d012ddb7ae85f4.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:g,ctime:1435971556,mtime:1688406097,id_type:9,tag_alias:e,post_article_count:226551,concern_user_count:521694,title:"后端",tagId:"6809640408797167623",articleCount:226551,subscribersCount:521694,createdAt:b,updatedAt:b}],user_interact:{id:7085997674033316000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"细说分片上传与极速秒传(SpringBoot+Vue实现)",user:{id:"141164809564285",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"141164809564285",user_name:"玛卡bug卡",company:e,job_title:"后端开发",avatar_large:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F0d4ede0b6f21bd7c567fa18cc14ed0bc~300x300.image",description:"可乐不加冰",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:c,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:c,become_author_days:842,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:"后端开发",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"玛卡bug卡",blogAddress:j,selfDescription:"可乐不加冰",beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp6-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F0d4ede0b6f21bd7c567fa18cc14ed0bc~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:15,isEvent:j,abstract:"本文使用 SpringBoot+Vue 详细讲解前后端分片上传与极速秒传的实现，对涉及到的代码片段都给予注释说明，帮助大家梳理编码思路。",latestCommentAt:b,createdAt:new Date(1649837413000),updatedAt:b,isTopicEvent:a,likedCount:36,likeCount:36,content:e,originalUrl:e,type:"post",collected:a,viewsCount:2806,username:"玛卡bug卡",viewerHasLiked:a,draftId:"7085995633378590750",collectionCount:96},{id:"6977693685882290189",screenshot:j,liked:a,article_id:"6977693685882290189",article_info:{article_id:"6977693685882290189",user_id:"1802854801342814",category_id:"6809637767543259144",tag_ids:[6809640407484334000,6809640369764958000],visible_level:d,link_url:e,cover_image:e,is_gfw:d,title:"在VUE中使用Plupload实现文件分片上传",brief_content:"效果 拥有多种上传方式：HTML5、flash、silverlight以及传统的。Plupload会自动侦测当前的环境，选择最合适的上传方式，并且会优先使用HTML5的方式。所以你完全不用去操心当前的",is_english:d,is_original:g,user_index:d,original_type:d,original_author:e,content:e,ctime:"1624621011",mtime:"1624863812",rtime:"1624863812",draft_id:"6977646005491597326",view_count:2433,collect_count:22,digg_count:28,comment_count:5,hot_index:154,is_hot:d,rank_index:.00046449,status:s,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:g},author_user_info:{user_id:"1802854801342814",user_name:"Hello码人",company:e,job_title:"前端开发",avatar_large:"https:\u002F\u002Fp9-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002Fa17bfa3c09ef37284624f4ad0208b0af~300x300.image",level:d,description:"收藏和记录自己喜欢的东西",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:839,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637767543259144",category_name:p,category_url:"frontend",rank:s,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F8c95587526f346c0.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F1c40f5eaba561e32.png",ctime:1457483942,mtime:1432503190,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:s,id:"6809637767543259144",name:p,title:p,alias:"frontend"},tags:[{entriesCount:j,subscribed:a,id:"6809640407484334093",tag_id:"6809640407484334093",tag_name:p,color:"#60ADFF",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Fbac28828a49181c34110.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:g,ctime:1435971546,mtime:1688404562,id_type:9,tag_alias:e,post_article_count:387321,concern_user_count:654910,title:p,tagId:"6809640407484334093",articleCount:387321,subscribersCount:654910,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809640369764958215",tag_id:"6809640369764958215",tag_name:"Vue.js",color:e,icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002F7b5c3eb591b671749fee.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1432234520,mtime:1688404988,id_type:9,tag_alias:"vue,Vue",post_article_count:59128,concern_user_count:419270,title:"Vue.js",tagId:"6809640369764958215",articleCount:59128,subscribersCount:419270,createdAt:b,updatedAt:b}],user_interact:{id:6977693685882290000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"在VUE中使用Plupload实现文件分片上传",user:{id:"1802854801342814",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"1802854801342814",user_name:"Hello码人",company:e,job_title:"前端开发",avatar_large:"https:\u002F\u002Fp9-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002Fa17bfa3c09ef37284624f4ad0208b0af~300x300.image",description:"收藏和记录自己喜欢的东西",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:839,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:"前端开发",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Hello码人",blogAddress:j,selfDescription:"收藏和记录自己喜欢的东西",beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp9-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002Fa17bfa3c09ef37284624f4ad0208b0af~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:5,isEvent:j,abstract:"效果 拥有多种上传方式：HTML5、flash、silverlight以及传统的。Plupload会自动侦测当前的环境，选择最合适的上传方式，并且会优先使用HTML5的方式。所以你完全不用去操心当前的",latestCommentAt:b,createdAt:new Date(1624621011000),updatedAt:b,isTopicEvent:a,likedCount:28,likeCount:28,content:e,originalUrl:e,type:"post",collected:a,viewsCount:2433,username:"Hello码人",viewerHasLiked:a,draftId:"6977646005491597326",collectionCount:22},{id:"6993318543315959816",screenshot:j,liked:a,article_id:"6993318543315959816",article_info:{article_id:"6993318543315959816",user_id:"2849562994940046",category_id:"6809637767543259144",tag_ids:[6809640398105870000,6809640407484334000],visible_level:d,link_url:e,cover_image:e,is_gfw:d,title:"JavaScript高级 - nodejs+koa2实现文件上传大文件切片上传断点续传（服务器端）",brief_content:"这是我参与8月更文挑战的第6天，活动详情查看：8月更文挑战 前言 一、环境准备及第三方库 我们将采用nodejs+koa2来实现文件上传的服务端部分 nodejs版本：v12.16.1 koa版本：v",is_english:d,is_original:g,user_index:d,original_type:d,original_author:e,content:e,ctime:"1628259102",mtime:"1628495278",rtime:"1628495278",draft_id:"6993318649092112414",view_count:1758,collect_count:21,digg_count:19,comment_count:s,hot_index:108,is_hot:d,rank_index:.00035166,status:s,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:g},author_user_info:{user_id:"2849562994940046",user_name:"西瓜watermelon",company:e,job_title:e,avatar_large:"https:\u002F\u002Fp9-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F241e646a73a87369da5f7104500ef82f~300x300.image",level:d,description:e,followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:c,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:979,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637767543259144",category_name:p,category_url:"frontend",rank:s,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F8c95587526f346c0.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002F1c40f5eaba561e32.png",ctime:1457483942,mtime:1432503190,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:s,id:"6809637767543259144",name:p,title:p,alias:"frontend"},tags:[{entriesCount:j,subscribed:a,id:"6809640398105870343",tag_id:"6809640398105870343",tag_name:"JavaScript",color:"#616161",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002F5d70fd6af940df373834.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1435884803,mtime:1688403743,id_type:9,tag_alias:e,post_article_count:130023,concern_user_count:513974,title:"JavaScript",tagId:"6809640398105870343",articleCount:130023,subscribersCount:513974,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809640407484334093",tag_id:"6809640407484334093",tag_name:p,color:"#60ADFF",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Fbac28828a49181c34110.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:g,ctime:1435971546,mtime:1688404562,id_type:9,tag_alias:e,post_article_count:387321,concern_user_count:654910,title:p,tagId:"6809640407484334093",articleCount:387321,subscribersCount:654910,createdAt:b,updatedAt:b}],user_interact:{id:6993318543315960000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"JavaScript高级 - nodejs+koa2实现文件上传大文件切片上传断点续传（服务器端）",user:{id:"2849562994940046",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"2849562994940046",user_name:"西瓜watermelon",company:e,job_title:e,avatar_large:"https:\u002F\u002Fp9-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F241e646a73a87369da5f7104500ef82f~300x300.image",description:e,followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:c,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:979,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:e,roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"西瓜watermelon",blogAddress:j,selfDescription:e,beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp9-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F241e646a73a87369da5f7104500ef82f~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:s,isEvent:j,abstract:"这是我参与8月更文挑战的第6天，活动详情查看：8月更文挑战 前言 一、环境准备及第三方库 我们将采用nodejs+koa2来实现文件上传的服务端部分 nodejs版本：v12.16.1 koa版本：v",latestCommentAt:b,createdAt:new Date(1628259102000),updatedAt:b,isTopicEvent:a,likedCount:19,likeCount:19,content:e,originalUrl:e,type:"post",collected:a,viewsCount:1758,username:"西瓜watermelon",viewerHasLiked:a,draftId:"6993318649092112414",collectionCount:21},{id:"6844904151084695559",screenshot:j,liked:a,article_id:"6844904151084695559",article_info:{article_id:"6844904151084695559",user_id:"553809592452989",category_id:"6809637769959178254",tag_ids:[6809640448827589000],visible_level:d,link_url:"https:\u002F\u002Fjuejin.im\u002Fpost\u002F6844904151084695559",cover_image:e,is_gfw:d,title:"python 文件下载、大文件下载、异步批量下载 教程",brief_content:"流程：使用request.get请求链接，返回的内容放置到变量r中，然后将r写入到你想放的地方。 运行完毕后，它将会被保存到当前文件夹的new文件夹里。 很简单，如果你的内存只有8G，结果要下载文件却有10G那么大，那就肯定无法下载成功了。而且本机软件运行占的内存也比较大，如果…",is_english:d,is_original:g,user_index:d,original_type:d,original_author:e,content:e,ctime:"1588925568",mtime:"1598954115",rtime:"1588929673",draft_id:"6845076765321199629",view_count:2578,collect_count:s,digg_count:s,comment_count:d,hot_index:130,is_hot:d,rank_index:.00021888,status:g,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:g},author_user_info:{user_id:"553809592452989",user_name:"Python实用宝典",company:"公众号：Python实用宝典",job_title:"工程师",avatar_large:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F10\u002F12\u002F16dbe3df761a5b6a~tplv-t2oaga2asx-image.image",level:d,description:e,followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:d,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637769959178254",category_name:"后端",category_url:"backend",rank:g,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Ffb3b208d06e6fe32.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Fa2ec01b816abd4c5.png",ctime:1457483880,mtime:1432503193,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:g,id:"6809637769959178254",name:"后端",title:"后端",alias:"backend"},tags:[{entriesCount:j,subscribed:a,id:"6809640448827588622",tag_id:"6809640448827588622",tag_name:"Python",color:"#356E9C",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Fb51a1dacf9bb7883defe.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1436156327,mtime:1688403881,id_type:9,tag_alias:e,post_article_count:43795,concern_user_count:254452,title:"Python",tagId:"6809640448827588622",articleCount:43795,subscribersCount:254452,createdAt:b,updatedAt:b}],user_interact:{id:6844904151084696000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"python 文件下载、大文件下载、异步批量下载 教程",user:{id:"553809592452989",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"553809592452989",user_name:"Python实用宝典",company:"公众号：Python实用宝典",job_title:"工程师",avatar_large:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F10\u002F12\u002F16dbe3df761a5b6a~tplv-t2oaga2asx-image.image",description:e,followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:d,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:a,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:d,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:"工程师",roles:{isBookAuthor:a,isFavorableAuthor:a,isCobuilder:a,isAdmin:a},username:"Python实用宝典",blogAddress:j,selfDescription:e,beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fgold-user-assets\u002F2019\u002F10\u002F12\u002F16dbe3df761a5b6a~tplv-t2oaga2asx-image.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:d,isEvent:j,abstract:"流程：使用request.get请求链接，返回的内容放置到变量r中，然后将r写入到你想放的地方。 运行完毕后，它将会被保存到当前文件夹的new文件夹里。 很简单，如果你的内存只有8G，结果要下载文件却有10G那么大，那就肯定无法下载成功了。而且本机软件运行占的内存也比较大，如果…",latestCommentAt:b,createdAt:new Date(1588925568000),updatedAt:b,isTopicEvent:a,likedCount:s,likeCount:s,content:e,originalUrl:"https:\u002F\u002Fjuejin.im\u002Fpost\u002F6844904151084695559",type:"post",collected:a,viewsCount:2578,username:"Python实用宝典",viewerHasLiked:a,draftId:"6845076765321199629",collectionCount:s},{id:"7095703796856127502",screenshot:j,liked:a,article_id:"7095703796856127502",article_info:{article_id:"7095703796856127502",user_id:"4441682704609320",category_id:"6809637769959178254",tag_ids:[6809640408797168000,6809641037787562000],visible_level:d,link_url:e,cover_image:"https:\u002F\u002Fp3-juejin.byteimg.com\u002Ftos-cn-i-k3u1fbpfcp\u002Faee58dc878754dbb8f2d33142d698871~tplv-k3u1fbpfcp-watermark.image?",is_gfw:d,title:"一个简单易用的文件上传方案",brief_content:"现在 OSS 服务算是一个基础服务了，很多云服务厂商都有提供这样的服务，价格也不贵，松哥自己的 www.javaboy.org 用的就是类似的服务。 不过对于中小公司来说，除了购买 OSS 服务之外，",is_english:d,is_original:g,user_index:9.32091943485495,original_type:d,original_author:e,content:e,ctime:"1652097494",mtime:"1652098498",rtime:"1652098497",draft_id:"7095703319976362020",view_count:3799,collect_count:28,digg_count:13,comment_count:g,hot_index:203,is_hot:d,rank_index:.00132622,status:s,verify_status:g,audit_status:s,mark_content:e,display_count:d,is_markdown:g,app_html_content:e,version:g},author_user_info:{user_id:"4441682704609320",user_name:"江南一点雨",company:e,job_title:e,avatar_large:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F36a25da34c9847b5a627cc949204f715~300x300.image",level:d,description:"Java猿",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:g,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:c,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:1978,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d},category:{category_id:"6809637769959178254",category_name:"后端",category_url:"backend",rank:g,back_ground:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Ffb3b208d06e6fe32.png",icon:"https:\u002F\u002Flc-mhke0kuv.cn-n1.lcfile.com\u002Fa2ec01b816abd4c5.png",ctime:1457483880,mtime:1432503193,show_type:3,item_type:s,promote_tag_cap:t,promote_priority:g,id:"6809637769959178254",name:"后端",title:"后端",alias:"backend"},tags:[{entriesCount:j,subscribed:a,id:"6809640408797167623",tag_id:"6809640408797167623",tag_name:"后端",color:"#C679FF",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Fd83da9d012ddb7ae85f4.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:g,ctime:1435971556,mtime:1688406097,id_type:9,tag_alias:e,post_article_count:226551,concern_user_count:521694,title:"后端",tagId:"6809640408797167623",articleCount:226551,subscribersCount:521694,createdAt:b,updatedAt:b},{entriesCount:j,subscribed:a,id:"6809641037787561992",tag_id:"6809641037787561992",tag_name:"Spring Boot",color:"#000000",icon:"https:\u002F\u002Fp1-jj.byteimg.com\u002Ftos-cn-i-t2oaga2asx\u002Fleancloud-assets\u002Ff77e4a02edb8b963a2c5.png~tplv-t2oaga2asx-image.image",back_ground:e,show_navi:d,ctime:1489517587,mtime:1688396203,id_type:9,tag_alias:e,post_article_count:11930,concern_user_count:78155,title:"Spring Boot",tagId:"6809641037787561992",articleCount:11930,subscribersCount:78155,createdAt:b,updatedAt:b}],user_interact:{id:7095703796856127000,omitempty:s,user_id:d,is_digg:a,is_follow:a,is_collect:a,collect_set_count:d},org:{org_info:b,is_followed:a},req_id:e,status:{push_status:d},extra:{extra:e},title:"一个简单易用的文件上传方案",user:{id:"4441682704609320",self_description:j,followed:a,viewerIsFollowing:j,community:j,subscribedTagCount:d,wroteBookCount:d,boughtBookCount:d,isBindedPhone:a,level:d,user_id:"4441682704609320",user_name:"江南一点雨",company:e,job_title:e,avatar_large:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F36a25da34c9847b5a627cc949204f715~300x300.image",description:"Java猿",followee_count:d,follower_count:d,post_article_count:d,digg_article_count:d,got_digg_count:d,got_view_count:d,post_shortmsg_count:d,digg_shortmsg_count:d,isfollowed:a,favorable_author:g,power:d,study_point:d,university:{university_id:f,name:e,logo:e},major:{major_id:f,parent_id:f,name:e},student_status:d,select_event_count:d,select_online_course_count:d,identity:d,is_select_annual:c,select_annual_rank:d,annual_list_type:d,extraMap:{},is_logout:d,annual_info:[],account_amount:d,user_growth_info:{user_id:d,jpower:d,jscore:d,jpower_level:d,jscore_level:d,jscore_title:e,author_achievement_list:[],vip_level:d,vip_title:e,jscore_next_level_score:d,jscore_this_level_mini_score:d},is_vip:a,become_author_days:1978,collection_set_article_count:d,recommend_article_count_daily:d,article_collect_count_daily:d,juejinPower:d,jobTitle:e,roles:{isBookAuthor:a,isFavorableAuthor:c,isCobuilder:a,isAdmin:a},username:"江南一点雨",blogAddress:j,selfDescription:"Java猿",beLikedCount:d,beReadCount:d,followerCount:d,followingCount:d,collectionCount:d,createdCollectionCount:d,followingCollectionCount:d,postedPostsCount:d,pinCount:d,likedArticleCount:d,likedPinCount:d,avatar:"https:\u002F\u002Fp3-passport.byteacctimg.com\u002Fimg\u002Fuser-avatar\u002F36a25da34c9847b5a627cc949204f715~300x300.image",latestLoginedInAt:b,createdAt:b,updatedAt:b,phoneNumber:e,titleDescription:e,followeesCount:d,applyEventCount:d,need_lead:d,followTopicCnt:d},viewCount:j,commentsCount:g,isEvent:j,abstract:"现在 OSS 服务算是一个基础服务了，很多云服务厂商都有提供这样的服务，价格也不贵，松哥自己的 www.javaboy.org 用的就是类似的服务。 不过对于中小公司来说，除了购买 OSS 服务之外，",latestCommentAt:b,createdAt:new Date(1652097494000),updatedAt:b,isTopicEvent:a,likedCount:13,likeCount:13,content:e,originalUrl:e,type:"post",collected:a,viewsCount:3799,username:"江南一点雨",viewerHasLiked:a,draftId:"7095703319976362020",collectionCount:28}],cursor:"15",loading:a,skeleton:a,hasMore:c,articleId:k,actionType:{UPDATE_STATE:"view\u002Fcolumn\u002Frecommend-List\u002FUPDATE_STATE",FETCH_MORE:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH_MORE",FETCH:"view\u002Fcolumn\u002Frecommend-List\u002FFETCH",RESET:"view\u002Fcolumn\u002Frecommend-List\u002FRESET"},sort:n}},collection:{collection:{author:{}},actionType:{FETCH:"@\u002Fview\u002Fcollection\u002FFETCH",REFRESH:"@\u002Fview\u002Fcollection\u002FREFRESH",RESET:"@\u002Fview\u002Fcollection\u002FRESET"},list:{pageSize:h,page:g,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fcollection\u002Flist\u002FUPDATE",FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fcollection\u002Flist\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fcollection\u002Flist\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fcollection\u002Flist\u002FRESET"},id:e,sort:o}},gettingStarted:{category:{},actionType:{UPDATE_STATE:"@\u002Fview\u002FgettingStarted\u002FUPDATE_STATE",FOLLOW:"@\u002Fview\u002FgettingStarted\u002FFOLLOW",RESET:"@\u002Fview\u002FgettingStarted\u002FRESET",UPDATE_CATEGORY:"@\u002Fview\u002FgettingStarted\u002FUPDATE_CATEGORY"}},pin:{pin:{user:{},imageUrlList:[]},pinList:[],actionType:{FETCH:"@\u002Fview\u002Fpin\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002FRESET"},sidebar:{list:[],after:e,loading:a,isRecommend:a,hasNextPage:c,actionType:{UPDATE_STATE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH_MORE",FETCH:"@\u002Fview\u002Fpin\u002Fsidebar\u002FFETCH",RESET:"@\u002Fview\u002Fpin\u002Fsidebar\u002FRESET"}},commentList:{pageSize:h,page:g,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FcommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FcommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FcommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FcommentList\u002FRESET"},pinId:b},subCommentList:{pageSize:h,page:g,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FUPDATE",FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fpin\u002FsubCommentList\u002FRESET"},commentId:b}},topic:{topic:e,followedTopicList:[],actionType:{FETCH:"@\u002Fview\u002Ftopic\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002FUPDATE_STATE",RESET:"@\u002Fview\u002Ftopic\u002FRESET"},allTopicList:{pageSize:H,page:d,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FallTopicList\u002FRESET"},sortType:m},pinlist:{pageSize:h,page:g,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FpinList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FpinList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FpinList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FpinList\u002FRESET"},sortType:n},sidebar:{actionType:{RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FRESET",UPDATE_STATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002FUPDATE_STATE"},attender:{pageSize:h,page:g,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002Fsidebar\u002Fattender\u002FRESET"},topicId:b}},followedList:{pageSize:H,page:d,total:d,pointer:b,lastPointer:b,list:[],loading:a,error:b,canPrev:c,canNext:c,linkList:[],lastFetchOnServer:a,actionType:{UPDATE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FUPDATE",FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH",FORCE_FETCH:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFORCE_FETCH",FETCH_MORE:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FFETCH_MORE",RESET:"@\u002Fview\u002Ftopic\u002FfollowedList\u002FRESET"},after:d}},recommendationIndex:{actionType:{FETCH_USER:"@\u002Fview\u002Frecommendation\u002FFETCH_USER",FETCH_MORE:"@\u002Fview\u002Frecommendation\u002FFETCH_MORE",RESET:"@\u002Fview\u002Frecommendation\u002FRESET",FETCH:"@\u002Fview\u002Frecommendation\u002FFETCH"},cursor:e,hasMore:e,userList:[],loading:a,skeleton:c,category:l,categoryNavList:[],serverRenderUserList:a},event:{event:{},loading:a,user:{},actionType:{FETCH:"view\u002Fevent\u002FFETCH",RESET:"view\u002Fevent\u002FRESET"}},academyIndex:{academy:{},bannerList:[],qualitiedList:[],latestList:[],offlineList:[],loading:a,user:{},actionType:{FETCH:"view\u002Facademy\u002FFETCH",RESET:"view\u002Facademy\u002FRESET"}},coursesIndex:{loading:a,list:[],sort:"online",actionType:{FETCH:"view\u002Fcourses\u002FFETCH",RESET:"view\u002Fcourses\u002FRESET",FETCH_MORE:"view\u002Fcourses\u002FFETCH_MORE"}},team:{team:{},loading:c,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FFETCH",RESET:"@\u002Fview\u002Fteam\u002FRESET",UPDATE:"@\u002Fview\u002Fteam\u002FUPDATE",FOLLOW:"@\u002Fview\u002Fteam\u002FFOLLOW"},detailList:{actionType:{RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002FRESET"},posts:{list:[],hasMore:a,skeleton:a,loading:a,sort:o,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fposts\u002FRESET"}},pins:{list:[],hasMore:a,loading:a,skeleton:c,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fpins\u002FRESET"}},hire:{list:[],hasMore:a,cursor:f,loading:a,skeleton:c,actionType:{FETCH:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FFETCH",UPDATE_STATE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FUPDATE_STATE",FETCH_MORE:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FFETCH_MORE",RESET:"@\u002Fview\u002Fteam\u002FdetailList\u002Fhire\u002FRESET"}}}},couponList:{list:{"0":u,"1":u,"2":u},showTooltip:a},payment:{selectedDiscount:{},bookletDetail:{},coupons:{availables:[],unavailables:[]},discountList:[]},activityVip:{selectedVipSku:{}}},component:{indexAside:{bannerList:[],userList:[],actionType:{FETCH_BANNER:"@\u002Fcomponent\u002Faside\u002FFETCH_BANNER",FETCH_USER:"@\u002Fcomponent\u002Faside\u002FFETCH_USER",CLOSE_BANNER:"@\u002Fcomponent\u002Faside\u002FCLOSE_BANNER"}}},ore:{oreCount:d},avatarMenuInfo:{user_basic:{},user_counter:{},user_growth_info:{}},common:{theme:"light",isFollowSystem:a},env:{ua:"Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) Chrome\u002F114.0.0.0 Safari\u002F537.36",serverEnv:"production"},auth:{user:b,clientId:b,token:b,qrCode:b,qrCodeStatus:b,qrCodeToken:b,userInitiated:a},tag:{subscribedTagList:[]},entry:{isLikeLoading:a},collection:{},comment:{},bookComment:{},repoComment:{},category:{list:[]},user:{subscribedTagList:[]},notification:{unreadCount:{user:d,system:d,total:d}},error:{location:b,errorView:b,statusCode:200,needRiskModal:a,riskAppealUrl:e},abTest:{info:{}},suspensionPanel:{needSuspension:c},pinComment:{},pin:{deleteDialogVisible:a,reportDialogVisible:a,targetPin:b,isOnFocus:a},topic:{visible:a},activity:{"2020":{},offer:{is_show:d,start_time:d},voteData:j},header:{leadStep:d,isPopupZlink:a},tcc:{tccConfig:b},route:{name:"column",path:v,hash:e,query:{},params:{id:k},fullPath:v,meta:{isAvailableDarkMode:c},from:{name:b,path:I,hash:e,query:{},params:{},fullPath:I,meta:{}}}},serverRendered:c,routePath:v,config:{API_HOST:"api.juejin.cn",CAPTCHA_HOST:"verify.snssdk.com",PLATFORM_APPID:{wechat:1277,weibo:1276,github:1045,wechatApp:1070},SCM_VERSION:"1.0.0.7472",http:{}},globalRefs:{}}}(false,null,true,0,"","0",1,20,"topic",void 0,"7075616880571973646","recommended","hot","popular","newest","前端","following",91,2,4,{},"\u002Fpost\u002F7075616880571973646","1398234520238839","vue+Minio实现多文件进度上传","背景 最近突然接到了一个产品的需求，有点特别，在这里给大家分享一下，需求如下 提交表单，同时要上传模型资源 模型文件是大文件，要显示上传进度，同时可以删除 模型文件要上传到服务器，表单数据同步到数据库","1647423739","7075603136836009991",6413,186,32,"清风夜半",4920,{},100,"\u002F"));</script><script src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/0f796d8.js" defer></script><script src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/a51a2c3.js" defer></script><script src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/cb5b63a.js" defer></script><script src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/298b73f.js" defer></script><script src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/7840f18.js" defer></script><script src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/2417727.js" defer></script><script src="//lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/5c2fd5e.js" defer></script>
  </body>
</html>
